(()=>{var e={};e.id=7039,e.ids=[7039],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},46906:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o}),a(36538),a(8080),a(68278),a(20230),a(49356),a(90996);var s=a(30170),r=a(45002),i=a(83876),n=a.n(i),l=a(66299),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(t,c);let o=["",{children:["activity-status",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,36538)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity-status\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,8080)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity-status\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,68278)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity-status\\error.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,20230)),"E:\\riot\\sparking\\sp_1\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,49356)),"E:\\riot\\sparking\\sp_1\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["E:\\riot\\sparking\\sp_1\\src\\app\\activity-status\\page.tsx"],u="/activity-status/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/activity-status/page",pathname:"/activity-status",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},69061:(e,t,a)=>{Promise.resolve().then(a.bind(a,2684))},63685:(e,t,a)=>{Promise.resolve().then(a.bind(a,6630))},35303:()=>{},2684:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(97247),r=a(87467);function i({error:e,reset:t}){return s.jsx("div",{children:s.jsx(r.Z,{handleBtn:t,value:e.message})})}},6630:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var s=a(97247),r=a(28964),i=a(23102),n=a(39884),l=a(77951),c=a(65794),o=a(61410),d=a(77709),u=a(82140),p=a(12927),h=a(1880),x=a(68977),m=a(36971),g=a(35890),y=a(41201),v=a(75142),f=a(69160),j=a(99539),_=a(9908),w=a(16523);let Z=()=>{let{datas:e}=(0,i.v9)(e=>e.get_activities),{postdata:t}=(0,j.Z)(),{datas:a}=(0,i.v9)(e=>e.get_users),{datas:Z}=(0,i.v9)(e=>e.infos_customer),C=(0,i.I0)(),[b,N]=(0,r.useState)(!1),[S,k]=(0,r.useState)(!1),[P,I]=(0,r.useState)(),[L,T]=(0,r.useState)([]),[q,A]=(0,r.useState)([]),W=e=>{e&&""!==e&&I(e)};(0,r.useEffect)(()=>{let e=async e=>{let t=await m.Z.getCodeStatusByURL(e);t&&200===t.statusCode&&(L.find(e=>e.product_id===t.data.product.product_id)||T(e=>[...e,{...t.data.product}]),A([{...t.data,status:"inventory"},...q])),I("")};P&&""!==P&&!q?.find(e=>e.code.includes(P))&&e(P)},[P]);let[E]=(0,f.Z)(),F=async()=>{A([]),N(!1),T([]),I(""),k(!1)},G=[{key:"inventory",value:"inventory",label:"Kho"},{key:"export",value:"export",label:"Xuất kho"},{key:"warranty",value:"warranty",label:"Bảo h\xe0nh"},{key:"maintenance",value:"maintenance",label:"Bảo tr\xec"}],O=async e=>{201===await t(()=>m.Z.createActivityContainer({...e,type:"status",list_code:q.map(e=>({code:e.code??"",price:L.find(t=>t.product_id===e.product.product_id)?.price??0,status:e.status}))??[]}))&&(C((0,_.OL)("status")),F())},$=[{title:"Nh\xe0 cung ứng",dataIndex:["supplier_product","name"],key:"name_supplier"},{title:"T\xean sản phẩm",dataIndex:["name"],key:"name"},{title:"Đơn gi\xe1",dataIndex:["price"],key:"price",render:(e,t,a)=>s.jsx(s.Fragment,{children:s.jsx(c.Z,{placeholder:"Gi\xe1",onChange:e=>{T(t=>t?.map((t,s)=>s===a?{...t,price:e}:t))},className:"w-full",defaultValue:e,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e?.replace(/\$\s?|(,*)/g,"")})})},{title:"Loại sản phẩm",dataIndex:["type","name"],key:"type_name"},{title:"Đơn vị",dataIndex:["unit_product","name_unit"],key:"name_unit"},{title:"Số lượng",dataIndex:"quantity",key:"quantity",render:(e,t)=>s.jsx(s.Fragment,{children:q.filter(e=>t.product_id===e.product.product_id).length})}];return(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.ZP,{onClick:()=>{N(!b)},icon:s.jsx(x.TlQ,{}),children:"Cập nhật trạng th\xe1i"}),b&&s.jsx(s.Fragment,{children:(0,s.jsxs)(o.Z,{title:"Qu\xe9t xuất sản phẩm",open:b,onCancel:F,footer:null,width:"100%",style:{maxWidth:"1000px"},children:[(0,s.jsxs)("div",{className:"flex flex-wrap",children:[s.jsx("div",{className:"w-72 h-72",children:s.jsx(g.ZY,{onScan:e=>{e.length>0&&W(e[0].rawValue)}})}),s.jsx(d.Z,{columns:[{title:"ID CODE",dataIndex:"code_product_id",key:"code_product_id"},{title:"T\xean sản phẩm",dataIndex:["product","name"],key:"name"},{title:"Trạng th\xe1i",dataIndex:"status",key:"status",render:(e,t,a)=>s.jsx(s.Fragment,{children:s.jsx(n.Z,{placeholder:"Chọn loại",className:"w-24",onChange:e=>{A(t=>t.map((t,s)=>s===a?{...t,status:e}:t))},showSearch:!0,filterOption:(e,t)=>(t?.children?.join("")??"").toLowerCase().includes(e.toLowerCase()),children:G.map(e=>s.jsx(y.W,{value:e.value,children:e.label},e.key))})})},{title:"",dataIndex:"",width:"",key:"",render:(e,t,a)=>s.jsx(s.Fragment,{children:s.jsx(l.ZP,{onClick:()=>{A(e=>e?.filter((e,t)=>t!==a))},danger:!0,className:"text-xl",icon:s.jsx(w.FH3,{})})})}],className:"flex-1 min-w-96",dataSource:q,scroll:{x:"max-content"},pagination:{pageSize:10,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`},showSorterTooltip:{target:"sorter-icon"}})]}),s.jsx("div",{className:"flex justify-end w-full",onClick:()=>{k(!0)},children:s.jsx(l.ZP,{type:"primary",disabled:!(L.length>0),className:"bg-[#E46D03]",children:"Cập nhật trạng th\xe1i"})}),(0,s.jsxs)(o.Z,{title:"Th\xf4ng tin xuất kho",open:S,onCancel:()=>{k(!1)},footer:null,width:"100%",style:{maxWidth:"1000px"},children:[(0,s.jsxs)(u.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:[s.jsx(v.Z,{tab:"Th\xf4ng tin xuất",children:(0,s.jsxs)(p.Z,{layout:"vertical",form:E,onFinish:O,style:{display:"flex",flexWrap:"wrap",columnGap:"12px",rowGap:"6px"},children:[s.jsx(p.Z.Item,{name:"activity",className:"!m-0",label:"Hoạt động",style:{minWidth:"320px",flex:"1 1 0%"},children:s.jsx(n.Z,{placeholder:"Chọn hoạt động",showSearch:!0,filterOption:(e,t)=>(t?.children?.join("")??"").toLowerCase().includes(e.toLowerCase()),children:e?.map(e=>s.jsx(y.W,{value:e.activity_id,children:e.name},e.activity_id))})}),s.jsx(p.Z.Item,{name:"customer",className:"!m-0",label:"Kh\xe1ch h\xe0ng",style:{minWidth:"320px",flex:"1 1 0%"},children:s.jsx(n.Z,{placeholder:"Chọn kh\xe1ch h\xe0ng",showSearch:!0,filterOption:(e,t)=>(t?.children?.join("")??"").toLowerCase().includes(e.toLowerCase()),children:Z?.map(e=>s.jsx(y.W,{value:e.info_id,children:e.name_company},e.info_id))})}),s.jsx(p.Z.Item,{name:"user",className:"!m-0",label:"Nh\xe2n vi\xean",style:{minWidth:"320px",flex:"1 1 0%"},children:s.jsx(n.Z,{placeholder:"Chọn nh\xe2n vi\xean",showSearch:!0,filterOption:(e,t)=>(t?.children?.join("")??"").toLowerCase().includes(e.toLowerCase()),children:a?.map(e=>s.jsx(y.W,{value:e.user_id,children:e.first_name+" "+e.last_name},e.user_id))})}),s.jsx(p.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:s.jsx(h.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]})},1),s.jsx(v.Z,{tab:"Sản phẩm xuất",children:s.jsx(d.Z,{columns:$,scroll:{x:"max-content"},className:"flex-1 min-w-96",dataSource:L,pagination:{pageSize:10,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`},showSorterTooltip:{target:"sorter-icon"}})},2)]}),s.jsx("div",{className:"flex justify-end w-full ",children:s.jsx(l.ZP,{className:"bg-[#02B39A]",onClick:()=>{E.submit()},children:"X\xe1c nhận"})})]})]})})]})};function C(){let{datas:e}=(0,i.v9)(e=>e.get_projects);return s.jsx("div",{className:"flex items-start gap-4 w-full flex-col",children:s.jsx("div",{className:"flex gap-2 items-center w-full  flex-wrap",children:s.jsx(Z,{})})})}var b=a(41832),N=a(96538),S=a(16415);function k({ID:e}){let[t]=(0,f.Z)(),{postdata:a}=(0,j.Z)(),c=(0,i.I0)(),{datas:d}=(0,i.v9)(e=>e.get_activities),{datas:x}=(0,i.v9)(e=>e.get_users),{datas:g}=(0,i.v9)(e=>e.infos_customer),[w,Z]=(0,r.useState)(!1),C=async()=>{let a=await m.Z.findActivityContainerById(e);200===a.statusCode&&t.setFieldsValue(a.data)},b=async t=>{let s=await a(()=>m.Z.updateActivityContainer(e,t));(200===s||201===s)&&(c((0,_.OL)("status")),Z(!1))},N=async()=>{t.submit()};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.ZP,{className:"  text-xs text-yellow-500 font-semibold",type:"text",onClick:()=>{Z(!0),C()},children:"Chỉnh sửa"}),(0,s.jsxs)(o.Z,{title:"Cập nhật th\xf4ng tin",open:w,onCancel:()=>{Z(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[s.jsx(u.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:s.jsx(v.Z,{tab:"Th\xf4ng tin xuất",children:(0,s.jsxs)(p.Z,{layout:"vertical",form:t,onFinish:b,style:{display:"flex",flexWrap:"wrap",columnGap:"12px",rowGap:"6px"},children:[s.jsx(p.Z.Item,{name:"activity",className:"!m-0",label:"Hoạt động",style:{minWidth:"320px",flex:"1 1 0%"},children:s.jsx(n.Z,{placeholder:"Chọn hoạt động",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),children:d?.map(e=>s.jsx(y.W,{value:e.activity_id,children:e.name},e.activity_id))})}),s.jsx(p.Z.Item,{name:"customer",className:"!m-0",label:"Kh\xe1ch h\xe0ng",style:{minWidth:"320px",flex:"1 1 0%"},children:s.jsx(n.Z,{placeholder:"Chọn kh\xe1ch h\xe0ng",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),children:g?.map(e=>s.jsx(y.W,{value:e.info_id,children:e.name_company},e.info_id))})}),s.jsx(p.Z.Item,{name:"user",className:"!m-0",label:"Nh\xe2n vi\xean",style:{minWidth:"320px",flex:"1 1 0%"},children:s.jsx(n.Z,{placeholder:"Chọn nh\xe2n vi\xean",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),children:x?.map(e=>s.jsx(y.W,{value:e.user_id,children:e.first_name+" "+e.last_name},e.user_id))})}),s.jsx(p.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:s.jsx(h.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]})},1)}),s.jsx("div",{className:"flex justify-end w-full mt-4",children:s.jsx(l.ZP,{type:"primary",onClick:N,children:"Cập nhật"})})]})]})}var P=a(67552);function I(){let[e,t]=(0,r.useState)(25),a=(0,P.Z)(["admin-top","product","product-edit"]),{datas:c}=(0,i.v9)(e=>e.get_activity_container),{datas:o}=(0,i.v9)(e=>e.get_users),[u,p]=(0,r.useState)([]),h=[{title:"#",className:"text-xs",dataIndex:"activity_container_id",render:(e,t,r)=>(0,s.jsxs)("div",{className:"flex flex-col gap-1 ",children:[(0,s.jsxs)("strong",{children:["#",r+1]}),s.jsx("div",{className:"flex gap-2",children:a&&s.jsx(k,{ID:e})})]}),sorter:(e,t)=>e.activity_container_id.localeCompare(t.activity_container_id)},{title:"Nh\xe2n vi\xean thực hiện",dataIndex:"user",className:"text-xs",render:e=>{let t=o?.find(t=>t.user_id===e);return s.jsx(s.Fragment,{children:(t?.first_name||"")+" "+(t?.last_name||"")})},sorter:(e,t)=>(e.list_code.length||0)-(t.list_code.length||0)},{title:"Số lượng sản phẩm",dataIndex:"",className:"text-xs",render:(e,t)=>s.jsx(s.Fragment,{children:t.list_code.length}),sorter:(e,t)=>(e.list_code.length||0)-(t.list_code.length||0)},{title:"Tổng gi\xe1 trị",dataIndex:"",className:"text-xs",render:(e,t)=>(0,s.jsxs)(s.Fragment,{children:[t.list_code.reduce((e,a)=>(console.log(t),(a.price??0)+e),0).toLocaleString("vi-VN"),"đ"]}),sorter:(e,t)=>(e.list_code.reduce((e,t)=>t.price??0+e,0)||0)-(t.list_code.reduce((e,t)=>t.price??0+e,0)||0)},{title:"Ng\xe0y cập nhật",dataIndex:["created_at"],className:"text-xs",render:e=>e?new Date(e).toLocaleDateString("vi-VN"):"N/A",sorter:(e,t)=>(e.created_at.toString()||"").localeCompare(t.created_at.toString()||"")}],x=e=>{p(c?.filter(t=>String(t.created_at+" "+t.activity_container_id+" "+t.list_code.length+" "+t.list_code.reduce((e,t)=>t.price??0+e,0)).toLowerCase().includes(e.toLowerCase())))};return(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[s.jsx(n.Z,{defaultValue:e,style:{width:83},onChange:e=>t(e),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"Tất cả"}]}),s.jsx(b.Z,{className:"ml-1",trigger:["click"],children:s.jsx(l.ZP,{children:"Xuất ra"})}),s.jsx(l.ZP,{children:s.jsx(S.Rc_,{})})]}),s.jsx("div",{className:"flex items-center",children:s.jsx(N.Z,{onChange:e=>{x(e.target.value)},placeholder:"T\xecm kiếm",style:{width:200}})})]}),s.jsx("div",{className:"w-full overflow-auto",children:s.jsx("div",{className:"min-w-fit",children:s.jsx(d.Z,{columns:h,rowSelection:{},dataSource:u,scroll:{x:"max-content"},pagination:{pageSize:e,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`},showSorterTooltip:{target:"sorter-icon"}})})})]})}function L(){let e=(0,P.Z)(["admin-top","product","product-edit"]);return(0,s.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[e&&s.jsx("div",{className:"rounded-md",children:s.jsx(C,{})}),s.jsx("div",{className:"rounded-md",children:s.jsx(I,{})})]})}var T=a(49509);function q(){(0,i.I0)();let e=(0,P.Z)(["admin-top","product","product-read"]);return s.jsx("div",{className:"p-4",children:e?s.jsx(L,{}):s.jsx(T.Z,{})})}a(84675),a(26326),a(35576),a(6493)},49509:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(97247),r=a(82547),i=a(77951);function n(){return s.jsx(r.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:s.jsx(i.ZP,{type:"primary",children:"Quay lại"})})}a(28964)},68278:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\activity-status\error.tsx#default`)},8080:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i,metadata:()=>r});var s=a(72051);let r={title:"Xuất kho"};function i({children:e}){return s.jsx(s.Fragment,{children:e})}},36538:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\activity-status\page.tsx#default`)},28204:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i}),a(72051);var s=a(54564);let r={size:{width:32,height:32},contentType:"image/png"};async function i(e){let{__metadata_id__:t,...a}=e.params,i=(0,s.fillMetadataSegment)(".",a,"icon"),{generateImageMetadata:n}=r;function l(e,t){let a={alt:e.alt,type:e.contentType||"image/png",url:i+(t?"/"+t:"")+"?4a97cfd375538d02"},{size:s}=e;return s&&(a.sizes=s.width+"x"+s.height),a}return n?(await n({params:a})).map((e,t)=>{let a=(e.id||t)+"";return l(e,a)}):[l(r,"")]}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[9379,4671,4564,5791,5794,6415,8977,5890,8188],()=>a(46906));module.exports=s})();