(()=>{var e={};e.id=9633,e.ids=[9633],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},9172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>o,routeModule:()=>x,tree:()=>c}),r(64700),r(94524),r(72970),r(28088),r(33168),r(76449),r(86922),r(20230),r(49356),r(90996);var i=r(30170),s=r(45002),a=r(83876),n=r.n(a),l=r(66299),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let c=["",{children:["activity",{children:["scheduler",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,64700)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity\\scheduler\\[id]\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,94524)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity\\scheduler\\[id]\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,72970)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity\\scheduler\\[id]\\error.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,28088)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity\\scheduler\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,33168)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity\\scheduler\\error.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,76449)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,86922)),"E:\\riot\\sparking\\sp_1\\src\\app\\activity\\error.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20230)),"E:\\riot\\sparking\\sp_1\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,49356)),"E:\\riot\\sparking\\sp_1\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["E:\\riot\\sparking\\sp_1\\src\\app\\activity\\scheduler\\[id]\\page.tsx"],p="/activity/scheduler/[id]/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/activity/scheduler/[id]/page",pathname:"/activity/scheduler/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},276:(e,t,r)=>{Promise.resolve().then(r.bind(r,90750))},22985:(e,t,r)=>{Promise.resolve().then(r.bind(r,15503))},41799:(e,t,r)=>{Promise.resolve().then(r.bind(r,13151))},7977:(e,t,r)=>{Promise.resolve().then(r.bind(r,45204))},24720:(e,t,r)=>{Promise.resolve().then(r.bind(r,88667))},35303:()=>{},99219:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(26323).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},89779:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(26323).Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},90750:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(97247),s=r(87467);function a({error:e,reset:t}){return i.jsx("div",{children:i.jsx(s.Z,{handleBtn:t,value:e.message})})}},15503:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(97247),s=r(87467);function a({error:e,reset:t}){return i.jsx("div",{children:i.jsx(s.Z,{handleBtn:t,value:e.message})})}},13151:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var i=r(97247),s=r(32990),a=r(34178),n=r(28964),l=r(23102);function d({children:e}){let{id:t}=(0,a.useParams)(),r=(0,a.useRouter)(),[d,c]=(0,n.useState)([]),{datas:o}=(0,l.v9)(e=>e.get_type_activities);return i.jsx(i.Fragment,{children:(0,i.jsxs)("div",{className:"h-full",children:[i.jsx(s.Z,{theme:"dark",onClick:e=>{r.push(e.key)},selectedKeys:[t],mode:"horizontal",items:d}),e]})})}},45204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var i=r(97247),s=r(49509),a=r(28964),n=r(46979),l=r(85202),d=r(75003),c=r(40947),o=r(45479),p=r(98065),u=r(23102),x=r(91027),h=r(34178);let m=l.Z.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  gap: 2px;
  min-height: 80px;
  border-radius: 5px;
  overflow: hidden;
  max-width: 311px;
  background: white;
  margin-top: 15px;

  .secondary-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    font-size: 12px;
    font-weight: 400px;
    color: #7d7d7d;
  }
  /* .priority{ */
  /* margin-right: 12px; */
  /* align-self: center;
    svg{
      width: 12px !important;
      height: 12px !important;
      margin-right: 12px; */
  /* margin-top: 2px; */
  /* } */
  /* } */
`,y=({item:e,index:t})=>{let{id:r}=(0,h.useParams)(),s=(0,a.useRef)(),{datas:l}=(0,u.v9)(e=>e.get_contracts);return i.jsx(n._l,{draggableId:e.activity_id,index:t,children:t=>(0,i.jsxs)("div",{onClick:()=>{},ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:[(0,i.jsxs)(m,{className:"shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),0px_1px_0px_0px_rgba(25,28,33,0.02),0px_0px_0px_1px_rgba(25,28,33,0.08)]",onClick:()=>{s.current?.click()},children:[e.picture_urls&&e.picture_urls?.length>0&&i.jsx("div",{className:"w-full h-40 overflow-hidden",onClick:e=>{e.stopPropagation()},children:i.jsx("div",{className:"h-full",children:i.jsx(d.Z,{alt:"",width:270,height:160,className:"object-cover",src:e.picture_urls[e.picture_urls.length-1].url})})}),(0,i.jsxs)("div",{className:"p-3 w-full flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"flex justify-between w-full",children:[i.jsx("div",{children:i.jsx("p",{className:"text-sm font-semibold",children:e.name})}),i.jsx("div",{children:i.jsx("div",{className:"secondary-details",children:i.jsx("p",{children:i.jsx("span",{children:new Date(e.created_at).toLocaleDateString("en-us",{month:"short",day:"2-digit"})})})})})]}),(0,i.jsxs)("div",{className:"flex justify-between w-full",children:[(0,i.jsxs)("div",{className:"flex gap-4",children:[i.jsx(c.Z,{content:e.description,children:i.jsx(p.lIk,{})}),(0,i.jsxs)("div",{className:"flex gap-1 items-center",children:[i.jsx(o.G1z,{}),i.jsx("p",{className:"text-xs font-light",children:e.picture_urls?.length??0})]})]}),i.jsx("p",{className:"text-xs text-black/40 font-bold",children:l.find(t=>t.contract_id===(e?.contract??""))?.name_contract})]})]})]}),i.jsx(x.Z,{ID:e?.activity_id,idType:r,refBtn:s,type:"schedule"})]})},e.activity_id)};var f=r(88192),v=r(17321),g=r(14531),j=r(99539),_=r(24989);let b=()=>{let[e,t]=(0,a.useState)([]),{id:r}=(0,h.useParams)(),{postdata:s}=(0,j.Z)(),l=(0,u.I0)();(0,a.useEffect)(()=>{r&&l((0,g.N)(r.toString()))},[r]);let{datas:d}=(0,u.v9)(e=>e.get_type_id_activities);(0,a.useEffect)(()=>{t(d?.status??[])},[d]);let c=async e=>{let t=e.map(e=>e.activity.map((t,r)=>({activity_id:t.activity_id,status:e.status_activity_id,position:r+1}))).flat();200===await s(()=>f.Z.updateStatusListActivity(t))&&l((0,g.N)(r.toString()))},o=(e,t,r)=>{if(!e.destination)return;let{source:i,destination:s}=e;if(i.droppableId!==s.droppableId){let e=t[Number(i.droppableId)],a=t[Number(s.droppableId)],n=[...e.activity],l=[...a.activity],[d]=n.splice(i.index,1);l.splice(s.index,0,d),r(e=>e.map((e,t)=>t===Number(i.droppableId)?{...e,activity:n}:t===Number(s.droppableId)?{...e,activity:l}:e)),c(t.map((e,t)=>t===Number(i.droppableId)?{...e,activity:n}:t===Number(s.droppableId)?{...e,activity:l}:e))}else{let e=[...t[Number(i.droppableId)].activity],[a]=e.splice(i.index,1);e.splice(s.index,0,a),r(t=>t.map((t,r)=>r===Number(i.droppableId)?{...t,activity:e}:t)),c(t.map((t,r)=>r===Number(i.droppableId)?{...t,activity:e}:t))}};return i.jsx(n.Z5,{onDragEnd:r=>{o(r,e,t)},children:i.jsx("div",{className:"flex sm:justify-normal justify-center",children:i.jsx("div",{className:"flex w-full min-h-[60vh] flex-wrap gap-4 sm:justify-normal justify-center",children:Object.entries(e).map(([e,t])=>i.jsx(n.bK,{droppableId:e,children:e=>(0,i.jsxs)("div",{className:"bg-gray-100",style:{minHeight:"100px",display:"flex",maxHeight:"fit-content",flexDirection:"column",minWidth:"300px",borderRadius:"15px",padding:"15px 15px"},ref:e.innerRef,...e.droppableProps,children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[i.jsx("div",{style:{fontWeight:"bold",color:"#1BA29B",fontSize:16,marginBottom:"1.5px"},children:t.name}),i.jsx("div",{children:i.jsx(v.P66,{})})]}),i.jsx("div",{className:"max-h-[70vh] overflow-auto min-h-8",children:t.activity.map((e,t)=>i.jsx(y,{item:e,index:t},t))}),i.jsx("div",{children:i.jsx(_.Z,{idStatus:t.status_activity_id,idType:r,type:"schedule"})})]})},e))})})})};function w(){return i.jsx("div",{children:i.jsx(b,{})})}r(80046),r(84169);var Z=r(67552);function P(){(0,u.I0)();let e=(0,Z.Z)(["admin-top","activity","activity-read"]);return i.jsx(i.Fragment,{children:e?i.jsx("div",{className:"sm:p-8 p-2 bg-[#001529] h-full",children:i.jsx(w,{})}):i.jsx(s.Z,{})})}},88667:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(97247),s=r(87467);function a({error:e,reset:t}){return i.jsx("div",{children:i.jsx(s.Z,{handleBtn:t,value:e.message})})}},91027:(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var i=r(97247),s=r(99539),a=r(84675),n=r(88192),l=r(77951),d=r(61410),c=r(82140),o=r(12927),p=r(39884),u=r(95718),x=r(1880),h=r(69160),m=r(41201),y=r(75142),f=r(28964),v=r(23102),g=r(14531),j=r(78575),_=r(23175),b=r(20142),w=r(73176),Z=r(86424),P=r(34178),k=r(19819);function N({ID:e,idType:t,type:r,refBtn:N,setID:C}){let I=(0,f.useRef)(),q=(0,f.useRef)(),S=(0,f.useRef)(),E=(0,f.useRef)(),R=(0,f.useRef)(),A=(0,f.useRef)(),[T,B]=(0,f.useState)(""),{datas:D}=(0,v.v9)(e=>e.get_type_activities),{datas:L}=(0,v.v9)(e=>e.get_contracts),{projectID:W}=(0,P.useParams)(),[F]=(0,h.Z)(),{postdata:M}=(0,s.Z)(),z=(0,v.I0)(),[G,H]=(0,f.useState)(!1),[O,V]=(0,f.useState)(""),[K,Q]=(0,f.useState)([]),X=async()=>{let t=await n.Z.getActivityById(e);if(200===t.statusCode){let e=t.data;F.setFieldsValue(e),V(t.data.type)}},J=async i=>{console.log(e);let s=await M(()=>n.Z.updateActivity(e,i));(200===s||201===s)&&(X(),r||z((0,a.ij)({project:W})),"schedule"===r&&z((0,g.N)(t)),"gantt"===r&&C&&(z((0,a.ij)({})),C("")))},U=async()=>{F.submit()};return(0,i.jsxs)(i.Fragment,{children:[i.jsx(l.ZP,{hidden:!!r,className:"  text-xs text-yellow-500 font-semibold",type:"text",ref:N,onClick:()=>{H(!0),X()},children:"Chỉnh sửa"}),i.jsx(d.Z,{title:"Cập nhật hoạt động",open:G,onCancel:()=>{H(!1),C&&C("")},footer:null,width:"100%",style:{maxWidth:"800px"},children:i.jsx(c.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,i.jsxs)(y.Z,{tab:"Th\xf4ng tin hoạt động",children:[(0,i.jsxs)(o.Z,{layout:"vertical",form:F,onFinish:J,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[i.jsx(o.Z.Item,{name:"type",label:"Loại hoạt động",rules:[{required:!0,message:"Vui l\xf2ng chọn loại hoạt động!"}],style:{width:"100%",flex:"1 1 0%"},children:i.jsx(p.Z,{disabled:!0,placeholder:"Chọn loại",onChange:e=>{V(e)},showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,i.jsxs)(i.Fragment,{children:[e,i.jsx(u.Z,{style:{margin:"8px 0"}}),i.jsx(l.ZP,{type:"link",onClick:()=>{I.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:D?.map(e=>i.jsx(m.W,{value:e.type_activity_id,children:e.name},e.type_activity_id))})}),i.jsx(o.Z.Item,{name:"name",label:"T\xean hoạt động",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xean hoạt động"}],style:{minWidth:"100%",flex:"1 1 0%"},children:i.jsx(x.default,{})}),i.jsx(o.Z.Item,{name:"status",label:"Trạng th\xe1i",style:{minWidth:"240px",flex:"1 1 0%"},children:i.jsx(p.Z,{disabled:!0,placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,i.jsxs)(i.Fragment,{children:[e,i.jsx(u.Z,{style:{margin:"8px 0"}}),i.jsx(l.ZP,{type:"link",onClick:()=>{S.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:K?.map(e=>i.jsx(m.W,{value:e.status_activity_id,children:e.name},e.status_activity_id))})}),i.jsx(o.Z.Item,{name:"contract",label:"Hợp động",style:{minWidth:"240px",flex:"1 1 0%"},children:i.jsx(p.Z,{placeholder:"Chọn hợp động",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,i.jsxs)(i.Fragment,{children:[e,i.jsx(u.Z,{style:{margin:"8px 0"}}),i.jsx(l.ZP,{type:"link",onClick:()=>{q.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:L?.map(e=>i.jsx(m.W,{value:e.contract_id,children:e.name_contract},e.contract_id))})}),i.jsx(o.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:i.jsx(x.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]}),i.jsx("div",{className:"flex justify-end w-full mt-4",children:i.jsx(l.ZP,{type:"primary",onClick:U,children:"Cập nhật"})})]},1)})}),i.jsx(j.Z,{refBtnContract:q}),i.jsx(_.Z,{refBtnType:I}),i.jsx(b.Z,{refBtnStatus:S}),i.jsx(w.Z,{refBtnStatus:R}),i.jsx(Z.Z,{refBtnType:E}),i.jsx(k.Z,{ID:T,refBtn:A,setID:B})]})}},49509:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(97247),s=r(82547),a=r(77951);function n(){return i.jsx(s.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:i.jsx(a.ZP,{type:"primary",children:"Quay lại"})})}r(28964)},86922:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\activity\error.tsx#default`)},76449:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>s});var i=r(72051);let s={title:"Hoạt động"};function a({children:e}){return i.jsx(i.Fragment,{children:e})}},72970:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\activity\scheduler\[id]\error.tsx#default`)},94524:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\activity\scheduler\[id]\layout.tsx#default`)},64700:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\activity\scheduler\[id]\page.tsx#default`)},33168:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\activity\scheduler\error.tsx#default`)},28088:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>s});var i=r(72051);let s={title:"Lịch hoạt động"};function a({children:e}){return i.jsx(i.Fragment,{children:e})}},28204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a}),r(72051);var i=r(54564);let s={size:{width:32,height:32},contentType:"image/png"};async function a(e){let{__metadata_id__:t,...r}=e.params,a=(0,i.fillMetadataSegment)(".",r,"icon"),{generateImageMetadata:n}=s;function l(e,t){let r={alt:e.alt,type:e.contentType||"image/png",url:a+(t?"/"+t:"")+"?4a97cfd375538d02"},{size:i}=e;return i&&(r.sizes=i.width+"x"+i.height),r}return n?(await n({params:r})).map((e,t)=>{let r=(e.id||t)+"";return l(e,r)}):[l(s,"")]}},40768:(e,t,r)=>{"use strict";r.d(t,{f:()=>l});var i=r(28964),s=r(22251),a=r(97247),n=i.forwardRef((e,t)=>(0,a.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var l=n}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9379,4671,4564,2703,2602,5090,5791,5794,2754,7132,5479,5202,7321,6979,8188,1290,7233,8575,4989,3176,9819],()=>r(9172));module.exports=i})();