(()=>{var e={};e.id=5980,e.ids=[5980],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},60353:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>c,pages:()=>l,routeModule:()=>x,tree:()=>d}),r(71608),r(45764),r(74880),r(50873),r(20230),r(49356),r(90996);var s=r(30170),a=r(45002),i=r(83876),n=r.n(i),o=r(66299),p={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(p[e]=()=>o[e]);r.d(t,p);let d=["",{children:["price_quote",{children:["kanban",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,71608)),"E:\\riot\\sparking\\sp_1\\src\\app\\price_quote\\kanban\\page.tsx"]}]},{error:[()=>Promise.resolve().then(r.bind(r,45764)),"E:\\riot\\sparking\\sp_1\\src\\app\\price_quote\\kanban\\error.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,74880)),"E:\\riot\\sparking\\sp_1\\src\\app\\price_quote\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,50873)),"E:\\riot\\sparking\\sp_1\\src\\app\\price_quote\\error.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20230)),"E:\\riot\\sparking\\sp_1\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,49356)),"E:\\riot\\sparking\\sp_1\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["E:\\riot\\sparking\\sp_1\\src\\app\\price_quote\\kanban\\page.tsx"],c="/price_quote/kanban/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/price_quote/kanban/page",pathname:"/price_quote/kanban",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63258:(e,t,r)=>{Promise.resolve().then(r.bind(r,32827))},83971:(e,t,r)=>{Promise.resolve().then(r.bind(r,97994))},16196:(e,t,r)=>{Promise.resolve().then(r.bind(r,24070))},35303:()=>{},32827:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(97247),a=r(87467);function i({error:e,reset:t}){return s.jsx("div",{children:s.jsx(a.Z,{handleBtn:t,value:e.message})})}},97994:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(97247),a=r(87467);function i({error:e,reset:t}){return s.jsx("div",{children:s.jsx(a.Z,{handleBtn:t,value:e.message})})}},24070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(97247),a=r(49509),i=r(28964),n=r(46979),o=r(85202),p=r(40947),d=r(45479),l=r(98065);let c=o.Z.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  gap: 2px;
  min-height: 80px;
  border-radius: 5px;
  overflow: hidden;
  max-width: 311px;
  background: white;
  margin-top: 15px;

  .secondary-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    font-size: 12px;
    font-weight: 400px;
    color: #7d7d7d;
  }
  /* .priority{ */
  /* margin-right: 12px; */
  /* align-self: center;
    svg{
      width: 12px !important;
      height: 12px !important;
      margin-right: 12px; */
  /* margin-top: 2px; */
  /* } */
  /* } */
`,u=({item:e,index:t})=>{let r=(0,i.useRef)();return s.jsx(n._l,{draggableId:e.price_quote_id,index:t,children:t=>s.jsx("div",{onClick:()=>{},ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:s.jsx(c,{className:"shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),0px_1px_0px_0px_rgba(25,28,33,0.02),0px_0px_0px_1px_rgba(25,28,33,0.08)]",onClick:()=>{r.current?.click()},children:(0,s.jsxs)("div",{className:"p-3 w-full flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex justify-between w-full",children:[s.jsx("div",{children:(0,s.jsxs)("p",{className:"text-sm font-semibold",children:["B\xe1o gi\xe1 ",e.reference_code]})}),s.jsx("div",{children:s.jsx("div",{className:"secondary-details",children:s.jsx("p",{children:s.jsx("span",{children:new Date(e.created_at).toLocaleDateString("en-us",{month:"short",day:"2-digit"})})})})})]}),(0,s.jsxs)("div",{className:"flex justify-between w-full",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[s.jsx(p.Z,{content:e.description,children:s.jsx(l.lIk,{})}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[s.jsx(d.G1z,{}),s.jsx("p",{className:"text-xs font-light",children:e.parts?.length??0})]})]}),s.jsx("p",{className:"text-xs text-black/40 font-bold",children:e.project.name})]})]})})})},e.price_quote_id)};var x=r(23102),m=r(17321),h=r(99539),f=r(45018),g=r(17082);let _=()=>{let[e,t]=(0,i.useState)([]),r=["draff","send","open","edit","refuse","accept"],{postdata:a}=(0,h.Z)(),o=(0,x.I0)();(0,i.useEffect)(()=>{o((0,f.j)({}))},[]);let{datas:p}=(0,x.v9)(e=>e.get_price_quotes);(0,i.useEffect)(()=>{p&&t(r.map(e=>{let t=p.filter(t=>t.status===e);return{status:e,data:t}}))},[p]);let d=async e=>{let t=e.map(e=>e.data.map(t=>({price_quote_id:t.price_quote_id,status:e.status}))).flat();200===await a(()=>g.Z.updateStatusListPriceQuote(t))&&o((0,f.j)({}))},l=(e,t,r)=>{if(!e.destination)return;let{source:s,destination:a}=e;if(s.droppableId!==a.droppableId){let e=t[Number(s.droppableId)],i=t[Number(a.droppableId)],n=[...e.data],o=[...i.data],[p]=n.splice(s.index,1);o.splice(a.index,0,p),r(e=>e.map((e,t)=>t===Number(s.droppableId)?{...e,data:n}:t===Number(a.droppableId)?{...e,data:o}:e)),d(t.map((e,t)=>t===Number(s.droppableId)?{...e,data:n}:t===Number(a.droppableId)?{...e,data:o}:e))}};return s.jsx(n.Z5,{onDragEnd:r=>{l(r,e,t)},children:s.jsx("div",{className:"flex sm:justify-normal justify-center",children:s.jsx("div",{className:"flex w-full min-h-[60vh] flex-wrap gap-4 sm:justify-normal justify-center",children:Object.entries(e).map(([e,t])=>s.jsx(n.bK,{droppableId:e,children:e=>(0,s.jsxs)("div",{className:"bg-gray-100",style:{minHeight:"100px",display:"flex",maxHeight:"fit-content",flexDirection:"column",minWidth:"300px",borderRadius:"15px",padding:"15px 15px"},ref:e.innerRef,...e.droppableProps,children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("div",{style:{fontWeight:"bold",color:"#1BA29B",fontSize:16,marginBottom:"1.5px"},children:"draff"===t.status?"Nh\xe1p":"send"===t.status?"Đ\xe3 gửi":"open"===t.status?"Đ\xe3 Xem":"edit"===t.status?"Đang chỉnh sửa":"refuse"===t.status?"Từ chối":"Chấp nhận"}),s.jsx("div",{children:s.jsx(m.P66,{})})]}),s.jsx("div",{className:"max-h-[70vh] overflow-auto min-h-8",children:t.data.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).map((e,t)=>(console.log(new Date(e.updated_at).getTime()),s.jsx(u,{item:e,index:t},t)))}),s.jsx("div",{})]})},e))})})})};var b=r(67552);function j(){(0,x.I0)();let e=(0,b.Z)(["admin-top","price_quote","price_quote-read"]);return s.jsx("div",{className:"sm:p-8 p-2 bg-[#001529] h-full ",children:e?s.jsx(_,{}):s.jsx(a.Z,{})})}},49509:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(97247),a=r(82547),i=r(77951);function n(){return s.jsx(a.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:s.jsx(i.ZP,{type:"primary",children:"Quay lại"})})}r(28964)},50873:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\price_quote\error.tsx#default`)},45764:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\price_quote\kanban\error.tsx#default`)},71608:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\price_quote\kanban\page.tsx#default`)},74880:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>a});var s=r(72051);let a={title:"B\xe1o gi\xe1"};function i({children:e}){return s.jsx(s.Fragment,{children:e})}},28204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i}),r(72051);var s=r(54564);let a={size:{width:32,height:32},contentType:"image/png"};async function i(e){let{__metadata_id__:t,...r}=e.params,i=(0,s.fillMetadataSegment)(".",r,"icon"),{generateImageMetadata:n}=a;function o(e,t){let r={alt:e.alt,type:e.contentType||"image/png",url:i+(t?"/"+t:"")+"?4a97cfd375538d02"},{size:s}=e;return s&&(r.sizes=s.width+"x"+s.height),r}return n?(await n({params:r})).map((e,t)=>{let r=(e.id||t)+"";return o(e,r)}):[o(a,"")]}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9379,4671,4564,5479,5202,7321,6979,8188],()=>r(60353));module.exports=s})();