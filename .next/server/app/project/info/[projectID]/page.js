(()=>{var e={};e.id=6680,e.ids=[6680],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},9714:e=>{"use strict";e.exports=require("constants")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},6969:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d}),t(1711),t(51432),t(37030),t(23427),t(79091),t(20230),t(49356),t(90996);var r=t(30170),a=t(45002),l=t(83876),n=t.n(l),i=t(66299),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["project",{children:["info",{children:["[projectID]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1711)),"E:\\riot\\sparking\\sp_1\\src\\app\\project\\info\\[projectID]\\page.tsx"]}]},{error:[()=>Promise.resolve().then(t.bind(t,51432)),"E:\\riot\\sparking\\sp_1\\src\\app\\project\\info\\[projectID]\\error.tsx"]}]},{error:[()=>Promise.resolve().then(t.bind(t,37030)),"E:\\riot\\sparking\\sp_1\\src\\app\\project\\info\\error.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,23427)),"E:\\riot\\sparking\\sp_1\\src\\app\\project\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,79091)),"E:\\riot\\sparking\\sp_1\\src\\app\\project\\error.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,20230)),"E:\\riot\\sparking\\sp_1\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,49356)),"E:\\riot\\sparking\\sp_1\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["E:\\riot\\sparking\\sp_1\\src\\app\\project\\info\\[projectID]\\page.tsx"],x="/project/info/[projectID]/page",h={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/project/info/[projectID]/page",pathname:"/project/info/[projectID]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10777:(e,s,t)=>{Promise.resolve().then(t.bind(t,47542))},45837:(e,s,t)=>{Promise.resolve().then(t.bind(t,51802))},66601:(e,s,t)=>{Promise.resolve().then(t.bind(t,41672))},47542:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(97247),a=t(87467);function l({error:e,reset:s}){return r.jsx("div",{children:r.jsx(a.Z,{handleBtn:s,value:e.message})})}},51802:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var r=t(97247),a=t(49509),l=t(39884),n=t(82140),i=t(28964),c=t(38960),d=t(23102),o=t(34178);t(88192),t(68967),t(83473);var x=t(54019),h=t(41479),m=t(34523),p=t.n(m),u=t(16415),j=t(16523);function f(){let{projectID:e}=(0,o.useParams)(),{datas:s}=(0,d.v9)(e=>e.infos_customer),[t,a]=(0,i.useState)([]),[l,n]=(0,i.useState)([]),[c,m]=(0,i.useState)(0),[f,g]=(0,i.useState)(),v=(e,s)=>{let t=new Date(e),r=new Date(s),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.ceil(Math.abs(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())-a)/864e5)};return(0,r.jsxs)("div",{className:"p-4 flex flex-wrap shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),0px_1px_0px_0px_rgba(25,28,33,0.02),0px_0px_0px_1px_rgba(25,28,33,0.08)] mt-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 flex-1 min-w-[500px]",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[r.jsx("p",{className:"uppercase font-semibold text-gray-500",children:"Tổng quan"}),(0,r.jsxs)("div",{className:"flex w-full flex-wrap",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-1 sm:w-auto w-72",children:[(0,r.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[r.jsx("p",{className:"flex-1 flex justify-start font-medium",children:"Kh\xe1ch h\xe0ng"}),r.jsx("a",{className:"flex-1 flex justify-start text-blue-500",href:`/customer/info/${f?.customer}`,children:s?.find(e=>e.info_id===(f?.customer??""))?.name_company})]}),(0,r.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[r.jsx("p",{className:"flex-1 flex justify-start font-medium",children:"Tổng chi ph\xed"}),(0,r.jsxs)("p",{className:"flex-1 flex justify-start",children:[f?.price?.toLocaleString("vi-vn"),"đ"]})]}),(0,r.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[r.jsx("p",{className:"flex-1 flex justify-start font-medium",children:"T\xecnh trạng"}),r.jsx("p",{className:"flex-1 flex justify-start",children:f?.status==="cancel"?"Đ\xe3 hủy":f?.status==="completed"?"Ho\xe0n th\xe0nh":f?.status==="pause"?"Tạm ngưng":f?.status==="start"?"Đang thực hiện":"Đang chờ"})]}),(0,r.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[r.jsx("p",{className:"flex-1 flex justify-start font-medium",children:"Ng\xe0y tạo"}),r.jsx("p",{className:"flex-1 flex justify-start",children:p()(f?.created_at).format("DD/MM/YYYY")})]}),(0,r.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[r.jsx("p",{className:"flex-1 flex justify-start font-medium",children:"Ng\xe0y bắt đầu"}),(0,r.jsxs)("p",{className:"flex-1 flex justify-start",children:[" ",p()(f?.start_date).format("DD/MM/YYYY")]})]}),(0,r.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[r.jsx("p",{className:"flex-1 flex justify-start font-medium",children:"Hạn ho\xe0n th\xe0nh"}),(0,r.jsxs)("p",{className:"flex-1 flex justify-start",children:[" ",p()(f?.end_date).format("DD/MM/YYYY")]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 justify-center items-center w-80 h-96 sm:h-full",children:[r.jsx("p",{className:"font-medium",children:"Tiến độ đạt được"}),r.jsx(x.Z,{type:"circle",percent:c/t.length*100,status:f?.status==="completed"?"success":f?.status==="cancel"?"exception":"normal"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 border-t-[1px] py-2",children:[r.jsx("p",{className:"uppercase font-semibold text-gray-500",children:"M\xf4 tả"}),r.jsx("p",{children:f?.description})]})]}),(0,r.jsxs)("div",{className:"flex-1 flex-col flex gap-8",children:[(0,r.jsxs)("div",{className:"flex gap-4 sm:gap-8 flex-wrap",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-1 gap-2 sm:w-auto w-80",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("p",{className:"uppercase font-semibold",children:[t.length-c," / ",t.length," C\xf4ng việc chưa ho\xe0n th\xe0nh"]}),r.jsx(u.ETl,{})]}),(0,r.jsxs)("p",{className:"font-medium text-gray-500",children:[c/t.length*100,"%"]}),r.jsx(x.Z,{percent:c/t.length*100,showInfo:!1})]}),(0,r.jsxs)("div",{className:"flex-col sm:flex-1  gap-2 flex sm:w-auto w-80",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("p",{className:"uppercase font-semibold",children:[v(new Date,f?.end_date??new Date)," ","/"," ",v(f?.start_date??new Date,f?.end_date??new Date)," ","Ng\xe0y c\xf2n lại"]}),r.jsx(j.f$3,{})]}),(0,r.jsxs)("p",{className:"font-medium text-gray-500",children:[v(new Date,f?.end_date??new Date)/(0===v(f?.start_date??new Date,f?.end_date??new Date)?1:v(f?.start_date??new Date,f?.end_date??new Date))*100,"%"]}),r.jsx(x.Z,{percent:v(new Date,f?.end_date??new Date)/(0===v(f?.start_date??new Date,f?.end_date??new Date)?1:v(f?.start_date??new Date,f?.end_date??new Date))*100,showInfo:!1})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(h.Z,{className:"flex flex-col gap-2 flex-1 p-4",children:[r.jsx("p",{children:"TỔNG H\xd3A ĐƠN"}),(0,r.jsxs)("p",{className:"font-bold",children:[l.reduce((e,s)=>e+(s.price??0),0).toLocaleString("vi-vn"),"đ"]})]}),(0,r.jsxs)(h.Z,{className:"flex flex-col gap-2 flex-1 p-4",color:"green",children:[r.jsx("p",{children:"Đ\xc3 THANH TO\xc1N"}),(0,r.jsxs)("p",{className:"font-bold",children:[l.reduce((e,s)=>"success"===s.status?e+(s.price??0):e,0).toLocaleString("vi-vn"),"đ"]})]}),(0,r.jsxs)(h.Z,{className:"flex flex-col gap-2 flex-1 p-4",color:"yellow",children:[r.jsx("p",{children:"CHỜ THANH TO\xc1N"}),(0,r.jsxs)("p",{className:"font-bold",children:[l.reduce((e,s)=>{let t=new Date,r=new Date(s.date_expired??"");return"pending"===s.status&&t.getTime()<=r.getTime()?e+(s.price??0):e},0).toLocaleString("vi-vn"),"đ"]})]}),(0,r.jsxs)(h.Z,{className:"flex flex-col gap-2 flex-1 p-4",color:"red",children:[r.jsx("p",{children:"QU\xc1 HẠN"}),(0,r.jsxs)("p",{className:"font-bold",children:[l.reduce((e,s)=>{let t=new Date,r=new Date(s.date_expired??"");return"pending"===s.status&&t.getTime()>r.getTime()?e+(s.price??0):e},0).toLocaleString("vi-vn"),"đ"]})]})]})]})]})}var g=t(19466);function v(){return(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[r.jsx("p",{className:"text-xl",children:"Hoạt động"}),r.jsx(g.Z,{})]})}var w=t(37578);function N(){return(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[r.jsx("p",{className:"text-xl",children:"C\xf4ng việc"}),r.jsx(w.Z,{})]})}var y=t(68534);function _(){return(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[r.jsx("p",{className:"text-xl",children:"H\xf3a đơn"}),r.jsx(y.Z,{})]})}var b=t(60082);function k(){return(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[r.jsx("p",{className:"text-xl",children:"B\xe1o gi\xe1"}),r.jsx(b.Z,{})]})}var Z=t(40573);function C(){return(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[r.jsx("p",{className:"text-xl",children:"Nhắn tin dự \xe1n"}),r.jsx(Z.default,{})]})}function D(){let e=(0,o.useRouter)(),s=(0,c.GS)({maxWidth:639}),{projectID:t}=(0,o.useParams)(),{datas:a}=(0,d.v9)(e=>e.get_projects),i=[{label:"Th\xf4ng tin dự \xe1n",key:"project",children:r.jsx(f,{})},{label:"Hoạt động",key:"activity",children:r.jsx(v,{})},{label:"C\xf4ng việc",key:"work",children:r.jsx(N,{})},{label:"H\xf3a đơn",key:"invoice",children:r.jsx(_,{})},{label:"B\xe1o gi\xe1",key:"price_quote",children:r.jsx(k,{})},{label:"Nhắn tin",key:"chat",children:r.jsx(C,{})}];return(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("div",{children:r.jsx(l.Z,{placeholder:"Dự \xe1n",style:{minWidth:120,flex:"1 1 0%"},defaultValue:t,onChange:s=>{e.push(`/project/info/${s||a[0].project_id}`)},showSearch:!0,allowClear:!0,filterOption:(e,s)=>(s?.label??"").toLowerCase().includes(e.toLowerCase()),options:a.map(e=>({value:e.project_id,label:e.name}))})}),r.jsx("div",{className:"flex-1",children:r.jsx(n.Z,{items:i,tabPosition:`${s?"top":"right"}`})})]})}t(84169),t(86488),t(26326),t(50678),t(6493);var S=t(67552);function P(){(0,d.I0)();let{projectID:e}=(0,o.useParams)(),s=(0,S.Z)(["admin-top","project","project-read"]);return r.jsx("div",{className:"p-4",children:s?r.jsx(D,{}):r.jsx(a.Z,{})})}},41672:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(97247),a=t(87467);function l({error:e,reset:s}){return r.jsx("div",{children:r.jsx(a.Z,{handleBtn:s,value:e.message})})}},47248:(e,s,t)=>{"use strict";t.d(s,{Z:()=>P});var r=t(97247),a=t(99539),l=t(9914),n=t(88192),i=t(71691),c=t(77951),d=t(61410),o=t(82140),x=t(12927),h=t(1880),m=t(39884),p=t(95718),u=t(35090),j=t(31464),f=t(92177),g=t(69160),v=t(41201),w=t(75142),N=t(28964),y=t(38043),_=t(98065),b=t(23102),k=t(86424),Z=t(73176),C=t(24989),D=t(37694),S=t(34178);function P({idStatus:e,idType:s,refBtnWork:t,type:P}){let{Panel:T}=i.default,I=(0,N.useRef)(null),{projectID:q}=(0,S.useParams)();(0,S.useSearchParams)();let A=(0,N.useRef)(),L=(0,N.useRef)(),F=(0,N.useRef)(),{datas:E}=(0,b.v9)(e=>e.get_type_work),{datas:H}=(0,b.v9)(e=>e.get_projects),{datas:z}=(0,b.v9)(e=>e.get_users),{datas:W}=(0,b.v9)(e=>e.get_activities),[G,M]=(0,N.useState)(!1),[$,O]=(0,N.useState)([]),[R,Y]=(0,N.useState)([]),[B]=(0,g.Z)(),{postdata:V}=(0,a.Z)(),K=(0,b.I0)(),[U,X]=(0,N.useState)(!1),[Q,J]=(0,N.useState)(""),ee=async e=>{let t=await V(()=>n.Z.createWork({...e,list_users:R}));(200===t||201===t)&&(P||K((0,l.LG)({project:q})),"schedule"===P&&K((0,D.C)(s)),X(!1))},es=async()=>{B.submit()};return(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.ZP,{hidden:!!t,type:P?"link":"default",className:P?"text-[#EC8920]":"bg-blue-400 border-0 text-white font-semibold",icon:r.jsx(_.b0B,{}),onClick:()=>{X(!0)},ref:t,children:"Th\xeam c\xf4ng việc"}),(0,r.jsxs)(d.Z,{title:"Tạo c\xf4ng việc",open:U,onCancel:()=>{X(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[r.jsx(o.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:r.jsx(w.Z,{tab:"Th\xf4ng tin c\xf4ng việc",children:r.jsx(x.Z,{layout:"vertical",form:B,onFinish:ee,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:(0,r.jsxs)(i.default,{defaultActiveKey:["1"],className:"w-full",children:[(0,r.jsxs)(T,{header:"Th\xf4ng tin chung",className:"w-full",children:[r.jsx(x.Z.Item,{name:"name",label:"T\xean c\xf4ng việc",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xean c\xf4ng việc"}],style:{minWidth:"100%",flex:"1 1 0%"},children:r.jsx(h.default,{})}),r.jsx(x.Z.Item,{name:"project",label:"C\xf4ng tr\xecnh",rules:[{required:!0,message:"Vui l\xf2ng chọn c\xf4ng tr\xecnh!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:r.jsx(m.Z,{placeholder:"Chọn c\xf4ng tr\xecnh",showSearch:!0,filterOption:(e,s)=>(Array.isArray(s?.children)?s.children.join(""):s?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,r.jsxs)(r.Fragment,{children:[e,r.jsx(p.Z,{style:{margin:"8px 0"}}),r.jsx(c.ZP,{type:"link",onClick:()=>{I.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:H?.map(e=>r.jsx(v.W,{value:e.project_id,children:e.name},e.project_id))})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[r.jsx(x.Z.Item,{name:"time_start",label:"Bắt đầu",className:" mb-0",style:{minWidth:"250px",flex:"1 1 0%"},children:r.jsx(u.default,{placeholder:"Chọn ng\xe0y bắt đầu",style:{width:"100%"}})}),r.jsx(x.Z.Item,{className:" mb-0",label:"Kết th\xfac",name:"time_end",rules:[{required:!0}],style:{minWidth:"250px",flex:"1 1 0%"},children:r.jsx(u.default,{placeholder:"Chọn ng\xe0y kết th\xfac",style:{width:"100%"}})})]}),(0,r.jsxs)("div",{className:" mt-8",children:[r.jsx("p",{children:"Người thực hiện"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(j.C.Group,{max:{count:5,style:{color:"#f56a00",backgroundColor:"#fde3cf"}},children:R?.map(e=>{let s=z?.find(s=>s.user_id===e);return r.jsx(f.Z,{title:(s?.first_name||"")+(s?.last_name||""),placement:"top",children:r.jsx(j.C,{src:s?.picture_url,alt:(s?.first_name??"")+(s?.last_name??""),style:{backgroundColor:"#87d068"}})})})}),G?(0,r.jsxs)(r.Fragment,{children:[r.jsx(m.Z,{mode:"multiple",onBlur:()=>{M(!G)},allowClear:!0,maxTagCount:"responsive",style:{width:"220px"},value:R,placeholder:"Please select",onChange:e=>{Y(e)},options:$?.map(e=>({label:r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:r.jsxs("div",{children:[r.jsx("strong",{children:e.label}),r.jsx("div",{style:{fontSize:"12px",color:"gray"},children:e.group})]})}),value:e.value}))}),r.jsx(y.FMH,{className:"w-8 h-8 text-red-500 cursor-pointer",onClick:()=>{M(!G)}})]}):r.jsx(y.S$f,{className:"w-8 h-8 text-[#ED8C1F] cursor-pointer",onClick:()=>{M(!G)}})]})]})]},"1"),(0,r.jsxs)(T,{header:"Th\xf4ng tin n\xe2ng cao",children:[r.jsx(x.Z.Item,{name:"type",label:"Loại c\xf4ng việc",rules:[{required:!0,message:"Vui l\xf2ng chọn loại c\xf4ng việc!"}],style:{width:"100%",flex:"1 1 0%"},children:r.jsx(m.Z,{placeholder:"Chọn loại",onChange:e=>{J(e)},showSearch:!0,filterOption:(e,s)=>(Array.isArray(s?.children)?s.children.join(""):s?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,r.jsxs)(r.Fragment,{children:[e,r.jsx(p.Z,{style:{margin:"8px 0"}}),r.jsx(c.ZP,{type:"link",onClick:()=>{A.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:E?.map(e=>r.jsx(v.W,{value:e.type_work_id,children:e.name},e.type_work_id))})}),r.jsx(x.Z.Item,{name:"status",label:"Trạng th\xe1i",style:{minWidth:"240px",flex:"1 1 0%"},children:r.jsx(m.Z,{placeholder:"Chọn trạng th\xe1i",showSearch:!0,filterOption:(e,s)=>(Array.isArray(s?.children)?s.children.join(""):s?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,r.jsxs)(r.Fragment,{children:[e,r.jsx(p.Z,{style:{margin:"8px 0"}}),r.jsx(c.ZP,{type:"link",onClick:()=>{L.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:E.find(e=>e.type_work_id===Q)?.status?.map(e=>r.jsx(v.W,{value:e.status_work_id,children:e.name},e.status_work_id))})}),r.jsx(x.Z.Item,{name:"activity",label:"Hoạt động",style:{minWidth:"240px",flex:"1 1 0%"},children:r.jsx(m.Z,{placeholder:"Chọn hoạt động",showSearch:!0,filterOption:(e,s)=>(Array.isArray(s?.children)?s.children.join(""):s?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,r.jsxs)(r.Fragment,{children:[e,r.jsx(p.Z,{style:{margin:"8px 0"}}),r.jsx(c.ZP,{type:"link",onClick:()=>{F.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:W?.map(e=>r.jsx(v.W,{value:e.activity_id,children:e.name},e.activity_id))})}),r.jsx(x.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:r.jsx(h.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]},"2")]})})},1)}),r.jsx("div",{className:"flex justify-end w-full mt-4",children:r.jsx(c.ZP,{type:"primary",onClick:es,children:"Tạo"})})]}),r.jsx(k.Z,{refBtnType:A}),r.jsx(Z.Z,{refBtnStatus:L}),r.jsx(C.Z,{refBtnActivity:F})]})}},37578:(e,s,t)=>{"use strict";t.d(s,{Z:()=>W});var r=t(97247),a=t(28964),l=t(77951),n=t(93104),i=t(39884),c=t(61410),d=t(77709),o=t(96538),x=t(23102),h=t(19819),m=t(99539),p=t(88192),u=t(9914),j=t(16523),f=t(67552),g=t(34178),v=t(57989),w=t(37013),N=t(45496),y=t(28852),_=t(74974),b=t(81299),k=t(59939),Z=t(44211),C=t(51740);function D({open:e,onOpenChange:s,list_id:t,userId:l,workId:n,userName:i}){let[c,d]=(0,a.useState)(0),[o,x]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[u,j]=(0,a.useState)(!1),f=async()=>{j(!0);try{let e={progress:c,description:o,user_work:t};h&&""!==h?await p.Z.updateReviewUser(h,e):await p.Z.createReviewUser(e),d(0),x(""),s(!1)}catch{}finally{j(!1)}};return r.jsx(k.Vq,{open:e,onOpenChange:s,children:(0,r.jsxs)(k.cZ,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(k.fK,{children:[(0,r.jsxs)(k.$N,{className:"flex items-center gap-2",children:[r.jsx(_.Z,{className:"w-5 h-5 text-yellow-500"}),"Đ\xe1nh gi\xe1 c\xf4ng việc"]}),(0,r.jsxs)(k.Be,{children:["Đ\xe1nh gi\xe1 tiến độ v\xe0 chất lượng c\xf4ng việc của ",r.jsx("strong",{children:i})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)(C._,{htmlFor:"progress",children:["Tiến độ ho\xe0n th\xe0nh: ",c,"%"]}),r.jsx("input",{id:"progress",type:"range",min:"0",max:"100",step:"5",value:c,onChange:e=>d(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[r.jsx("span",{children:"0%"}),r.jsx("span",{children:"50%"}),r.jsx("span",{children:"100%"})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(C._,{htmlFor:"description",children:"Nhận x\xe9t"}),r.jsx(Z.g,{id:"description",placeholder:"Nhập nhận x\xe9t về c\xf4ng việc của nh\xe2n vi\xean...",value:o,onChange:e=>x(e.target.value),rows:4})]})]}),(0,r.jsxs)(k.cN,{children:[r.jsx(y.zx,{variant:"outline",onClick:()=>s(!1),disabled:u,children:"Hủy"}),r.jsx(y.zx,{onClick:f,disabled:u,className:"flex items-center gap-2",children:u?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Đang gửi..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(_.Z,{className:"w-4 h-4"}),"Gửi đ\xe1nh gi\xe1"]})})]})]})})}function S({open:e,onOpenChange:s,workId:t,userId:l,userName:n}){let[i,c]=(0,a.useState)(""),[d,o]=(0,a.useState)(!1),x=async()=>{if(i.trim()){o(!0);try{await p.Z.createRemind({description:i,work:t,user_remind:l,seen:!1}),c(""),s(!1)}catch{}finally{o(!1)}}};return r.jsx(k.Vq,{open:e,onOpenChange:s,children:(0,r.jsxs)(k.cZ,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(k.fK,{children:[(0,r.jsxs)(k.$N,{className:"flex items-center gap-2",children:[r.jsx(b.Z,{className:"w-5 h-5 text-orange-500"}),"Nhắc nhở c\xf4ng việc"]}),(0,r.jsxs)(k.Be,{children:["Gửi nhắc nhở về c\xf4ng việc đến ",r.jsx("strong",{children:n})]})]}),r.jsx("div",{className:"grid gap-4 py-4",children:(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(C._,{htmlFor:"remind-description",children:"Nội dung nhắc nhở"}),r.jsx(Z.g,{id:"remind-description",placeholder:"Nhập nội dung nhắc nhở cho nh\xe2n vi\xean...",value:i,onChange:e=>c(e.target.value),rows:4})]})}),(0,r.jsxs)(k.cN,{children:[r.jsx(y.zx,{variant:"outline",onClick:()=>s(!1),disabled:d,children:"Hủy"}),r.jsx(y.zx,{onClick:x,disabled:d,className:"flex items-center gap-2",children:d?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Đang gửi..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(b.Z,{className:"w-4 h-4"}),"Gửi nhắc nhở"]})})]})]})})}function P({workId:e,userId:s,userName:t,listId:l}){let[n,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(y.zx,{variant:"outline",size:"sm",onClick:()=>i(!0),className:"flex items-center gap-2 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200",children:[r.jsx(_.Z,{className:"w-4 h-4"}),"Đ\xe1nh gi\xe1"]}),(0,r.jsxs)(y.zx,{variant:"outline",size:"sm",onClick:()=>d(!0),className:"flex items-center gap-2 hover:bg-orange-50 hover:text-orange-600 hover:border-orange-200",children:[r.jsx(b.Z,{className:"w-4 h-4"}),"Nhắc nhở"]}),n&&r.jsx(D,{open:n,onOpenChange:i,workId:e,userId:s,list_id:l,userName:t}),c&&r.jsx(S,{open:c,onOpenChange:d,workId:e,userId:s,userName:t})]})}function T({isOpen:e,onClose:s,work:t}){let[l,n]=(0,a.useState)();return e?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300",onClick:s}),(0,r.jsxs)("div",{className:`fixed right-0 top-0 h-full w-full max-w-2xl bg-background border-l shadow-2xl z-50 transform transition-transform duration-300 ease-in-out ${e?"translate-x-0":"translate-x-full"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b bg-muted/30",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(v.Z,{className:"w-6 h-6 text-primary"}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Danh s\xe1ch nh\xe2n vi\xean"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:l?.name})]})]}),r.jsx(y.zx,{variant:"ghost",size:"icon",onClick:s,className:"hover:bg-destructive/10 hover:text-destructive",children:r.jsx(w.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[r.jsx("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(v.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[l?.list_user?.length," nh\xe2n vi\xean được ph\xe2n c\xf4ng"]})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[l?.list_user?.map(e=>r.jsx("div",{className:"p-4 bg-card border rounded-xl hover:shadow-md transition-all duration-200 hover:border-primary/20",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsxs(N.qE,{className:"w-12 h-12 ring-2 ring-primary/10",children:[r.jsx(N.F$,{src:e?.picture_url||void 0}),r.jsxs(N.Q5,{className:"bg-primary/10 text-primary font-medium",children:[e?.first_name.charAt(0),e?.last_name.charAt(0)]})]}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-base",children:[e?.first_name," ",e?.last_name]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e?.email}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["ID: ",e?.user_id]})]}),r.jsx(P,{workId:l?.work_id,userId:e?.user_id,userName:`${e?.first_name} ${e?.last_name}`,listId:e?.list_id})]})})]})},e?.user_id)),l?.list_user?.length===0&&(0,r.jsxs)("div",{className:"text-center py-16",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:r.jsx(v.Z,{className:"w-10 h-10 text-muted-foreground"})}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Chưa c\xf3 nh\xe2n vi\xean"}),r.jsx("p",{className:"text-muted-foreground",children:"Chưa c\xf3 nh\xe2n vi\xean n\xe0o được ph\xe2n c\xf4ng cho c\xf4ng việc n\xe0y"})]})]})]})]})]}):null}function I(){let[e,s]=(0,a.useState)(),[t,w]=(0,a.useState)(25),N=(0,f.Z)(["admin-top","activity","activity-edit","work","work-edit"]),{datas:y}=(0,x.v9)(e=>e.get_works),[_,b]=(0,a.useState)([]),k=[{title:"#",className:"text-xs",dataIndex:"work_id",render:(e,t,a)=>(0,r.jsxs)("div",{className:"flex flex-col gap-1 ",children:[(0,r.jsxs)("strong",{children:["#",a+1]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(l.ZP,{onClick:()=>{s(e)},className:"flex items-center gap-2",children:[r.jsx(v.Z,{className:"w-4 h-4"}),"Xem nh\xe2n vi\xean (",t.list_user?.length||0,")"]}),N&&r.jsx(h.Z,{ID:e})]})]}),sorter:(e,s)=>e.work_id.localeCompare(s.work_id)},{title:"T\xean c\xf4ng việc",dataIndex:"name",className:"text-xs",render:e=>e||"N/A",sorter:(e,s)=>(e.name||"").localeCompare(s.name||"")},{title:"Hoạt động",dataIndex:["activity","name"],className:"text-xs",render:e=>e?`${e}`:"N/A",sorter:(e,s)=>(e.activity?.name||"").localeCompare(s.activity?.name||"")},{title:"Loại c\xf4ng việc",dataIndex:["type","name"],className:"text-xs",render:e=>e||"N/A",sorter:(e,s)=>(e.type?.name||"").localeCompare(s.type?.name||"")},{title:"T\xecnh trạng",dataIndex:["status","name"],className:"text-xs",render:e=>e||"N/A",sorter:(e,s)=>(e.status?.name||"").localeCompare(s.status?.name||"")},{title:"Khẩn cấp",className:"text-xs",dataIndex:"urgent",render:(e,s)=>r.jsx(r.Fragment,{children:r.jsx(n.Z,{defaultChecked:e,onChange:async e=>{C(s.work_id,e)}})})},{title:"Ng\xe0y bắt đầu",dataIndex:"time_start",className:"text-xs",render:e=>e?new Date(e).toLocaleDateString("vi-VN"):"N/A",sorter:(e,s)=>new Date(e.time_start||0).getTime()-new Date(s.time_start||0).getTime()},{title:"Ng\xe0y kết th\xfac",dataIndex:"time_end",className:"text-xs",render:e=>e?new Date(e).toLocaleDateString("vi-VN"):"N/A",sorter:(e,s)=>new Date(e.time_end||0).getTime()-new Date(s.time_end||0).getTime()}],Z=e=>{b(y?.filter(s=>String(s.created_at+" "+s.name+" "+s.activity?.name+" "+s.time_start+" "+s.time_end+" "+s?.status?.name+" "+s.work_id).toLowerCase().includes(e.toLowerCase())))},C=async(e,s)=>{let t=await D(()=>p.Z.updateWork(e,{urgent:s}));(200===t||201===t)&&S((0,u.LG)())},{postdata:D}=(0,m.Z)(),S=(0,x.I0)(),[P,I]=(0,a.useState)(!1),[q,A]=(0,a.useState)([]),L=async()=>{200===await D(()=>p.Z.deleteWorks(q))&&(S((0,u.LG)()),A([]),I(!1))};return(0,g.useSearchParams)(),(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(i.Z,{defaultValue:t,style:{width:83},onChange:e=>w(e),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"Tất cả"}]}),r.jsx(l.ZP,{hidden:!(q.length>0),children:"Xuất ra"}),r.jsx(l.ZP,{onClick:()=>{I(!0)},danger:!0,hidden:!(q.length>0),className:"text-xl",icon:r.jsx(j.FH3,{})}),r.jsx(c.Z,{open:P,title:"X\xf3a dữ liệu",onOk:L,onCancel:()=>{I(!1)},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]}),r.jsx("div",{className:"flex items-center",children:r.jsx(o.Z,{onChange:e=>{Z(e.target.value)},placeholder:"T\xecm kiếm",style:{width:200}})})]}),r.jsx("div",{className:"w-full overflow-auto",children:r.jsx("div",{className:"min-w-fit",children:r.jsx(d.Z,{columns:k,rowSelection:{onChange:(e,s)=>{A(s.map(e=>e.work_id))}},dataSource:_,scroll:{x:"max-content"},pagination:{pageSize:t,showTotal:(e,s)=>`${s[0]}-${s[1]} of ${e} items`},showSorterTooltip:{target:"sorter-icon"}})})}),r.jsx(T,{isOpen:!!e,onClose:()=>s(void 0),work:e})]})}var q=t(47248),A=t(86424),L=t(73176),F=t(79906),E=t(16415),H=t(38043);function z(){let{projectID:e}=(0,g.useParams)();return r.jsx("div",{className:"flex items-start gap-4 w-full flex-col",children:(0,r.jsxs)("div",{className:"flex gap-2 items-center w-full flex-wrap",children:[r.jsx(q.Z,{}),r.jsx("div",{className:"sm:block hidden",children:r.jsx(A.Z,{})}),r.jsx("div",{className:"sm:block hidden",children:r.jsx(L.Z,{})}),r.jsx(F.default,{href:"/work/scheduler",hidden:!!e,children:r.jsx(l.ZP,{icon:r.jsx(E.zwD,{})})}),r.jsx(F.default,{href:"/management/all_work",children:r.jsx(l.ZP,{icon:r.jsx(H.zom,{})})})]})})}function W(){let e=(0,f.Z)(["admin-top","activity","activity-edit","work","work-edit"]);return(0,r.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[e&&r.jsx("div",{className:"rounded-md",children:r.jsx(z,{})}),r.jsx("div",{className:"rounded-md",children:r.jsx(I,{})})]})}},51432:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\project\info\[projectID]\error.tsx#default`)},1711:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\project\info\[projectID]\page.tsx#default`)},37030:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\project\info\error.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9379,4671,4564,2703,2602,5090,5791,5794,2754,7132,6415,5479,4523,7504,5202,5977,9970,1750,3311,4184,8188,1290,7233,8575,4989,3176,9819,5983,82,8534,352,3211],()=>t(6969));module.exports=r})();