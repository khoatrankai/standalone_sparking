(()=>{var e={};e.id=4941,e.ids=[4941],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},9714:e=>{"use strict";e.exports=require("constants")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},77070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>g,tree:()=>c}),r(21187),r(21868),r(72876),r(20230),r(49356),r(90996);var o=r(30170),a=r(45002),s=r(83876),n=r.n(s),l=r(66299),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let c=["",{children:["timekeeping",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,21187)),"E:\\riot\\sparking\\sp_1\\src\\app\\timekeeping\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,21868)),"E:\\riot\\sparking\\sp_1\\src\\app\\timekeeping\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,72876)),"E:\\riot\\sparking\\sp_1\\src\\app\\timekeeping\\error.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20230)),"E:\\riot\\sparking\\sp_1\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,49356)),"E:\\riot\\sparking\\sp_1\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,28204))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["E:\\riot\\sparking\\sp_1\\src\\app\\timekeeping\\page.tsx"],u="/timekeeping/page",p={require:r,loadChunk:()=>Promise.resolve()},g=new o.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/timekeeping/page",pathname:"/timekeeping",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},981:(e,t,r)=>{Promise.resolve().then(r.bind(r,34510))},6778:(e,t,r)=>{Promise.resolve().then(r.bind(r,90407))},35303:()=>{},41479:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var o=r(28964),a=r(15001),s=r.n(a),n=r(14959),l=r(84217),i=r(41459),c=r(18788),d=r(13286),u=r(55624),p=r(76362),g=r(19705),m=r(66159),x=r(74244),h=r(35188);let f=e=>{let{paddingXXS:t,lineWidth:r,tagPaddingHorizontal:o,componentCls:a,calc:s}=e,n=s(o).sub(r).equal(),l=s(t).sub(r).equal();return{[a]:Object.assign(Object.assign({},(0,m.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:n,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,p.unit)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:l,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:n}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},b=e=>{let{lineWidth:t,fontSizeIcon:r,calc:o}=e,a=e.fontSizeSM;return(0,x.mergeToken)(e,{tagFontSize:a,tagLineHeight:(0,p.unit)(o(e.lineHeightSM).mul(a).equal()),tagIconSize:o(r).sub(o(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},v=e=>({defaultBg:new g.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),y=(0,h.I$)("Tag",e=>f(b(e)),v);var C=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r};let _=o.forwardRef((e,t)=>{let{prefixCls:r,style:a,className:n,checked:l,onChange:i,onClick:c}=e,d=C(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:g}=o.useContext(u.E_),m=p("tag",r),[x,h,f]=y(m),b=s()(m,`${m}-checkable`,{[`${m}-checkable-checked`]:l},null==g?void 0:g.className,n,h,f);return x(o.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},a),null==g?void 0:g.style),className:b,onClick:e=>{null==i||i(!l),null==c||c(e)}})))});var w=r(57530);let k=e=>(0,w.Z)(e,(t,r)=>{let{textColor:o,lightBorderColor:a,lightColor:s,darkColor:n}=r;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:o,background:s,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:n,borderColor:n},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}}),j=(0,h.bk)(["Tag","preset"],e=>k(b(e)),v),S=(e,t,r)=>{let o=function(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}(r);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${r}`],background:e[`color${o}Bg`],borderColor:e[`color${o}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},P=(0,h.bk)(["Tag","status"],e=>{let t=b(e);return[S(t,"success","Success"),S(t,"processing","Info"),S(t,"error","Error"),S(t,"warning","Warning")]},v);var $=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r};let N=o.forwardRef((e,t)=>{let{prefixCls:r,className:a,rootClassName:p,style:g,children:m,icon:x,color:h,onClose:f,bordered:b=!0,visible:v}=e,C=$(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:_,direction:w,tag:k}=o.useContext(u.E_),[S,N]=o.useState(!0),T=(0,n.Z)(C,["closeIcon","closable"]);o.useEffect(()=>{void 0!==v&&N(v)},[v]);let O=(0,l.o2)(h),E=(0,l.yT)(h),Z=O||E,q=Object.assign(Object.assign({backgroundColor:h&&!Z?h:void 0},null==k?void 0:k.style),g),I=_("tag",r),[B,z,A]=y(I),D=s()(I,null==k?void 0:k.className,{[`${I}-${h}`]:Z,[`${I}-has-color`]:h&&!Z,[`${I}-hidden`]:!S,[`${I}-rtl`]:"rtl"===w,[`${I}-borderless`]:!b},a,p,z,A),H=e=>{e.stopPropagation(),null==f||f(e),e.defaultPrevented||N(!1)},[,R]=(0,i.Z)((0,i.w)(e),(0,i.w)(k),{closable:!1,closeIconRender:e=>{let t=o.createElement("span",{className:`${I}-close-icon`,onClick:H},e);return(0,c.wm)(e,t,e=>({onClick:t=>{var r;null===(r=null==e?void 0:e.onClick)||void 0===r||r.call(e,t),H(t)},className:s()(null==e?void 0:e.className,`${I}-close-icon`)}))}}),F="function"==typeof C.onClick||m&&"a"===m.type,L=x||null,G=L?o.createElement(o.Fragment,null,L,m&&o.createElement("span",null,m)):m,M=o.createElement("span",Object.assign({},T,{ref:t,className:D,style:q}),G,R,O&&o.createElement(j,{key:"preset",prefixCls:I}),E&&o.createElement(P,{key:"status",prefixCls:I}));return B(F?o.createElement(d.Z,{component:"Tag"},M):M)});N.CheckableTag=_;let T=N},34510:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(97247),a=r(87467);function s({error:e,reset:t}){return o.jsx("div",{children:o.jsx(a.Z,{handleBtn:t,value:e.message})})}},90407:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var o=r(97247),a=r(49509),s=r(28964),n=r(77951),l=r(23102),i=r(96180),c=r(99539),d=r(55721),u=r(43540),p=r(83395);function g(){let{postdata:e}=(0,c.Z)(),t=(0,l.I0)(),{datas:r}=(0,l.v9)(e=>e.check_timekeepings),a=async()=>{let r=await e(()=>d.Z.createTimeKeeping());(200===r||201===r)&&(t((0,u.p)({})),t((0,p.F)()))};return o.jsx("div",{className:"flex items-start gap-4 w-full flex-col",children:o.jsx("div",{className:"flex gap-1 items-center  pb-4  w-full flex-wrap",children:o.jsx(n.ZP,{className:"bg-blue-400 border-0 text-white font-semibold",icon:r?o.jsx(i.wjV,{}):o.jsx(i.hFG,{}),onClick:()=>{a()},children:r?"Ho\xe0n tất":"Bắt đầu c\xf4ng việc"})})})}var m=r(35090),x=r(41479),h=r(39884),f=r(41832),b=r(74231),v=r(77709),y=r(96538),C=r(34178),_=r(35024),w=r(99801),k=r.n(w),j=r(53803),S=r(27035),P=r.n(S),$=r(8353);async function N(e,t){try{let r=new(P()).Workbook,o=r.addWorksheet("BaoCaoChamCong");o.addRow([]),o.mergeCells("B2:H2"),o.getCell("B2").value=`B\xc1O C\xc1O CHẤM C\xd4NG CỦA ${e.toUpperCase()}`,o.getCell("B2").font={size:24,bold:!0},o.getCell("B2").alignment={vertical:"middle",horizontal:"center"},o.columns=[{key:"empty1",width:5},{key:"key",width:30},{key:"time_start",width:30},{key:"time_end",width:30},{key:"time_total",width:30}],o.addRow(3).values=["","STT","THỜI GIAN V\xc0O","THỜI GIAN RA","TỔNG SỐ GIỜ"],o.getRow(3).font={bold:!0,size:12,color:{argb:"ffffff"}},o.getRow(3).alignment={vertical:"middle",horizontal:"center"};let a=o.getRow(3);for(let e=2;e<=7;e++)a.getCell(e).border={bottom:{style:"thin"},top:{style:"thin"},right:{style:"thin"},left:{style:"thin"}},a.getCell(e).fill={type:"pattern",pattern:"solid",fgColor:{argb:"1BA49D"}};t.reduce((e,t,r)=>{o.addRow({empty1:"",...t});let a=o.getRow(r+4);for(let e=2;e<=7;e++)a.getCell(e).border={bottom:{style:"thin"},top:{style:"thin"},right:{style:"thin"},left:{style:"thin"}},a.getCell(e).font={size:12};return e},{});let s=await r.xlsx.writeBuffer(),n=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,$.saveAs)(n,`B\xe1o c\xe1o chấm c\xf4ng.xlsx`)}catch(e){console.log(e)}}var T=r(16523);function O(){let e=[{label:"Excel",key:"excel",icon:o.jsx(j.ugd,{})}],{RangePicker:t}=m.default,[r,a]=(0,s.useState)(25),[i,c]=(0,s.useState)(new Date(new Date().getFullYear(),0,1).getTime()),[u,p]=(0,s.useState)(new Date(new Date().getFullYear()+1,0,1).getTime()),[g,w]=(0,s.useState)({user_id:void 0,group:void 0}),[S,P]=(0,s.useState)([]),[$,O]=(0,s.useState)([]),{datas:E}=(0,l.v9)(e=>e.get_group_user),{datas:Z}=(0,l.v9)(e=>e.get_filter_user),{datas:q}=(0,l.v9)(e=>e.get_timekeepings),[I,B]=(0,s.useState)([]),z=async()=>{let e=await d.Z.getTimeKeepingPerson({user_id:g.user_id??"",start_time:i,end_time:u}),t=Z.find(e=>e.user_id===g?.user_id);N(t?.first_name+" "+t?.last_name,e)},A=e=>{B(q?.filter(t=>String(t.user_info.first_name+" "+t.user_info.last_name+" "+t.time_start+" "+t.time_end+" "+t.timekeeping_id).toLowerCase().includes(e.toLowerCase())))},D=(0,l.I0)();return(0,C.useSearchParams)(),(0,o.jsxs)("div",{className:"",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[o.jsx(h.Z,{defaultValue:r,style:{width:83},onChange:e=>a(e),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"Tất cả"}]}),o.jsx(f.Z,{menu:{items:e,onClick:e=>{"excel"===e.key&&z()}},children:(0,o.jsxs)(n.ZP,{children:[o.jsx(b.Z,{children:"Xuất ra"}),o.jsx(T.Ix0,{})]})}),o.jsx(t,{className:"sm:w-auto w-full",picker:"date",value:[k()(i),k()(u)],onChange:(e,t)=>{c(new Date(t[0]).getTime()),p(new Date(t[1]).getTime())}})]}),(0,o.jsxs)("div",{className:"flex gap-2 items-center",children:[o.jsx(h.Z,{placeholder:"Ph\xf2ng ban",style:{minWidth:120,flex:"1 1 0%"},onChange:e=>{""!==e?(w({...g,group:e}),D((0,_.l)({group:e}))):(w({...g,group:void 0}),D((0,_.l)({})))},showSearch:!0,allowClear:!0,filterOption:(e,t)=>(Array.isArray(t?.label)?t.label.join(""):t?.label??"").toLowerCase().includes(e.toLowerCase()),options:S}),o.jsx(h.Z,{placeholder:"Nh\xe2n vi\xean",style:{minWidth:120,flex:"1 1 0%"},onChange:e=>{""!==e?w({...g,user_id:e}):w({...g,user_id:void 0})},showSearch:!0,allowClear:!0,filterOption:(e,t)=>(Array.isArray(t?.label)?t.label.join(""):t?.label??"").toLowerCase().includes(e.toLowerCase()),options:$}),o.jsx(y.Z,{onChange:e=>{A(e.target.value)},placeholder:"T\xecm kiếm",style:{width:200}})]})]}),o.jsx("div",{className:"w-full overflow-auto",children:o.jsx("div",{className:"min-w-fit",children:o.jsx(v.Z,{columns:[{title:"#",className:"text-xs",dataIndex:"timekeeping_id",render:(e,t,r)=>o.jsx("div",{className:"flex flex-col gap-1 ",children:(0,o.jsxs)("strong",{className:"flex gap-2 items-center",children:["#",r+1]})}),sorter:(e,t)=>e.timekeeping_id.localeCompare(t.timekeeping_id)},{title:"Họ v\xe0 t\xean",className:"text-xs",dataIndex:"",render:(e,t)=>(0,o.jsxs)(o.Fragment,{children:[t?.user_info?.first_name," ",t?.user_info?.last_name]}),sorter:(e,t)=>(e?.user_info?.first_name??""+e?.user_info?.last_name).localeCompare(t?.user_info?.first_name??""+t?.user_info?.last_name)},{title:"Thời gian v\xe0o",className:"text-xs",dataIndex:"time_start",render:e=>o.jsx(o.Fragment,{children:new Date(e)?.toLocaleString("vi-VN",{timeZone:"UTC",hour12:!1})}),sorter:(e,t)=>e.time_start.toDateString().localeCompare(t.time_start.toDateString())},{title:"Thời gian ra",className:"text-xs",dataIndex:"time_end",render:(e,t)=>o.jsx(o.Fragment,{children:t.completed&&new Date(e)?.toLocaleString("vi-VN",{timeZone:"UTC",hour12:!1})}),sorter:(e,t)=>e.time_end.toDateString().localeCompare(t.time_end.toDateString())},{title:"Trạng th\xe1i",className:"text-xs",dataIndex:"completed",render:e=>o.jsx(o.Fragment,{children:e?o.jsx(x.Z,{color:"success",children:"Đ\xe3 ho\xe0n th\xe0nh"}):o.jsx(x.Z,{color:"processing",children:"Đang l\xe0m"})})}],dataSource:I,scroll:{x:"max-content"},pagination:{pageSize:r,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`},showSorterTooltip:{target:"sorter-icon"}})})})]})}var E=r(67552);function Z(){let e=(0,E.Z)(["admin-top","user","user-edit"]);return(0,o.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[e&&o.jsx("div",{className:"rounded-md",children:o.jsx(g,{})}),o.jsx("div",{className:"rounded-md",children:o.jsx(O,{})})]})}function q(){(0,l.I0)();let e=(0,E.Z)(["admin-top","user","user-read"]);return o.jsx("div",{className:"p-4",children:e?o.jsx(Z,{}):o.jsx(a.Z,{})})}},49509:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var o=r(97247),a=r(82547),s=r(77951);function n(){return o.jsx(a.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:o.jsx(s.ZP,{type:"primary",children:"Quay lại"})})}r(28964)},72876:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\timekeeping\error.tsx#default`)},21868:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,metadata:()=>a});var o=r(72051);let a={title:"Chấm c\xf4ng"};function s({children:e}){return o.jsx(o.Fragment,{children:e})}},21187:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\timekeeping\page.tsx#default`)},28204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s}),r(72051);var o=r(54564);let a={size:{width:32,height:32},contentType:"image/png"};async function s(e){let{__metadata_id__:t,...r}=e.params,s=(0,o.fillMetadataSegment)(".",r,"icon"),{generateImageMetadata:n}=a;function l(e,t){let r={alt:e.alt,type:e.contentType||"image/png",url:s+(t?"/"+t:"")+"?4a97cfd375538d02"},{size:o}=e;return o&&(r.sizes=o.width+"x"+o.height),r}return n?(await n({params:r})).map((e,t)=>{let r=(e.id||t)+"";return l(e,r)}):[l(a,"")]}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9379,4671,4564,2703,2602,5090,7504,6180,8188],()=>r(77070));module.exports=o})();