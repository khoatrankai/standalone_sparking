exports.id=352,exports.ids=[352],exports.modules={58359:()=>{},40948:()=>{},11174:(e,s,t)=>{Promise.resolve().then(t.bind(t,44021))},44021:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(97247),r=t(87467);function l({error:e,reset:s}){return a.jsx("div",{children:a.jsx(r.Z,{handleBtn:s,value:e.message})})}},40573:(e,s,t)=>{"use strict";let a;t.d(s,{default:()=>em});var r=t(97247),l=t(28964),n=t(28852),i=t(85426),c=t(87597),d=t(45496),o=t(8754),m=t(40677);let x=o.fC,u=l.forwardRef(({className:e,...s},t)=>r.jsx(o.aV,{ref:t,className:(0,m.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));u.displayName=o.aV.displayName;let h=l.forwardRef(({className:e,...s},t)=>r.jsx(o.xz,{ref:t,className:(0,m.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));h.displayName=o.xz.displayName;let p=l.forwardRef(({className:e,...s},t)=>r.jsx(o.VY,{ref:t,className:(0,m.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));p.displayName=o.VY.displayName;var f=t(57989),g=t(49256),j=t(37073),N=t(59939),y=t(83473),b=t(34178);function v({open:e,onOpenChange:s,users:t,chats:a,currentUser:n,onChatCreated:c}){let{projectID:o}=(0,b.useParams)(),[m,x]=(0,l.useState)(""),[u,h]=(0,l.useState)(!1),p=a.map(e=>e.user_one).concat(a.map(e=>e.user_two))??[],f=t.filter(e=>e.user_id!==n&&!p.includes(e.user_id)&&(e.first_name+" "+e.last_name).toLowerCase().includes(m.toLowerCase())),v=async e=>{h(!0);try{let t=await y.Z.createChat({user_two:e.user_id,project:o??""});if(201===t.statusCode){let e=await t.data;c({...e,type:"direct"}),s(!1),x("")}}catch(e){console.error("Failed to create chat:",e)}finally{h(!1)}},w=e=>(e.first_name+" "+e.last_name).split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return r.jsx(N.Vq,{open:e,onOpenChange:s,children:(0,r.jsxs)(N.cZ,{className:"sm:max-w-md",children:[r.jsx(N.fK,{children:(0,r.jsxs)(N.$N,{className:"flex items-center",children:[r.jsx(j.Z,{className:"w-5 h-5 mr-2"}),"Start New Conversation"]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(i.I,{placeholder:"Search users...",value:m,onChange:e=>x(e.target.value),className:"pl-10"})]}),(0,r.jsxs)("div",{className:"max-h-60 overflow-y-auto space-y-2",children:[f.map(e=>(0,r.jsxs)("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>v(e),children:[r.jsx(d.qE,{className:"w-10 h-10 mr-3",children:r.jsx(d.Q5,{className:"bg-green-100 text-green-600",children:w(e)})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium text-sm",children:e.first_name+" "+e.last_name}),e.email&&r.jsx("p",{className:"text-xs text-gray-600",children:e.email})]}),u&&r.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})]},e.user_id)),0===f.length&&m&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{className:"text-sm",children:"No users found"})}),0===f.length&&!m&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{className:"text-sm",children:"Start typing to search for users"})})]})]})]})})}var w=t(44211),C=t(37013);function _({open:e,onOpenChange:s,users:t,currentUser:a,onGroupCreated:o}){let{projectID:m}=(0,b.useParams)(),[x,u]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[_,k]=(0,l.useState)([]),[S,Z]=(0,l.useState)(!1),z=t.filter(e=>e.user_id!==a&&(e.first_name+" "+e.last_name).toLowerCase().includes(j.toLowerCase())&&!_.find(s=>s.user_id===e.user_id)),U=e=>{k(s=>[...s,e]),v("")},D=e=>{k(s=>s.filter(s=>s.user_id!==e))},T=async()=>{if(x.trim()&&0!==_.length){Z(!0);try{let e=await y.Z.createChatGroup({name:x,description:h,members:_.map(e=>e.user_id),project:m});if(201===e.statusCode){let t=e?.data;o({...t,type:"group"}),s(!1),u(""),p(""),k([]),v("")}}catch(e){console.error("Failed to create group:",e)}finally{Z(!1)}}},R=e=>(e.first_name+" "+e.last_name).split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return r.jsx(N.Vq,{open:e,onOpenChange:s,children:(0,r.jsxs)(N.cZ,{className:"sm:max-w-lg",children:[r.jsx(N.fK,{children:(0,r.jsxs)(N.$N,{className:"flex items-center",children:[r.jsx(f.Z,{className:"w-5 h-5 mr-2"}),"Create New Group"]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Group Name"}),r.jsx(i.I,{placeholder:"Enter group name...",value:x,onChange:e=>u(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Description (Optional)"}),r.jsx(w.g,{placeholder:"Enter group description...",value:h,onChange:e=>p(e.target.value),rows:2})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Add Members"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(i.I,{placeholder:"Search users...",value:j,onChange:e=>v(e.target.value),className:"pl-10"})]})]}),_.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"text-sm font-medium",children:["Selected Members (",_.length,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(e=>(0,r.jsxs)(c.C,{variant:"secondary",className:"flex items-center gap-1",children:[e.first_name+" "+e.last_name,r.jsx(C.Z,{className:"w-3 h-3 cursor-pointer hover:text-red-500",onClick:()=>D(e.user_id)})]},e.user_id))})]}),(0,r.jsxs)("div",{className:"max-h-40 overflow-y-auto space-y-2",children:[z.map(e=>(0,r.jsxs)("div",{className:"flex items-center p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>U(e),children:[r.jsx(d.qE,{className:"w-8 h-8 mr-3",children:r.jsx(d.Q5,{className:"bg-purple-100 text-purple-600 text-xs",children:R(e)})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium text-sm",children:e.first_name+" "+e.last_name}),e.email&&r.jsx("p",{className:"text-xs text-gray-600",children:e.email})]})]},e.user_id)),0===z.length&&j&&r.jsx("div",{className:"text-center py-4 text-gray-500",children:r.jsx("p",{className:"text-sm",children:"No users found"})})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(n.zx,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,r.jsxs)(n.zx,{onClick:T,disabled:!x.trim()||0===_.length||S,children:[S?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):null,"Create Group"]})]})]})]})})}function k({chats:e,users:s,selectedChat:t,onSelectChat:a,onNewChat:o,currentUser:m}){let[N,y]=(0,l.useState)(""),[b,w]=(0,l.useState)(!1),[C,k]=(0,l.useState)(!1),S=e.filter(e=>"direct"===e.type),Z=e.filter(e=>"group"===e.type),z=S.filter(e=>e.name_one.toLowerCase().includes(N.toLowerCase())||e.name_two.toLowerCase().includes(N.toLowerCase())),U=Z.filter(e=>e.name.toLowerCase().includes(N.toLowerCase())),D=e=>"direct"===e.type?(console.log(m),e.user_one===m?e.name_two:e.name_one):e.name,T=e=>D(e).split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),R=e=>{let s=new Date(e),t=new Date,a=String(s.getUTCHours()).padStart(2,"0"),r=String(s.getUTCMinutes()).padStart(2,"0");if(s.getUTCDate()!==t.getUTCDate()||s.getUTCMonth()!==t.getUTCMonth()||s.getUTCFullYear()!==t.getUTCFullYear()){let e=String(s.getUTCDate()).padStart(2,"0"),t=String(s.getUTCMonth()+1).padStart(2,"0"),l=s.getUTCFullYear();return`${e}-${t}-${l} ${a}:${r}`}return`${a}:${r}`},$=({chat:e})=>(0,r.jsxs)("div",{className:`flex items-center p-3 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors ${t?.id===e.id?"bg-blue-50 border-l-4 border-blue-500":""}`,onClick:()=>a(e),children:[r.jsx(d.qE,{className:"w-10 h-10 mr-3 flex-shrink-0",children:r.jsx(d.Q5,{className:"bg-blue-100 text-blue-600",children:T(e)})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("h3",{className:"font-medium truncate text-sm pr-2",children:D(e)}),e.contents?.[0]?.content&&r.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:R(e?.contents?.[0]?.created_at)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[e.contents?.[0]?.content&&r.jsx("p",{className:"text-xs text-gray-600 truncate flex-1 pr-2",children:e.contents?.[0]?.content}),"group"===e.type&&(0,r.jsxs)(c.C,{variant:"secondary",className:"text-xs flex-shrink-0",children:[r.jsx(f.Z,{className:"w-3 h-3 mr-1"}),e.members?.length||0]})]})]})]});return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"p-4 border-b",children:[r.jsx("h1",{className:"text-xl font-bold mb-4",children:"Messages"}),(0,r.jsxs)("div",{className:"relative mb-3",children:[r.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(i.I,{placeholder:"Search conversations...",value:N,onChange:e=>y(e.target.value),className:"pl-10"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(n.zx,{size:"sm",className:"flex-1 bg-blue-500",onClick:()=>w(!0),children:[r.jsx(j.Z,{className:"w-4 h-4 mr-1 text-white"}),"New Chat"]}),(0,r.jsxs)(n.zx,{size:"sm",variant:"outline",className:"flex-1 bg-transparent",onClick:()=>k(!0),children:[r.jsx(f.Z,{className:"w-4 h-4 mr-1"}),"New Group"]})]})]}),(0,r.jsxs)(x,{defaultValue:"all",className:"flex-1 flex flex-col",children:[(0,r.jsxs)(u,{className:"grid w-auto grid-cols-3 mx-4 mt-2",children:[r.jsx(h,{value:"all",className:"text-xs",children:"All"}),(0,r.jsxs)(h,{value:"direct",className:"text-xs",children:[r.jsx(j.Z,{className:"w-3 h-3 mr-1"}),"Direct"]}),(0,r.jsxs)(h,{value:"groups",className:"text-xs",children:[r.jsx(f.Z,{className:"w-3 h-3 mr-1"}),"Groups"]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[r.jsx(p,{value:"all",className:"mt-0",children:(0,r.jsxs)("div",{className:"space-y-1 p-2",children:[[...z,...U].sort((e,s)=>{let t=e?.contents?.[0]?.created_at?new Date(e?.contents?.[0]?.created_at).getTime():e.created_at?new Date(e.created_at).getTime():0;return(s?.contents?.[0]?.created_at?new Date(s?.contents?.[0]?.created_at).getTime():s.created_at?new Date(s.created_at).getTime():0)-t}).map(e=>r.jsx($,{chat:e},e.id)),0==[...z,...U].length&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{className:"text-sm",children:"No conversations found"})})]})}),r.jsx(p,{value:"direct",className:"mt-0",children:(0,r.jsxs)("div",{className:"space-y-1 p-2",children:[z.map(e=>r.jsx($,{chat:e},e.id)),0===z.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"No direct messages"}),r.jsx(n.zx,{size:"sm",variant:"outline",className:"mt-2 bg-transparent",onClick:()=>w(!0),children:"Start a conversation"})]})]})}),r.jsx(p,{value:"groups",className:"mt-0",children:(0,r.jsxs)("div",{className:"space-y-1 p-2",children:[U.map(e=>r.jsx($,{chat:e},e.id)),0===U.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"No group chats"}),r.jsx(n.zx,{size:"sm",variant:"outline",className:"mt-2 bg-transparent",onClick:()=>k(!0),children:"Create a group"})]})]})})]})]}),r.jsx(v,{open:b,onOpenChange:w,users:s,chats:e.filter(e=>"direct"===e.type),currentUser:m,onChatCreated:o}),r.jsx(_,{open:C,onOpenChange:k,users:s,currentUser:m,onGroupCreated:o})]})}var S=t(80114),Z=t(67636),z=t(48799),U=t(44161);let D=S.fC,T=S.xz;S.ZA,S.Uv,S.Tr,S.Ee,l.forwardRef(({className:e,inset:s,children:t,...a},l)=>(0,r.jsxs)(S.fF,{ref:l,className:(0,m.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",e),...a,children:[t,r.jsx(Z.Z,{className:"ml-auto h-4 w-4"})]})).displayName=S.fF.displayName,l.forwardRef(({className:e,...s},t)=>r.jsx(S.tu,{ref:t,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})).displayName=S.tu.displayName;let R=l.forwardRef(({className:e,sideOffset:s=4,...t},a)=>r.jsx(S.Uv,{children:r.jsx(S.VY,{ref:a,sideOffset:s,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));R.displayName=S.VY.displayName;let $=l.forwardRef(({className:e,inset:s,...t},a)=>r.jsx(S.ck,{ref:a,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",e),...t}));$.displayName=S.ck.displayName,l.forwardRef(({className:e,children:s,checked:t,...a},l)=>(0,r.jsxs)(S.oC,{ref:l,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(S.wU,{children:r.jsx(z.Z,{className:"h-4 w-4"})})}),s]})).displayName=S.oC.displayName,l.forwardRef(({className:e,children:s,...t},a)=>(0,r.jsxs)(S.Rk,{ref:a,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(S.wU,{children:r.jsx(U.Z,{className:"h-2 w-2 fill-current"})})}),s]})).displayName=S.Rk.displayName,l.forwardRef(({className:e,inset:s,...t},a)=>r.jsx(S.__,{ref:a,className:(0,m.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...t})).displayName=S.__.displayName;let F=l.forwardRef(({className:e,...s},t)=>r.jsx(S.Z0,{ref:t,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));F.displayName=S.Z0.displayName;var A=t(85767),M=t(94002),E=t(17316),G=t(53288),O=t(33841),Y=t(19400),L=t(3632),V=t(1669),q=t(93763),I=t(80020);function P({open:e,onOpenChange:s,chat:t,users:a,currentUser:o,onChatUpdate:m,isHead:x}){let[u,h]=(0,l.useState)([]),[p,j]=(0,l.useState)(""),[y,b]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),C=async()=>{try{let e=await fetch(`/api/chat-groups/${t.id}/members`),s=await e.json();h(s)}catch(e){console.error("Failed to fetch members:",e)}},_=async e=>{w(!0);try{(await fetch(`/api/chat-groups/${t.id}/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})})).ok&&(C(),"group"===t.type&&m({...t}))}catch(e){console.error("Failed to add member:",e)}finally{w(!1)}},k=async e=>{w(!0);try{(await fetch(`/api/chat-groups/${t.id}/members/${e}`,{method:"DELETE"})).ok&&(C(),"group"===t.type&&m({...t}))}catch(e){console.error("Failed to remove member:",e)}finally{w(!1)}},S=a.filter(e=>e.user_id!==o&&!u.find(s=>s.user===e.user_id)&&(e.first_name+" "+e.last_name).toLowerCase().includes(p.toLowerCase())),Z=u.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())),z=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return"group"!==t.type?null:r.jsx(N.Vq,{open:e,onOpenChange:s,children:(0,r.jsxs)(N.cZ,{className:"sm:max-w-lg",children:[r.jsx(N.fK,{children:(0,r.jsxs)(N.$N,{className:"flex items-center",children:[r.jsx(f.Z,{className:"w-5 h-5 mr-2"}),x?"Manage Members":"Group Members"]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(i.I,{placeholder:"Search members...",value:p,onChange:e=>j(e.target.value),className:"pl-10"})]}),x&&(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-sm font-medium",children:["Members (",u.length,")"]}),(0,r.jsxs)(n.zx,{size:"sm",variant:"outline",onClick:()=>b(!y),children:[r.jsx(G.Z,{className:"w-4 h-4 mr-1"}),"Add Members"]})]}),y&&x&&(0,r.jsxs)("div",{className:"border rounded-lg p-3 space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium",children:"Add New Members"}),(0,r.jsxs)("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[S.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.qE,{className:"w-8 h-8 mr-2",children:r.jsx(d.Q5,{className:"bg-green-100 text-green-600 text-xs",children:z(e.first_name+" "+e.last_name)})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:e.first_name+" "+e.last_name}),e.email&&r.jsx("p",{className:"text-xs text-gray-600",children:e.email})]})]}),r.jsx(n.zx,{size:"sm",variant:"outline",onClick:()=>_(e.user_id),disabled:v,children:"Add"})]},e.user_id)),0===S.length&&r.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"No users available to add"})]})]}),r.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:Z.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.qE,{className:"w-10 h-10 mr-3",children:r.jsx(d.Q5,{className:"bg-blue-100 text-blue-600",children:z(e.name)})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-sm font-medium",children:e.name}),"admin"===e.role&&r.jsx(q.Z,{className:"w-4 h-4 ml-2 text-yellow-500"}),e.user===o&&r.jsx(c.C,{variant:"secondary",className:"ml-2 text-xs",children:"You"})]}),r.jsx("p",{className:"text-xs text-gray-600 capitalize",children:e.role})]})]}),x&&e.user!==o&&e.user!==t.head&&r.jsx(n.zx,{size:"sm",variant:"outline",onClick:()=>k(e.user),disabled:v,className:"text-red-600 hover:text-red-700",children:r.jsx(I.Z,{className:"w-4 h-4"})})]},e.id))})]})]})})}function W({open:e,onOpenChange:s,chat:t,onChatUpdate:a,isHead:c}){let[d,o]=(0,l.useState)("group"===t.type?t.name:""),[m,x]=(0,l.useState)("group"===t.type?t.description:""),[u,h]=(0,l.useState)(!1),p=async()=>{if(d.trim()&&"group"===t.type){h(!0);try{let e=await fetch(`/api/chat-groups/${t.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,description:m})});if(e.ok){let t=await e.json();a(t),s(!1)}}catch(e){console.error("Failed to update group settings:",e)}finally{h(!1)}}};return"group"!==t.type?null:r.jsx(N.Vq,{open:e,onOpenChange:s,children:(0,r.jsxs)(N.cZ,{className:"sm:max-w-md",children:[r.jsx(N.fK,{children:(0,r.jsxs)(N.$N,{className:"flex items-center",children:[r.jsx(E.Z,{className:"w-5 h-5 mr-2"}),"Group Settings"]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Group Name"}),r.jsx(i.I,{placeholder:"Enter group name...",value:d,onChange:e=>o(e.target.value),disabled:!c})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Description"}),r.jsx(w.g,{placeholder:"Enter group description...",value:m,onChange:e=>x(e.target.value),rows:3,disabled:!c})]}),!c&&r.jsx("div",{className:"text-sm text-gray-500 bg-gray-50 p-3 rounded",children:"Only group administrators can edit these settings."}),c&&(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(n.zx,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,r.jsxs)(n.zx,{onClick:p,disabled:!d.trim()||u,children:[u?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):null,"Update"]})]})]})]})})}function H({open:e,onOpenChange:s,chat:t,currentUser:a,onChatUpdate:c}){let[d,o]=(0,l.useState)("direct"===t.type?t.user_one===a?t.name_one:t.name_two:""),[m,x]=(0,l.useState)("direct"===t.type?t.user_one===a?t.name_two:t.name_one:""),[u,h]=(0,l.useState)(!1),p=async()=>{if(d.trim()&&m.trim()&&"direct"===t.type){h(!0);try{let e=await fetch(`/api/chats/${t.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name_one:t.user_one===a?d:m,name_two:t.user_one===a?m:d})});if(e.ok){let t=await e.json();c(t),s(!1)}}catch(e){console.error("Failed to update names:",e)}finally{h(!1)}}};return"direct"!==t.type?null:r.jsx(N.Vq,{open:e,onOpenChange:s,children:(0,r.jsxs)(N.cZ,{className:"sm:max-w-md",children:[r.jsx(N.fK,{children:(0,r.jsxs)(N.$N,{className:"flex items-center",children:[r.jsx(M.Z,{className:"w-5 h-5 mr-2"}),"Edit Contact Names"]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Your Name"}),r.jsx(i.I,{placeholder:"Enter your display name...",value:d,onChange:e=>o(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Name"}),r.jsx(i.I,{placeholder:"Enter friend's display name...",value:m,onChange:e=>x(e.target.value)})]}),r.jsx("div",{className:"text-sm text-gray-500 bg-gray-50 p-3 rounded",children:"These names are only visible to you and help you identify your contacts."}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(n.zx,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,r.jsxs)(n.zx,{onClick:p,disabled:!d.trim()||!m.trim()||u,children:[u?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):null,"Update Names"]})]})]})]})})}var K=t(48738);t(97294);let Q=()=>{if(!a)throw Error("Socket chưa được khởi tạo!");return a};var B=t(61410),J=t(75003),X=t(6148),ee=t(79438),es=t(69205),et=t(7424),ea=t(24386),er=t(96930),el=t(66903),en=t(999);function ei({link:e,content:s,className:t=""}){let a=e=>{try{let t=e.split("/");return(s??t[t.length-1]).split("?")[0]||"attachment"}catch{return"attachment"}},l=(e,s)=>{switch(e){case"archive":return{icon:X.Z,color:"text-orange-600",bgColor:"bg-orange-100",label:"Archive File",description:".RAR"===s?"WinRAR Archive":"Compressed Archive"};case"executable":return{icon:".APK"===s?ee.Z:es.Z,color:"text-red-600",bgColor:"bg-red-100",label:"Executable File",description:".APK"===s?"Android App":"Software Package"};case"document":return{icon:et.Z,color:"text-green-600",bgColor:"bg-green-100",label:"Document",description:"Document File"};case"audio":return{icon:ea.Z,color:"text-purple-600",bgColor:"bg-purple-100",label:"Audio File",description:"Music/Audio"};case"code":return{icon:er.Z,color:"text-indigo-600",bgColor:"bg-indigo-100",label:"Code File",description:"Source Code"};default:return{icon:el.Z,color:"text-blue-600",bgColor:"bg-blue-100",label:"File",description:"Unknown File Type"}}},n=(e=>{let s=[".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp",".ico",".tiff"],t=[".mp4",".webm",".ogg",".avi",".mov",".wmv",".flv",".mkv",".m4v",".3gp"],a=e.toLowerCase();if(e.includes("cloudinary.com")){if(e.includes("/image/")||s.some(e=>a.includes(e)))return"image";if(e.includes("/video/")||t.some(e=>a.includes(e)))return"video"}return s.some(e=>a.endsWith(e))?"image":t.some(e=>a.endsWith(e))?"video":[".rar",".zip",".7z",".tar",".gz",".bz2",".xz",".tar.gz",".tar.bz2"].some(e=>a.endsWith(e))?"archive":[".exe",".msi",".dmg",".pkg",".deb",".rpm",".appimage",".apk"].some(e=>a.endsWith(e))?"executable":[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".txt",".rtf"].some(e=>a.endsWith(e))?"document":[".mp3",".wav",".flac",".aac",".ogg",".wma",".m4a"].some(e=>a.endsWith(e))?"audio":[".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".cpp",".c",".php",".rb",".go",".rs"].some(e=>a.endsWith(e))?"code":"file"})(e),i=s??a(e),c=(e=>{let t=(s??a(e)).split(".");return t.length>1?`.${t[t.length-1].toUpperCase()}`:""})(e);return e?r.jsx("div",{className:t,children:(()=>{switch(n){case"image":return r.jsx("div",{className:"mt-2 max-w-xs",children:r.jsx(J.Z,{src:e||"/placeholder.svg",alt:"Attachment",className:"max-w-full h-auto max-h-48 object-contain cursor-pointer hover:opacity-90 transition-opacity rounded-lg overflow-hidden border border-gray-200"})});case"video":return r.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border border-gray-200 max-w-xs",children:r.jsx("div",{className:"relative bg-black",children:(0,r.jsxs)("video",{controls:!0,className:"w-full max-h-48 object-contain",preload:"metadata",children:[r.jsx("source",{src:e,type:"video/mp4"}),"Your browser does not support the video tag."]})})});case"audio":return r.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 max-w-xs bg-white",children:(0,r.jsxs)("audio",{controls:!0,className:"w-full",children:[r.jsx("source",{src:e}),"Your browser does not support the audio tag."]})});default:let s=l(n,c),t=s.icon;return(0,r.jsxs)("div",{className:"mt-2 p-3 bg-white rounded-lg border border-gray-200 max-w-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 ${s.bgColor} rounded-lg flex-shrink-0`,children:r.jsx(t,{size:20,className:s.color})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:"font-medium text-gray-900 text-sm truncate",children:i}),c&&r.jsx("span",{className:`px-1.5 py-0.5 ${s.bgColor} ${s.color} text-xs font-medium rounded`,children:c})]}),r.jsx("div",{className:"text-xs text-gray-500 mb-2",children:s.description}),(0,r.jsxs)("a",{href:e,download:i,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 transition-colors",children:[r.jsx(en.Z,{size:12}),"Tải về"]})]})]}),"executable"===n&&r.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs",children:(0,r.jsxs)("div",{className:"flex items-center gap-1 text-yellow-800",children:[r.jsx("span",{className:"font-medium",children:"⚠️ Cảnh b\xe1o:"}),r.jsx("span",{children:"H\xe3y cẩn thận khi chạy file thực thi từ nguồn kh\xf4ng r\xf5"})]})}),".RAR"===c&&r.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:(0,r.jsxs)("div",{className:"text-blue-800",children:[r.jsx("span",{className:"font-medium",children:"\uD83D\uDCA1 Gợi \xfd:"}),r.jsx("span",{className:"ml-1",children:"Cần WinRAR hoặc 7-Zip để giải n\xe9n"})]})})]})}})()}):null}function ec({chat:e,currentUser:s,users:t,onChatUpdate:a}){let[o,m]=(0,l.useState)([]);(0,l.useRef)(null);let[x,u]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[N,b]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[C,_]=(0,l.useState)(!1),[k,S]=(0,l.useState)(!1),Z=(0,l.useRef)(null),z=async t=>{if(t.preventDefault(),x.trim()&&!N){b(!0);try{let t=Q(),a={content:x,user:s,chat:e.id},r={content:x,user:s,chat_group:e.id},l="direct"===e.type?await y.Z.createContentChats((0,K.Z)(a)):await y.Z.createContentGroupChats((0,K.Z)(r));201===l.statusCode&&("direct"===e.type&&t.emit("notify_new_message",{chat:e.id,user:e.user_two,data:l.data}),"group"===e.type&&t.emit("notify_new_message_group",{chat_group:e.id,head:e.head,members:e.members?.map(e=>e.user),data:l.data}),u(""))}catch(e){console.error("Failed to send message:",e)}finally{b(!1)}}},U=async()=>{try{let s=Q(),t="direct"===e.type?await y.Z.deleteContent([h]):await y.Z.deleteContentGroup([h]);200===t.statusCode&&("direct"===e.type&&s.emit("notify_delete_message",{chat:e.id,user:e.user_two,data:h}),"group"===e.type&&s.emit("notify_delete_message_group",{chat_group:e.id,head:e.head,members:e.members?.map(e=>e.user),data:h})),p("")}catch(e){console.error("Failed to delete message:",e)}},q=async()=>{let t=Q();if("group"===e.type)try{let a=e.head===s,r=a?await y.Z.deleteChatGroup([g]):await y.Z.deleteMemberChatGroup(g);r?.statusCode===200&&(a?t.emit("notify_delete_chat_group",{chat_group:e.id,head:e.head,members:e.members?.map(e=>e.user)}):t.emit("notify_leave_chat_group",{chat_group:e.id})),j("")}catch(e){console.error("Failed to leave/delete group:",e)}},I=()=>"direct"===e.type?e.user_one===s?e.name_two:e.name_one:e.name,J=e=>{let s=new Date(e),t=new Date,a=String(s.getUTCHours()).padStart(2,"0"),r=String(s.getUTCMinutes()).padStart(2,"0");if(s.getUTCDate()!==t.getUTCDate()||s.getUTCMonth()!==t.getUTCMonth()||s.getUTCFullYear()!==t.getUTCFullYear()){let e=String(s.getUTCDate()).padStart(2,"0"),t=String(s.getUTCMonth()+1).padStart(2,"0"),l=s.getUTCFullYear();return`${e}-${t}-${l} ${a}:${r}`}return`${a}:${r}`},X=e=>{let s=new Date,t=new Date(e);if(t.toDateString()===s.toDateString())return"Today";let a=new Date(s);return(a.setDate(a.getDate()-1),t.toDateString()===a.toDateString())?"Yesterday":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})},ee="group"===e.type&&e.head===s,es=(0,l.useRef)(null),et=async t=>{let a=t.target.files?.[0];if(a)try{let t=Q(),r={link:a,content:a.name,user:s,chat:e.id},l={link:a,user:s,content:a.name,chat_group:e.id},n="direct"===e.type?await y.Z.createContentChats((0,K.Z)(r)):await y.Z.createContentGroupChats((0,K.Z)(l));201===n.statusCode&&("direct"===e.type&&t.emit("notify_new_message",{chat:e.id,user:e.user_two,data:n.data}),"group"===e.type&&t.emit("notify_new_message_group",{chat_group:e.id,head:e.head,members:e.members?.map(e=>e.user),data:n.data}),u(""))}catch(e){console.error("Failed to send message:",e)}finally{b(!1)}};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.qE,{className:"w-10 h-10 mr-3",children:r.jsx(d.Q5,{children:I().split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"font-semibold",children:I()}),"group"===e.type&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(f.Z,{className:"w-4 h-4 mr-1"}),e?.members?.length||0," members"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["group"===e.type&&r.jsx(c.C,{variant:"secondary",children:"Group"}),(0,r.jsxs)(D,{children:[r.jsx(T,{asChild:!0,children:r.jsx(n.zx,{variant:"ghost",size:"sm",children:r.jsx(A.Z,{className:"w-4 h-4"})})}),r.jsx(R,{align:"end",children:"direct"===e.type?r.jsx(r.Fragment,{children:(0,r.jsxs)($,{onClick:()=>S(!0),children:[r.jsx(M.Z,{className:"w-4 h-4 mr-2"}),"Edit Names"]})}):(0,r.jsxs)(r.Fragment,{children:[ee&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)($,{onClick:()=>w(!0),children:[r.jsx(E.Z,{className:"w-4 h-4 mr-2"}),"Group Settings"]}),(0,r.jsxs)($,{onClick:()=>_(!0),children:[r.jsx(G.Z,{className:"w-4 h-4 mr-2"}),"Manage Members"]}),r.jsx(F,{}),(0,r.jsxs)($,{onClick:()=>j(e.id),className:"text-red-600",children:[r.jsx(O.Z,{className:"w-4 h-4 mr-2"}),"Delete Group"]})]}),!ee&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)($,{onClick:()=>_(!0),children:[r.jsx(f.Z,{className:"w-4 h-4 mr-2"}),"View Members"]}),r.jsx(F,{}),(0,r.jsxs)($,{onClick:()=>j(e.id),className:"text-red-600",children:[r.jsx(Y.Z,{className:"w-4 h-4 mr-2"}),"Leave Group"]})]})]})})]})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[0===o.length?r.jsx("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center text-gray-500",children:[r.jsx("p",{className:"text-lg font-medium",children:"No messages yet"}),r.jsx("p",{className:"text-sm",children:"Start the conversation!"})]})}):o.map((a,l)=>{let n=0===l||X(a.created_at)!==X(o[l-1].created_at);return(0,r.jsxs)("div",{children:[n&&r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("span",{className:"bg-white px-3 py-1 rounded-full text-xs text-gray-600 shadow-sm",children:X(a.created_at)})}),r.jsx("div",{className:`flex ${a.user===s?"justify-end":"justify-start"}`,children:(0,r.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${a.user===s?"bg-blue-500 text-white rounded-br-sm":"bg-white text-gray-800 shadow-sm rounded-bl-sm"}`,children:["group"===e.type&&a.user!==s&&r.jsx("div",{className:"flex justify-between",children:r.jsx("div",{className:"text-xs font-medium mb-1 opacity-70 flex items-center",children:e.members?.find(e=>e.user===a.user)?.name??t?.find(e=>e.user_id===a.user)?.first_name+" "+t?.find(e=>e.user_id===a.user)?.last_name??"ADMIN"})}),"group"===e.type&&a.user===s&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("div",{className:"text-xs font-medium mb-1 opacity-70 flex items-center",children:e.members?.find(e=>e.user===a.user)?.name??t?.find(e=>e.user_id===a.user)?.first_name+" "+t?.find(e=>e.user_id===a.user)?.last_name??"ADMIN"}),r.jsx(O.Z,{className:"ml-2 cursor-pointer w-4 h-4",onClick:()=>p(a.id)})]}),"group"!==e.type&&a.user===s&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("div",{className:"text-xs font-medium mb-1 opacity-70 flex items-center",children:a.user===e.user_one?e.name_one:e.name_two}),r.jsx(O.Z,{className:"ml-2 cursor-pointer w-4 h-4",onClick:()=>p(a.id)})]}),"group"!==e.type&&a.user!==s&&r.jsx("div",{className:"text-xs font-medium mb-1 opacity-70",children:a.user===e.user_one?e.name_one:e.name_two}),!a.link&&r.jsx("div",{className:"break-words",children:a.content}),a.link&&r.jsx(ei,{content:a.content,link:a.link}),r.jsx("div",{className:`text-xs mt-1 ${a.user===s?"text-blue-100":"text-gray-500"}`,children:J(a.created_at)})]})})]},a.id)}),r.jsx("div",{ref:Z})]}),r.jsx("div",{className:"p-4 bg-white border-t",children:(0,r.jsxs)("form",{onSubmit:z,className:"flex items-center space-x-2",children:[r.jsx(n.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>{es.current?.click()},children:r.jsx(L.Z,{className:"w-4 h-4"})}),r.jsx("input",{type:"file",ref:es,className:"hidden",onChange:et}),r.jsx(i.I,{value:x,onChange:e=>u(e.target.value),placeholder:"Type a message...",className:"flex-1",disabled:N}),r.jsx(n.zx,{type:"submit",disabled:N||!x.trim(),children:r.jsx(V.Z,{className:"w-4 h-4"})})]})}),"group"===e.type&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(W,{open:v,onOpenChange:w,chat:e,onChatUpdate:a,isHead:ee}),r.jsx(P,{open:C,onOpenChange:_,chat:e,users:t,currentUser:s,onChatUpdate:a,isHead:ee})]}),"direct"===e.type&&r.jsx(H,{open:k,onOpenChange:S,chat:e,currentUser:s,onChatUpdate:a}),r.jsx(B.Z,{open:""!==h,title:"X\xf3a dữ liệu",onOk:U,onCancel:()=>{p("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"}),r.jsx(B.Z,{open:""!==g,title:"group"===e.type?e.head===s?"X\xf3a nh\xf3m chat":"Rời nh\xf3m chat":"Rời nh\xf3m ch\xe1t",onOk:q,onCancel:()=>{j("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})}var ed=t(55757),eo=t(23102);function em(){let{projectID:e}=(0,b.useParams)(),[s,t]=(0,l.useState)(null),[a,n]=(0,l.useState)([]),[i,c]=(0,l.useState)([]),{datas:d}=(0,eo.v9)(e=>e.get_profile),o=e=>{n(s=>s.map(s=>s.id===e.id?e:s)),s?.id===e.id&&t(e)};return(0,r.jsxs)("div",{className:"flex h-[calc(100vh-64px)] bg-gray-100",children:[r.jsx("div",{className:"w-96 border-r bg-white",children:r.jsx(k,{chats:a,users:i,selectedChat:s,onSelectChat:t,onNewChat:e=>{let s=Q();"direct"===e.type&&s.emit("notify_new_chat",{user:e.user_two}),"group"===e.type&&s.emit("notify_new_chat_group",{user:e.members?.map(e=>e.user)}),n(s=>[e,...s]),t(e)},onChatUpdate:o,onChatDelete:e=>{n(s=>s.filter(s=>s.id!==e)),s?.id===e&&t(null)},currentUser:d?.user_id})}),r.jsx("div",{className:"flex-1",children:s?r.jsx(ec,{chat:s,currentUser:d?.user_id,users:i,onChatUpdate:o}):r.jsx("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)(ed.Zb,{className:"p-8 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Welcome to Chat"}),r.jsx("p",{className:"text-gray-600",children:"Select a conversation to start chatting"})]})})})]})}},45496:(e,s,t)=>{"use strict";t.d(s,{F$:()=>c,Q5:()=>d,qE:()=>i});var a=t(97247),r=t(28964),l=t(38759),n=t(40677);let i=r.forwardRef(({className:e,...s},t)=>a.jsx(l.fC,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));i.displayName=l.fC.displayName;let c=r.forwardRef(({className:e,...s},t)=>a.jsx(l.Ee,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",e),...s}));c.displayName=l.Ee.displayName;let d=r.forwardRef(({className:e,...s},t)=>a.jsx(l.NY,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));d.displayName=l.NY.displayName},59939:(e,s,t)=>{"use strict";t.d(s,{$N:()=>h,Be:()=>p,Vq:()=>c,cN:()=>u,cZ:()=>m,fK:()=>x});var a=t(97247),r=t(28964),l=t(50400),n=t(37013),i=t(40677);let c=l.fC;l.xz;let d=l.h_;l.x8;let o=r.forwardRef(({className:e,...s},t)=>a.jsx(l.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));o.displayName=l.aV.displayName;let m=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(d,{children:[a.jsx(o,{}),(0,a.jsxs)(l.VY,{ref:r,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(n.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=l.VY.displayName;let x=({className:e,...s})=>a.jsx("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});x.displayName="DialogHeader";let u=({className:e,...s})=>a.jsx("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});u.displayName="DialogFooter";let h=r.forwardRef(({className:e,...s},t)=>a.jsx(l.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));h.displayName=l.Dx.displayName;let p=r.forwardRef(({className:e,...s},t)=>a.jsx(l.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));p.displayName=l.dk.displayName},85426:(e,s,t)=>{"use strict";t.d(s,{I:()=>n});var a=t(97247),r=t(28964),l=t(40677);let n=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));n.displayName="Input"},44211:(e,s,t)=>{"use strict";t.d(s,{g:()=>n});var a=t(97247),r=t(28964),l=t(40677);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));n.displayName="Textarea"},79091:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\project\error.tsx#default`)},23427:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>r});var a=t(72051);let r={title:"Dự \xe1n"};function l({children:e}){return a.jsx(a.Fragment,{children:e})}},28204:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l}),t(72051);var a=t(54564);let r={size:{width:32,height:32},contentType:"image/png"};async function l(e){let{__metadata_id__:s,...t}=e.params,l=(0,a.fillMetadataSegment)(".",t,"icon"),{generateImageMetadata:n}=r;function i(e,s){let t={alt:e.alt,type:e.contentType||"image/png",url:l+(s?"/"+s:"")+"?4a97cfd375538d02"},{size:a}=e;return a&&(t.sizes=a.width+"x"+a.height),t}return n?(await n({params:t})).map((e,s)=>{let t=(e.id||s)+"";return i(e,t)}):[i(r,"")]}}};