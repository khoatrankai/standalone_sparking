"use strict";exports.id=4290,exports.ids=[4290],exports.modules={84290:(e,t,l)=>{l.d(t,{Z:()=>T});var a=l(97247),s=l(28964),n=l(77951),r=l(41479),i=l(57233),d=l(23102),c=l(2805),o=l(79906),x=l(16415),h=l(34178),m=l(16523),p=l(29722),g=l(61410),u=l(12927),j=l(1880),f=l(77709),w=l(99539),N=l(69160),b=l(38043),Z=l(67427),v=l(83473),y=l(28373),k=l(50678);let S=({refBtnRole:e})=>{let[t,l]=(0,s.useState)(!1),[r,i]=(0,s.useState)(-1),c=(0,d.I0)(),{datas:o}=(0,d.v9)(e=>e.role_projects),x=e=>{i(e),C.setFieldsValue(o?.[e])},[h,m]=(0,s.useState)(!1),{postdata:p}=(0,w.Z)(),[S]=(0,N.Z)(),[C]=(0,N.Z)(),[_,I]=(0,s.useState)(""),P=async()=>{200===await p(()=>v.Z.deleteRole([_??""]))&&(c((0,y.H)()),I(""))},V=async e=>{console.log(e);try{let t=await p(()=>v.Z.createRole(e));201===t&&(c((0,y.H)()),S.resetFields(),m(!1))}catch(e){console.error("Error creating product:",e)}},F=async e=>{try{let t=await p(()=>v.Z.updateRole(o?.[r??0].role_id??"",e));200===t&&(c((0,y.H)()),c((0,k.b)()),i(-1))}catch(e){console.error("Error creating product:",e)}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.ZP,{hidden:!!e,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{l(!0)},ref:e,children:"Vị tr\xed dự \xe1n"}),a.jsx(g.Z,{title:(0,a.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[a.jsx("span",{children:"Vị tr\xed dự \xe1n"}),a.jsx(n.ZP,{className:"text-white font-semibold bg-orange-500",icon:a.jsx(b.gyF,{}),type:"default",onClick:()=>{S.resetFields(),m(!h)}})]}),open:t,onCancel:()=>{l(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[a.jsx("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!h,children:(0,a.jsxs)(u.Z,{form:S,onFinish:V,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[a.jsx(u.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:a.jsx(j.default,{placeholder:"Nhập t\xean loại"})}),a.jsx(u.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag loại"}],style:{flex:"1 1 0%",margin:"0"},children:a.jsx(j.default,{placeholder:"Nhập tag loại"})}),a.jsx(u.Z.Item,{style:{display:"flex",minWidth:"100%",justifyContent:"end",margin:"0"},children:a.jsx(n.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{S.submit()},children:"Th\xeam"})})]})}),a.jsx("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(r>-1),children:(0,a.jsxs)(u.Z,{form:C,onFinish:F,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[a.jsx(u.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:a.jsx(j.default,{placeholder:"Nhập t\xean loại"})}),a.jsx(u.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag loại"}],style:{flex:"1 1 0%",margin:"0"},children:a.jsx(j.default,{placeholder:"Nhập tag loại"})}),(0,a.jsxs)(u.Z.Item,{style:{display:"flex",minWidth:"100%",gap:"2px",justifyContent:"end",margin:"0"},children:[a.jsx(n.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),a.jsx(n.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{i(-1)},children:"Huỷ"})]})]})}),a.jsx("div",{className:"border-t-2 w-full overflow-x-auto",children:a.jsx("div",{className:"w-full",children:a.jsx(f.Z,{columns:[{title:"Tag loại",dataIndex:"name_tag",width:"20%",key:"name_tag",render:e=>a.jsx(a.Fragment,{children:a.jsx("strong",{className:"flex gap-2 items-center",children:e})})},{title:"T\xean loại",dataIndex:"name",width:"40%",key:"name",render:(e,t,l)=>a.jsx(a.Fragment,{children:(0,a.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,a.jsx(n.ZP,{type:"link",onClick:()=>{x(l)},icon:a.jsx(Z.FNg,{})}),a.jsx(n.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>I(t?.role_id??""),children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:o,pagination:{pageSize:10,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`},showSorterTooltip:{target:"sorter-icon"}})})})]})}),a.jsx(g.Z,{open:""!==_,title:"X\xf3a dữ liệu",onOk:P,onCancel:()=>{I("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})};function C(){let{customerID:e}=(0,h.useParams)(),{datas:t}=(0,d.v9)(e=>e.get_project_about);return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-1 flex-wrap",children:[a.jsx(i.Z,{}),a.jsx(c.Z,{}),a.jsx(S,{}),a.jsx(o.default,{href:"/project/gantt",children:a.jsx(n.ZP,{icon:a.jsx(x.Wq9,{})})}),a.jsx(o.default,{href:"/detail/project",children:a.jsx(n.ZP,{icon:a.jsx(m.B1I,{})})}),a.jsx(o.default,{href:"/management/all_project",children:a.jsx(n.ZP,{icon:a.jsx(p.hRG,{})})})]}),!e&&(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"font-semibold text-[#1BA399]",children:"T\xf3m lược dự \xe1n"}),(0,a.jsxs)("div",{className:"flex justify-around gap-2 flex-wrap",children:[(0,a.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[a.jsx("p",{className:"font-bold text-3xl text-white",children:t?.find?.(e=>"waiting"===e.status)?.count.toLocaleString("vi-VN")??0}),a.jsx("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Chưa bắt đầu"})]}),(0,a.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[a.jsx("p",{className:"font-bold text-3xl text-white",children:t?.find?.(e=>"start"===e.status)?.count.toLocaleString("vi-VN")??0}),a.jsx("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Đang thực hiện"})]}),(0,a.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[a.jsx("p",{className:"font-bold text-3xl text-white",children:t?.find?.(e=>"pause"===e.status)?.count.toLocaleString("vi-VN")??0}),a.jsx("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Tạm ngưng"})]}),(0,a.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[a.jsx("p",{className:"font-bold text-3xl text-white",children:t?.find?.(e=>"cancel"===e.status)?.count.toLocaleString("vi-VN")??0}),a.jsx("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Đ\xe3 hủy"})]}),(0,a.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[a.jsx("p",{className:"font-bold text-3xl text-white",children:t?.find?.(e=>"completed"===e.status)?.count.toLocaleString("vi-VN")??0}),a.jsx("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Ho\xe0n th\xe0nh"})]})]})]})]})}var _=l(39884),I=l(96538),P=l(98395),V=l(67552);function F(){let e=(0,V.Z)(["admin-top","project","project-edit"]),{customerID:t}=(0,h.useParams)(),[l,i]=(0,s.useState)(25),[c,o]=(0,s.useState)(),{datas:x}=(0,d.v9)(e=>e.get_projects),p=[{title:"#",className:"",dataIndex:"project_id",render:(t,l,s)=>(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("strong",{children:["#",s+1,"."]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(n.ZP,{type:"text",ghost:!0,className:" text-blue-600",onClick:()=>{window.location.href=`/project/info/${t}`},children:"Xem"}),e&&a.jsx(P.Z,{ID:t})]})]}),sorter:(e,t)=>e.project_id.localeCompare(t.project_id)},{title:"T\xean dự \xe1n",className:"",dataIndex:"name",render:e=>a.jsx(a.Fragment,{children:e&&e.length>15?`${e.slice(0,15)}...`:e}),sorter:(e,t)=>e.name?.localeCompare(t.name||"")||0},{title:"Kh\xe1ch h\xe0ng",className:"",dataIndex:["customer","name_company"],render:e=>a.jsx(a.Fragment,{children:e||"N/A"})},{title:"Gi\xe1 trị",className:"",dataIndex:"price",render:e=>e?`${e.toLocaleString("vi-VN")}đ`:"N/A",sorter:(e,t)=>(e.price||0)-(t.price||0)},{title:"Ng\xe0y bắt đầu",className:"",dataIndex:"start_date",render:e=>new Date(e).toLocaleDateString("vi-VN")},{title:"Ng\xe0y kết th\xfac",className:"",dataIndex:"end_date",render:e=>new Date(e).toLocaleDateString("vi-VN")},{title:"Trạng th\xe1i",className:"",dataIndex:"status",render:e=>{let t="",l="";switch(e){case"waiting":t="gold",l="Đang chờ";break;case"start":t="blue",l="Bắt đầu";break;case"pause":t="orange",l="Tạm dừng";break;case"cancel":t="red",l="Đ\xe3 hủy";break;case"completed":t="green",l="Ho\xe0n th\xe0nh";break;default:t="default",l="Kh\xf4ng x\xe1c định"}return a.jsx(r.Z,{className:"",color:t,children:l})},sorter:(e,t)=>e.status.localeCompare(t.status)}],u=e=>{o(x?.filter(t=>(t.project_id+" "+t.name+" "+t.customer+" "+t.status).toLowerCase().includes(e.toLowerCase())))},{postdata:j}=(0,w.Z)(),N=(0,d.I0)(),[b,Z]=(0,s.useState)(!1),[y,S]=(0,s.useState)([]),C=async()=>{200===await j(()=>v.Z.deleteProject(y))&&(N((0,k.b)()),S([]),Z(!1))};return(0,h.useSearchParams)(),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(_.Z,{defaultValue:l,style:{width:83},onChange:e=>i(e),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"All"}]}),a.jsx(n.ZP,{hidden:!(y.length>0),children:"Xuất ra"}),a.jsx(n.ZP,{onClick:()=>{Z(!0)},danger:!0,hidden:!(y.length>0),className:"text-xl",icon:a.jsx(m.FH3,{})}),a.jsx(g.Z,{open:b,title:"X\xf3a dữ liệu",onOk:C,onCancel:()=>{Z(!1)},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]}),a.jsx("div",{className:"flex items-center",children:a.jsx(I.Z,{onChange:e=>u(e.target.value),placeholder:"Search",style:{width:200}})})]}),a.jsx("div",{className:"w-full overflow-auto",children:a.jsx("div",{className:"min-w-fit",children:a.jsx(f.Z,{columns:p,rowSelection:{onChange:(e,t)=>{S(t.map(e=>e.project_id))}},dataSource:c,scroll:{x:"max-content"},pagination:{pageSize:l,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`},showSorterTooltip:{target:"sorter-icon"}})})})]})}function T(){let e=(0,V.Z)(["admin-top","project","project-edit"]);return a.jsx("div",{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[e&&a.jsx("div",{className:"rounded-md",children:a.jsx(C,{})}),a.jsx("div",{className:"rounded-md",children:a.jsx(F,{})})]})})}}};