"use strict";exports.id=6192,exports.ids=[6192],exports.modules={99219:(e,t,a)=>{a.d(t,{Z:()=>n});let n=(0,a(26323).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},89779:(e,t,a)=>{a.d(t,{Z:()=>n});let n=(0,a(26323).Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},94858:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(97247),s=a(88192),i=a(97775);a(86448);var r=a(99801),l=a.n(r),d=a(45196),o=a.n(d),c=a(24301),h=a.n(c),y=a(63925),u=a.n(y),p=a(28964),x=a(91027),m=a(38960);function f({ID:e}){let t=(0,m.ZP)({maxWidth:639}),[a,r]=(0,p.useState)(),d=(0,p.useRef)(),[c,y]=(0,p.useState)(0),[u,f]=(0,p.useState)(""),[j,g]=(0,p.useState)([]),v=async()=>{let t=await s.Z.getActivityByContract(e);200===t.statusCode&&r(t.data)},w=[{id:"en",lang:{feelingEmpty:"I feel so empty...",free:"Free",loadNext:"Next",loadPrevious:"Previous",over:"over",taken:"Taken",topbar:{filters:"Filters",next:"next",prev:"prev",today:"Today",view:"View"},search:"search",week:"week"},translateCode:"en-EN",dayjsTranslations:o()},{id:"vi",lang:{feelingEmpty:"T\xf4i cảm thấy trống rỗng...",free:"Miễn ph\xed",loadNext:"Tiếp theo",loadPrevious:"Trước",over:"hết",taken:"Đ\xe3 lấy",topbar:{filters:"Bộ lọc",next:"Tiếp theo",prev:"Trước",today:"H\xf4m nay",view:"Xem"},search:"T\xecm kiếm",week:"Tuần"},translateCode:"vi-VN",dayjsTranslations:h()}],[Z,C]=(0,p.useState)({startDate:new Date,endDate:new Date}),k=(0,p.useCallback)(e=>{C(e)},[]),D=j.map(e=>({...e,data:e.data?.filter(e=>l()(e.startDate).isBetween(Z.startDate,Z.endDate)||l()(e.endDate).isBetween(Z.startDate,Z.endDate)||l()(e.startDate).isBefore(Z.startDate,"day")&&l()(e.endDate).isAfter(Z.endDate,"day"))}));return(0,n.jsxs)("section",{className:`${t?"unactive":""}`,children:[n.jsx(i.b,{data:D,isLoading:!a,onRangeChange:k,onTileClick:e=>console.log(e),onItemClick:e=>{e&&f(e.id)},onFilterData:()=>{y(1)},onClearFilterData:()=>{y(0)},config:{zoom:0,filterButtonState:c,showTooltip:!1,lang:"vi",translations:w,showThemeToggle:!0,defaultTheme:"dark"}}),n.jsx(x.Z,{ID:u,refBtn:d,type:"gantt",setID:f,fetchData:v})]})}l().extend(u())},91027:(e,t,a)=>{a.d(t,{Z:()=>b});var n=a(97247),s=a(99539),i=a(84675),r=a(88192),l=a(77951),d=a(61410),o=a(82140),c=a(12927),h=a(39884),y=a(95718),u=a(1880),p=a(69160),x=a(41201),m=a(75142),f=a(28964),j=a(23102),g=a(14531),v=a(78575),w=a(23175),Z=a(20142),C=a(73176),k=a(86424),D=a(34178),T=a(19819);function b({ID:e,idType:t,type:a,refBtn:b,setID:S}){let _=(0,f.useRef)(),B=(0,f.useRef)(),I=(0,f.useRef)(),R=(0,f.useRef)(),A=(0,f.useRef)(),P=(0,f.useRef)(),[F,N]=(0,f.useState)(""),{datas:W}=(0,j.v9)(e=>e.get_type_activities),{datas:L}=(0,j.v9)(e=>e.get_contracts),{projectID:M}=(0,D.useParams)(),[V]=(0,p.Z)(),{postdata:q}=(0,s.Z)(),E=(0,j.I0)(),[H,O]=(0,f.useState)(!1),[z,G]=(0,f.useState)(""),[K,X]=(0,f.useState)([]),$=async()=>{let t=await r.Z.getActivityById(e);if(200===t.statusCode){let e=t.data;V.setFieldsValue(e),G(t.data.type)}},J=async n=>{console.log(e);let s=await q(()=>r.Z.updateActivity(e,n));(200===s||201===s)&&($(),a||E((0,i.ij)({project:M})),"schedule"===a&&E((0,g.N)(t)),"gantt"===a&&S&&(E((0,i.ij)({})),S("")))},Q=async()=>{V.submit()};return(0,n.jsxs)(n.Fragment,{children:[n.jsx(l.ZP,{hidden:!!a,className:"  text-xs text-yellow-500 font-semibold",type:"text",ref:b,onClick:()=>{O(!0),$()},children:"Chỉnh sửa"}),n.jsx(d.Z,{title:"Cập nhật hoạt động",open:H,onCancel:()=>{O(!1),S&&S("")},footer:null,width:"100%",style:{maxWidth:"800px"},children:n.jsx(o.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,n.jsxs)(m.Z,{tab:"Th\xf4ng tin hoạt động",children:[(0,n.jsxs)(c.Z,{layout:"vertical",form:V,onFinish:J,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[n.jsx(c.Z.Item,{name:"type",label:"Loại hoạt động",rules:[{required:!0,message:"Vui l\xf2ng chọn loại hoạt động!"}],style:{width:"100%",flex:"1 1 0%"},children:n.jsx(h.Z,{disabled:!0,placeholder:"Chọn loại",onChange:e=>{G(e)},showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(y.Z,{style:{margin:"8px 0"}}),n.jsx(l.ZP,{type:"link",onClick:()=>{_.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:W?.map(e=>n.jsx(x.W,{value:e.type_activity_id,children:e.name},e.type_activity_id))})}),n.jsx(c.Z.Item,{name:"name",label:"T\xean hoạt động",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xean hoạt động"}],style:{minWidth:"100%",flex:"1 1 0%"},children:n.jsx(u.default,{})}),n.jsx(c.Z.Item,{name:"status",label:"Trạng th\xe1i",style:{minWidth:"240px",flex:"1 1 0%"},children:n.jsx(h.Z,{disabled:!0,placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(y.Z,{style:{margin:"8px 0"}}),n.jsx(l.ZP,{type:"link",onClick:()=>{I.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:K?.map(e=>n.jsx(x.W,{value:e.status_activity_id,children:e.name},e.status_activity_id))})}),n.jsx(c.Z.Item,{name:"contract",label:"Hợp động",style:{minWidth:"240px",flex:"1 1 0%"},children:n.jsx(h.Z,{placeholder:"Chọn hợp động",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(y.Z,{style:{margin:"8px 0"}}),n.jsx(l.ZP,{type:"link",onClick:()=>{B.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:L?.map(e=>n.jsx(x.W,{value:e.contract_id,children:e.name_contract},e.contract_id))})}),n.jsx(c.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:n.jsx(u.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]}),n.jsx("div",{className:"flex justify-end w-full mt-4",children:n.jsx(l.ZP,{type:"primary",onClick:Q,children:"Cập nhật"})})]},1)})}),n.jsx(v.Z,{refBtnContract:B}),n.jsx(w.Z,{refBtnType:_}),n.jsx(Z.Z,{refBtnStatus:I}),n.jsx(C.Z,{refBtnStatus:A}),n.jsx(k.Z,{refBtnType:R}),n.jsx(T.Z,{ID:F,refBtn:P,setID:N})]})}},40768:(e,t,a)=>{a.d(t,{f:()=>l});var n=a(28964),s=a(22251),i=a(97247),r=n.forwardRef((e,t)=>(0,i.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var l=r}};