"use strict";exports.id=749,exports.ids=[749],exports.modules={47248:(e,t,l)=>{l.d(t,{Z:()=>A});var n=l(97247),i=l(99539),r=l(9914),s=l(88192),a=l(71691),c=l(77951),d=l(61410),h=l(82140),o=l(12927),x=l(1880),m=l(39884),u=l(95718),p=l(35090),j=l(31464),y=l(92177),g=l(69160),f=l(41201),w=l(75142),v=l(28964),C=l(38043),Z=l(98065),_=l(23102),k=l(86424),b=l(73176),T=l(24989),S=l(37694),W=l(34178);function A({idStatus:e,idType:t,refBtnWork:l,type:A}){let{Panel:N}=a.default,I=(0,v.useRef)(null),{projectID:L}=(0,W.useParams)();(0,W.useSearchParams)();let F=(0,v.useRef)(),P=(0,v.useRef)(),R=(0,v.useRef)(),{datas:B}=(0,_.v9)(e=>e.get_type_work),{datas:q}=(0,_.v9)(e=>e.get_projects),{datas:z}=(0,_.v9)(e=>e.get_users),{datas:O}=(0,_.v9)(e=>e.get_activities),[G,K]=(0,v.useState)(!1),[M,V]=(0,v.useState)([]),[D,E]=(0,v.useState)([]),[H]=(0,g.Z)(),{postdata:$}=(0,i.Z)(),J=(0,_.I0)(),[Q,U]=(0,v.useState)(!1),[X,Y]=(0,v.useState)(""),ee=async e=>{let l=await $(()=>s.Z.createWork({...e,list_users:D}));(200===l||201===l)&&(A||J((0,r.LG)({project:L})),"schedule"===A&&J((0,S.C)(t)),U(!1))},et=async()=>{H.submit()};return(0,n.jsxs)(n.Fragment,{children:[n.jsx(c.ZP,{hidden:!!l,type:A?"link":"default",className:A?"text-[#EC8920]":"bg-blue-400 border-0 text-white font-semibold",icon:n.jsx(Z.b0B,{}),onClick:()=>{U(!0)},ref:l,children:"Th\xeam c\xf4ng việc"}),(0,n.jsxs)(d.Z,{title:"Tạo c\xf4ng việc",open:Q,onCancel:()=>{U(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[n.jsx(h.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:n.jsx(w.Z,{tab:"Th\xf4ng tin c\xf4ng việc",children:n.jsx(o.Z,{layout:"vertical",form:H,onFinish:ee,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:(0,n.jsxs)(a.default,{defaultActiveKey:["1"],className:"w-full",children:[(0,n.jsxs)(N,{header:"Th\xf4ng tin chung",className:"w-full",children:[n.jsx(o.Z.Item,{name:"name",label:"T\xean c\xf4ng việc",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xean c\xf4ng việc"}],style:{minWidth:"100%",flex:"1 1 0%"},children:n.jsx(x.default,{})}),n.jsx(o.Z.Item,{name:"project",label:"C\xf4ng tr\xecnh",rules:[{required:!0,message:"Vui l\xf2ng chọn c\xf4ng tr\xecnh!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:n.jsx(m.Z,{placeholder:"Chọn c\xf4ng tr\xecnh",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(u.Z,{style:{margin:"8px 0"}}),n.jsx(c.ZP,{type:"link",onClick:()=>{I.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:q?.map(e=>n.jsx(f.W,{value:e.project_id,children:e.name},e.project_id))})}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-3",children:[n.jsx(o.Z.Item,{name:"time_start",label:"Bắt đầu",className:" mb-0",style:{minWidth:"250px",flex:"1 1 0%"},children:n.jsx(p.default,{placeholder:"Chọn ng\xe0y bắt đầu",style:{width:"100%"}})}),n.jsx(o.Z.Item,{className:" mb-0",label:"Kết th\xfac",name:"time_end",rules:[{required:!0}],style:{minWidth:"250px",flex:"1 1 0%"},children:n.jsx(p.default,{placeholder:"Chọn ng\xe0y kết th\xfac",style:{width:"100%"}})})]}),(0,n.jsxs)("div",{className:" mt-8",children:[n.jsx("p",{children:"Người thực hiện"}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[n.jsx(j.C.Group,{max:{count:5,style:{color:"#f56a00",backgroundColor:"#fde3cf"}},children:D?.map(e=>{let t=z?.find(t=>t.user_id===e);return n.jsx(y.Z,{title:(t?.first_name||"")+(t?.last_name||""),placement:"top",children:n.jsx(j.C,{src:t?.picture_url,alt:(t?.first_name??"")+(t?.last_name??""),style:{backgroundColor:"#87d068"}})})})}),G?(0,n.jsxs)(n.Fragment,{children:[n.jsx(m.Z,{mode:"multiple",onBlur:()=>{K(!G)},allowClear:!0,maxTagCount:"responsive",style:{width:"220px"},value:D,placeholder:"Please select",onChange:e=>{E(e)},options:M?.map(e=>({label:n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:n.jsxs("div",{children:[n.jsx("strong",{children:e.label}),n.jsx("div",{style:{fontSize:"12px",color:"gray"},children:e.group})]})}),value:e.value}))}),n.jsx(C.FMH,{className:"w-8 h-8 text-red-500 cursor-pointer",onClick:()=>{K(!G)}})]}):n.jsx(C.S$f,{className:"w-8 h-8 text-[#ED8C1F] cursor-pointer",onClick:()=>{K(!G)}})]})]})]},"1"),(0,n.jsxs)(N,{header:"Th\xf4ng tin n\xe2ng cao",children:[n.jsx(o.Z.Item,{name:"type",label:"Loại c\xf4ng việc",rules:[{required:!0,message:"Vui l\xf2ng chọn loại c\xf4ng việc!"}],style:{width:"100%",flex:"1 1 0%"},children:n.jsx(m.Z,{placeholder:"Chọn loại",onChange:e=>{Y(e)},showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(u.Z,{style:{margin:"8px 0"}}),n.jsx(c.ZP,{type:"link",onClick:()=>{F.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:B?.map(e=>n.jsx(f.W,{value:e.type_work_id,children:e.name},e.type_work_id))})}),n.jsx(o.Z.Item,{name:"status",label:"Trạng th\xe1i",style:{minWidth:"240px",flex:"1 1 0%"},children:n.jsx(m.Z,{placeholder:"Chọn trạng th\xe1i",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(u.Z,{style:{margin:"8px 0"}}),n.jsx(c.ZP,{type:"link",onClick:()=>{P.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:B.find(e=>e.type_work_id===X)?.status?.map(e=>n.jsx(f.W,{value:e.status_work_id,children:e.name},e.status_work_id))})}),n.jsx(o.Z.Item,{name:"activity",label:"Hoạt động",style:{minWidth:"240px",flex:"1 1 0%"},children:n.jsx(m.Z,{placeholder:"Chọn hoạt động",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(u.Z,{style:{margin:"8px 0"}}),n.jsx(c.ZP,{type:"link",onClick:()=>{R.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:O?.map(e=>n.jsx(f.W,{value:e.activity_id,children:e.name},e.activity_id))})}),n.jsx(o.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:n.jsx(x.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]},"2")]})})},1)}),n.jsx("div",{className:"flex justify-end w-full mt-4",children:n.jsx(c.ZP,{type:"primary",onClick:et,children:"Tạo"})})]}),n.jsx(k.Z,{refBtnType:F}),n.jsx(b.Z,{refBtnStatus:P}),n.jsx(T.Z,{refBtnActivity:R})]})}},28204:(e,t,l)=>{l.r(t),l.d(t,{default:()=>r}),l(72051);var n=l(54564);let i={size:{width:32,height:32},contentType:"image/png"};async function r(e){let{__metadata_id__:t,...l}=e.params,r=(0,n.fillMetadataSegment)(".",l,"icon"),{generateImageMetadata:s}=i;function a(e,t){let l={alt:e.alt,type:e.contentType||"image/png",url:r+(t?"/"+t:"")+"?4a97cfd375538d02"},{size:n}=e;return n&&(l.sizes=n.width+"x"+n.height),l}return s?(await s({params:l})).map((e,t)=>{let l=(e.id||t)+"";return a(e,l)}):[a(i,"")]}}};