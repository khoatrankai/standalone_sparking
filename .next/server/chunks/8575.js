"use strict";exports.id=8575,exports.ids=[8575],exports.modules={78575:(e,t,l)=>{l.d(t,{Z:()=>I});var n=l(97247),s=l(41290),i=l(57233),r=l(99539),a=l(84169),d=l(68967),c=l(77951),o=l(61410),h=l(82140),x=l(12927),m=l(39884),p=l(95718),u=l(1880),y=l(65794),j=l(35090),g=l(69160),f=l(41201),Z=l(75142),w=l(28964),b=l(98065),C=l(23102),k=l(75569),v=l(99801),_=l.n(v),N=l(34178);function I({refBtnContract:e}){let{customerID:t}=(0,N.useParams)();(0,N.useSearchParams)();let l=(0,w.useRef)(),v=(0,w.useRef)(),I=(0,w.useRef)(),{datas:W}=(0,C.v9)(e=>e.get_type_contract),{datas:P}=(0,C.v9)(e=>e.infos_customer),{datas:T}=(0,C.v9)(e=>e.get_projects),[F]=(0,g.Z)(),{postdata:V}=(0,r.Z)(),S=(0,C.I0)(),[L,q]=(0,w.useState)(!1),A=async e=>{let l=await V(()=>d.Z.createContract(e));(200===l||201===l)&&(S((0,a.Wq)(t?{customer:t}:null)),q(!1))},Y=async()=>{F.submit()};return(0,n.jsxs)(n.Fragment,{children:[n.jsx(c.ZP,{hidden:!!e,className:"bg-blue-400 border-0 text-white font-semibold",icon:n.jsx(b.b0B,{}),onClick:()=>{q(!0)},ref:e,children:"Th\xeam hợp đồng"}),(0,n.jsxs)(o.Z,{title:"Tạo hợp đồng",open:L,onCancel:()=>{q(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[n.jsx(h.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:n.jsx(Z.Z,{tab:"Th\xf4ng tin hợp đồng",children:(0,n.jsxs)(x.Z,{layout:"vertical",form:F,onFinish:A,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[n.jsx(x.Z.Item,{name:"customer",label:"Kh\xe1ch h\xe0ng",rules:[{required:!0,message:"Vui l\xf2ng chọn kh\xe1ch h\xe0ng!"}],style:{width:"100%",flex:"1 1 0%"},children:n.jsx(m.Z,{placeholder:"Chọn kh\xe1ch h\xe0ng",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(p.Z,{style:{margin:"8px 0"}}),n.jsx(c.ZP,{type:"link",onClick:()=>{l.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:P?.map(e=>n.jsx(f.W,{value:e.info_id,children:e.name_company},e.info_id))})}),n.jsx(x.Z.Item,{name:"project",label:"Dự \xe1n",style:{width:"100%",flex:"1 1 0%"},children:n.jsx(m.Z,{placeholder:"Chọn dự \xe1n",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(p.Z,{style:{margin:"8px 0"}}),n.jsx(c.ZP,{type:"link",onClick:()=>{v.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:T?.map(e=>n.jsx(f.W,{value:e.project_id,children:e.name},e.project_id))})}),n.jsx(x.Z.Item,{name:"name_contract",label:"T\xean hợp đồng",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xean hợp đồng"}],style:{minWidth:"100%",flex:"1 1 0%"},children:n.jsx(u.default,{})}),n.jsx(x.Z.Item,{name:"code_contract",label:"M\xe3 hợp đồng",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập m\xe3 hợp đồng"}],style:{minWidth:"100%",flex:"1 1 0%"},children:n.jsx(u.default,{})}),n.jsx(x.Z.Item,{name:"price",label:"Gi\xe1 trị hợp đồng(vnđ)",style:{minWidth:"240px",flex:"1 1 0%"},children:n.jsx(y.Z,{placeholder:"Price",className:"w-full",formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e?.replace(/\$\s?|(,*)/g,"")})}),n.jsx(x.Z.Item,{name:"type_contract",label:"Loại hợp đồng",style:{minWidth:"240px",flex:"1 1 0%"},children:n.jsx(m.Z,{placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>(Array.isArray(t?.children)?t.children.join(""):t?.children??"").toLowerCase().includes(e.toLowerCase()),dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,n.jsx(p.Z,{style:{margin:"8px 0"}}),n.jsx(c.ZP,{type:"link",onClick:()=>{I.current?.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:W?.map(e=>n.jsx(f.W,{value:e.type_id,children:e.name_type},e.type_id))})}),n.jsx(x.Z.Item,{name:"type",label:"Loại thanh to\xe1n",rules:[{required:!0}],style:{minWidth:"240px",flex:"1 1 0%"},children:(0,n.jsxs)(m.Z,{placeholder:"Select status",children:[n.jsx(f.W,{value:"default",children:"Cố định"}),n.jsx(f.W,{value:"time",children:"Chu k\xec"})]})}),n.jsx(x.Z.Item,{name:"date_start",label:"Ng\xe0y bắt đầu",initialValue:"",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},getValueFromEvent:e=>e?.format("YYYY-MM-DD"),getValueProps:e=>({value:e?_()(e):""}),children:n.jsx(j.default,{placeholder:"Chọn ng\xe0y bắt đầu",style:{width:"100%"}})}),n.jsx(x.Z.Item,{name:"date_expired",label:"Ng\xe0y kết th\xfac",rules:[{required:!0}],initialValue:"",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},getValueFromEvent:e=>e?.format("YYYY-MM-DD"),getValueProps:e=>({value:e?_()(e):""}),children:n.jsx(j.default,{placeholder:"Chọn ng\xe0y kết th\xfac",style:{width:"100%"}})}),n.jsx(x.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:n.jsx(u.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]})},1)}),n.jsx("div",{className:"flex justify-end w-full mt-4",children:n.jsx(c.ZP,{type:"primary",onClick:Y,children:"Tạo"})})]}),n.jsx(s.Z,{refBtnCustomer:l}),n.jsx(i.Z,{refBtnProject:v}),n.jsx(k.Z,{refBtnType:I})]})}},75569:(e,t,l)=>{l.d(t,{Z:()=>g});var n=l(97247),s=l(28964),i=l(77951),r=l(61410),a=l(12927),d=l(1880),c=l(77709),o=l(99539),h=l(69160),x=l(38043),m=l(67427),p=l(23102),u=l(68967),y=l(37120),j=l(84169);let g=({refBtnType:e})=>{let[t,l]=(0,s.useState)(!1),[g,f]=(0,s.useState)(-1),Z=(0,p.I0)(),{datas:w}=(0,p.v9)(e=>e.get_type_contract),b=e=>{f(e),N.setFieldsValue(w?.[e])},[C,k]=(0,s.useState)(!1),{postdata:v}=(0,o.Z)(),[_]=(0,h.Z)(),[N]=(0,h.Z)(),[I,W]=(0,s.useState)(""),P=async()=>{200===await v(()=>u.Z.deleteTypeContract([I??""]))&&(Z((0,y.eV)()),W(""))},T=async e=>{try{let t=await v(()=>u.Z.createTypeContract(e));201===t&&(Z((0,y.eV)()),_.resetFields(),k(!1))}catch(e){console.error("Error creating product:",e)}},F=async e=>{try{let t=await v(()=>u.Z.updateTypeContract(w?.[g??0].type_id??"",e));200===t&&(Z((0,y.eV)()),Z((0,j.Wq)(null)),f(-1))}catch(e){console.error("Error creating product:",e)}};return(0,n.jsxs)(n.Fragment,{children:[n.jsx(i.ZP,{hidden:!!e,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{l(!0)},ref:e,children:"Loại hợp đồng"}),n.jsx(r.Z,{title:(0,n.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[n.jsx("span",{children:"Loại hợp đồng"}),n.jsx(i.ZP,{className:"text-white font-semibold bg-orange-500",icon:n.jsx(x.gyF,{}),type:"default",onClick:()=>{_.resetFields(),k(!C)}})]}),open:t,onCancel:()=>{l(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!C,children:(0,n.jsxs)(a.Z,{form:_,onFinish:T,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[n.jsx(a.Z.Item,{name:"name_type",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:n.jsx(d.default,{placeholder:"Nhập t\xean loại"})}),n.jsx(a.Z.Item,{style:{display:"flex",justifyContent:"end",margin:"0"},children:n.jsx(i.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{_.submit()},children:"Th\xeam"})})]})}),n.jsx("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(g>-1),children:(0,n.jsxs)(a.Z,{form:N,onFinish:F,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[n.jsx(a.Z.Item,{name:"name_type",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:n.jsx(d.default,{placeholder:"Nhập t\xean loại"})}),(0,n.jsxs)(a.Z.Item,{style:{display:"flex",gap:"2px",justifyContent:"end",margin:"0"},children:[n.jsx(i.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),n.jsx(i.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{f(-1)},children:"Huỷ"})]})]})}),n.jsx("div",{className:"border-t-2 w-full overflow-x-auto",children:n.jsx("div",{className:"w-full",children:n.jsx(c.Z,{columns:[{title:"M\xe3 loại",dataIndex:"type_id",key:"type_id",render:(e,t,l)=>(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:["#",l+1,".",e]})},{title:"T\xean loại",dataIndex:"name_type",width:"50%",key:"name_type",render:(e,t,l)=>n.jsx(n.Fragment,{children:(0,n.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,n.jsx(i.ZP,{type:"link",onClick:()=>{b(l)},icon:n.jsx(m.FNg,{})}),n.jsx(i.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>W(t?.type_id??""),children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:w,pagination:{pageSize:10,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`},showSorterTooltip:{target:"sorter-icon"}})})})]})}),n.jsx(r.Z,{open:""!==I,title:"X\xf3a dữ liệu",onOk:P,onCancel:()=>{W("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})}}};