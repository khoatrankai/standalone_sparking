exports.id=9756,exports.ids=[9756],exports.modules={57715:(e,t,s)=>{Promise.resolve().then(s.bind(s,57682))},98494:(e,t,s)=>{Promise.resolve().then(s.bind(s,77268))},57682:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var l=s(97247),i=s(87467);function a({error:e,reset:t}){return l.jsx("div",{children:l.jsx(i.Z,{handleBtn:t,value:e.message})})}},77268:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>F});var l=s(97247),i=s(24305),a=s(31464),r=s(44597),n=s(28964),c=s(53803),d=s(98065),u=s(23102),o=s(14887),h=s(99539),m=s(48993),x=s(29073),p=s(77951),f=s(61410),j=s(12927),y=s(1880),g=s(69160);function w({refBtnUser:e}){let t=(0,u.I0)(),s=(0,n.useRef)(),[i]=(0,g.Z)(),{postdata:a}=(0,h.Z)(),[r,c]=(0,n.useState)(!1),d=async()=>{c(!0)},o=async e=>{let l=await a(()=>x.Z.updatePasswordCustomer(e));s.current?.click(),(200===l||201===l)&&(c(!1),t((0,m.R)()),i.resetFields())},w=async()=>{i.submit()};return(0,l.jsxs)(l.Fragment,{children:[l.jsx(p.ZP,{className:"  text-xs text-yellow-500 font-semibold",type:"text",hidden:!!e,ref:e,onClick:d}),(0,l.jsxs)(f.Z,{title:"Cập nhật password",open:r,onCancel:()=>{c(!1)},footer:null,width:"100%",style:{maxWidth:"400px"},children:[(0,l.jsxs)(j.Z,{layout:"vertical",form:i,onFinish:o,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[l.jsx(j.Z.Item,{name:"old_password",label:"Mật khẩu cũ",rules:[{required:!0,message:"Vui l\xf2ng nhập mật khẩu!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:l.jsx(y.default.Password,{placeholder:"Nhập mật khẩu cũ"})}),l.jsx(j.Z.Item,{name:"new_password",label:"Mật khẩu mới",rules:[{required:!0,message:"Vui l\xf2ng nhập mật khẩu!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:l.jsx(y.default.Password,{placeholder:"Nhập mật khẩu mới"})}),l.jsx(j.Z.Item,{name:"again_password",label:"X\xe1c nhận mật khẩu mới",dependencies:["new_password"],rules:[{required:!0,message:"Vui l\xf2ng nhập mật khẩu mới!"},({getFieldValue:e})=>({validator:(t,s)=>s&&e("new_password")!==s?Promise.reject(Error("Mật khẩu x\xe1c nhận kh\xf4ng khớp!")):Promise.resolve()})],style:{minWidth:"320px",flex:"1 1 0%"},children:l.jsx(y.default.Password,{placeholder:"Nhập mật khẩu mới"})})]}),l.jsx("div",{className:"flex justify-end w-full mt-4",children:l.jsx(p.ZP,{type:"primary",onClick:w,children:"Cập nhật"})})]})]})}var v=s(75003),_=s(34178);function b(){let e=(0,_.useRouter)(),t=(0,u.I0)(),{postdata:s}=(0,h.Z)(),i=(0,n.useRef)(),a=(0,n.useRef)(),{datas:r}=(0,u.v9)(e=>e.get_profile_customer),f=async()=>{200===await s(()=>x.Z.logoutCustomer())&&t((0,m.R)()).unwrap().then(t=>{400===t.statusCode&&e.push("/login?type=customer")}).catch(()=>{e.push("/login?type=customer")})};return(0,l.jsxs)("div",{className:"w-64 h-fit p-2 flex flex-col gap-4 rounded-md shadow-[rgba(13,_38,_76,_0.19)_0px_9px_20px]",children:[(0,l.jsxs)(p.ZP,{type:"text",className:"flex w-full h-fit items-center justify-start gap-4  capitalize",children:[l.jsx(v.Z,{className:"rounded-full",width:40,height:40,alt:"",src:r?.picture_url}),l.jsx("div",{className:"flex flex-col",children:l.jsx("p",{className:"font-semibold text-lg",children:r?.full_name})})]}),(0,l.jsxs)("div",{className:"flex flex-col w-full py-2 border-t-[1px] ",children:[l.jsx(p.ZP,{icon:l.jsx(c.BKo,{}),type:"text",onClick:()=>{i.current?.click()},className:"py-4 w-full rounded-md flex items-center justify-start capitalize",children:"Hồ sơ"}),l.jsx(p.ZP,{icon:l.jsx(c.q2z,{}),type:"text",onClick:()=>{a.current?.click()},className:"py-4 w-full rounded-md flex items-center justify-start capitalize",children:"Đổi mật khẩu"}),l.jsx(p.ZP,{onClick:()=>{f()},icon:l.jsx(d.qgu,{}),type:"text",className:"py-4 w-full  rounded-md flex items-center justify-start capitalize",children:"Tho\xe1t"})]}),l.jsx(o.Z,{type:"customer",customer_id:r?.customer_id,refBtnCustomer:i}),l.jsx(w,{refBtnUser:a})]})}let Z=()=>{let e=(0,u.I0)(),{datas:t}=(0,u.v9)(e=>e.get_profile_customer);return l.jsx("div",{className:"min-h-16 z-50 relative",children:(0,l.jsxs)("div",{className:"h-16 bg-white px-4 flex justify-between items-center fixed inset-x-0 shadow-[rgba(17,_17,_26,_0.1)_0px_0px_16px]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 h-full",children:[l.jsx(d.pLT,{className:"h-8 w-8 cursor-pointer",onClick:()=>{e((0,i.js)())}}),l.jsx(r.default,{className:"cursor-pointer",alt:"",src:"/logo1.png",height:40,width:140,onClick:()=>{window.location.href="/"}})]}),t?l.jsx(l.Fragment,{children:(0,l.jsxs)("div",{className:"relative group",children:[l.jsx(a.C,{alt:"",src:t.picture_url,className:"w-8 h-8"}),l.jsx("div",{className:"absolute w-fit h-fit right-0 top-full z-50 bg-white invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all",children:l.jsx(b,{})})]})}):l.jsx("div",{className:"rounded-full bg-[#00A9AE] w-fit h-fit p-2",children:l.jsx(c.Xws,{className:"text-white"})})]})})};var k=s(32990),N=s(79906),C=s(53211),P=s(52524),I=s(38960);let W=()=>{let e=(0,u.I0)(),t=(0,I.ZP)({maxWidth:639}),s=(0,u.v9)(e=>e.status_tab_menu),a=[{key:"customer",label:l.jsx(N.default,{href:"/customers/company",className:"",onClick:()=>{t&&e((0,i.js)())},children:l.jsx("span",{children:"Danh s\xe1ch c\xf4ng ty"})}),icon:l.jsx(c.$yZ,{})},{key:"project",label:"Dự \xe1n",icon:l.jsx(P.MC,{}),children:[{key:"list_project",label:l.jsx(N.default,{href:"/customers/project",onClick:()=>{t&&e((0,i.js)())},children:l.jsx("span",{children:"Danh s\xe1ch dự \xe1n"})})}]},{key:"sale",label:"T\xe0i liệu",icon:l.jsx(C.b1P,{}),children:[{key:"price_quote",label:l.jsx(N.default,{href:"/customers/price_quote",onClick:()=>{t&&e((0,i.js)())},children:l.jsx("span",{children:"B\xe1o gi\xe1"})})},{key:"contract",label:l.jsx(N.default,{href:"/customers/contract",onClick:()=>{t&&e((0,i.js)())},children:l.jsx("span",{children:"Hợp đồng"})})},{key:"invoice",label:l.jsx(N.default,{href:"/customers/payment",className:"",onClick:()=>{t&&e((0,i.js)())},children:l.jsx("span",{children:"H\xf3a đơn"})})}]}];return l.jsx("div",{className:`transition-all bg-[#1A2A36] max-h-full fixed bottom-0 left-0 top-16 overflow-y-auto py-4 ${s.isOpen?"sm:w-52 w-full":"w-0 "}`,children:l.jsx(k.Z,{className:"bg-[#1A2A36] !text-white",style:{width:"100%"},theme:"dark",color:"white",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],mode:"inline",items:a})})};function F({children:e}){let t=(0,u.v9)(e=>e.status_tab_menu);(0,_.useRouter)();let{datas:s}=(0,u.v9)(e=>e.get_profile_customer);return(0,u.I0)(),l.jsx(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[l.jsx(Z,{}),l.jsx(l.Fragment,{children:(0,l.jsxs)("div",{className:" flex flex-1 overflow-y-hidden overflow-x-auto min-h-fit",children:[l.jsx("div",{className:`h-full sm:relative inset-x-0 absolute z-40 transition-all   ${t.isOpen?"sm:min-w-52":"w-0 "}`,children:l.jsx(W,{})}),l.jsx("div",{className:` transition-all flex-1 overflow-y-scroll sm:w-auto w-screen  ${(t.isOpen,"")}`,children:e})]})})]})})}},14887:(e,t,s)=>{"use strict";s.d(t,{Z:()=>C});var l=s(97247),i=s(99539),a=s(11320),r=s(36714),n=s(48993),c=s(77660),d=s(6685),u=s(29073),o=s(48738),h=s(77784),m=s(77951),x=s(61410),p=s(12927),f=s(1880),j=s(39884),y=s(35090),g=s(88506),w=s(69160),v=s(41201),_=s(99801),b=s.n(_),Z=s(34178),k=s(28964),N=s(23102);function C({customer_id:e,refBtnCustomer:t,type:s}){let[_]=(0,w.Z)(),{customerID:C}=(0,Z.useParams)(),[P,I]=(0,k.useState)([]),W=(0,N.I0)(),{postdata:F}=(0,i.Z)(),[V,q]=(0,k.useState)(!1),z=async()=>{let t=await d.Z.getIDAccountCustomer(e);200===t.statusCode&&t.data&&(_.setFieldsValue({...t.data}),W((0,r.P)({customer_info:C})),W((0,a.m)()),I([{uid:t.data.customer_id,name:"logo.png",status:"done",url:t.data.picture_url}]))},S=async t=>{let l=(0,o.Z)(Object.entries({...t,customer_id:e??C.toString(),picture_url:P.length>0?[P?.[0]?.originFileObj]:null}).reduce((e,[t,s])=>(null!=s&&(e[t]=s),e),{}));if("customer"===s){let e=await F(()=>u.Z.updateAccountCustomerProfile(l));(200===e||201===e)&&(_.resetFields(),q(!1),W((0,n.R)()))}else{let t=await F(()=>d.Z.updateAccountCustomer(e,l));(200===t||201===t)&&(_.resetFields(),q(!1),W((0,r.P)({customer_info:C})))}},A=(0,l.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[l.jsx(h.Z,{}),l.jsx("div",{style:{marginTop:8},children:"Upload"})]});return(0,l.jsxs)(l.Fragment,{children:[l.jsx(m.ZP,{className:"  text-xs text-yellow-500 font-semibold",type:"text",hidden:!!t,ref:t,onClick:()=>{q(!0),s?W((0,n.R)()).unwrap().then(e=>{200===e.statusCode&&(_.setFieldsValue({...e.data}),I([{uid:e.data.customer_id,name:"logo.png",status:"done",url:e.data.picture_url}]))}).catch(()=>{}):z()},children:"Chỉnh sửa"}),l.jsx(x.Z,{title:"Cập nhật kh\xe1ch h\xe0ng",open:V,onCancel:()=>{q(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,l.jsxs)(p.Z,{layout:"vertical",onFinish:S,form:_,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 h-fit w-fit rounded-lg p-1",children:[l.jsx(p.Z.Item,{name:"full_name",className:"!m-0",label:"T\xean kh\xe1ch",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean c\xf4ng ty!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:l.jsx(f.default,{})}),l.jsx(p.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Vui l\xf2ng nhập email!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:l.jsx(f.default,{})}),l.jsx(p.Z.Item,{name:"password",label:"Mật khẩu",rules:[{required:!0,message:"Vui l\xf2ng nhập password!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:l.jsx(f.default.Password,{})}),l.jsx(p.Z.Item,{name:"position",label:"Vị tr\xed",style:{minWidth:"320px",flex:"1 1 0%"},children:l.jsx(f.default,{})}),l.jsx(p.Z.Item,{name:"gender",label:"Giới t\xednh",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsxs)(j.Z,{placeholder:"Select a currency type",defaultValue:"male",children:[l.jsx(v.W,{value:"male",children:"Nam"}),l.jsx(v.W,{value:"female",children:"Nữ"}),l.jsx(v.W,{value:"other",children:"Kh\xe1c"})]})}),l.jsx(p.Z.Item,{name:"phone_number",label:"Số điện thoại",rules:[{required:!0,message:"Vui l\xf2ng nhập số điện thoại!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:l.jsx(f.default,{})}),l.jsx(p.Z.Item,{name:"date_of_birth",label:"Ng\xe0y sinh",initialValue:"",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},getValueFromEvent:e=>e?.format("YYYY-MM-DD"),getValueProps:e=>({value:e?b()(e):""}),children:l.jsx(y.default,{placeholder:"Chọn ng\xe0y sinh",style:{width:"100%"}})}),l.jsx(p.Z.Item,{name:"picture_url",label:"Ảnh đại diện",className:"!m-0",style:{minWidth:"320px",flex:"1 1 0%"},children:l.jsx(g.default,{maxCount:1,action:"",listType:"picture-card",fileList:P,onPreview:e=>{W((0,c.BZ)(e.url))},onChange:({file:e})=>{"removed"===e.status?I([]):I([e])},children:!(P.length>0)&&A})})]}),l.jsx(p.Z.Item,{style:{width:"100%",display:"flex",justifyContent:"end"},children:l.jsx(m.ZP,{type:"primary",htmlType:"submit",children:"Cập nhật"})})]})})]})}},40133:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});let l=(0,s(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\customers\error.tsx#default`)},24398:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});let l=(0,s(45347).createProxy)(String.raw`E:\riot\sparking\sp_1\src\app\customers\layout.tsx#default`)},28204:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a}),s(72051);var l=s(54564);let i={size:{width:32,height:32},contentType:"image/png"};async function a(e){let{__metadata_id__:t,...s}=e.params,a=(0,l.fillMetadataSegment)(".",s,"icon"),{generateImageMetadata:r}=i;function n(e,t){let s={alt:e.alt,type:e.contentType||"image/png",url:a+(t?"/"+t:"")+"?4a97cfd375538d02"},{size:l}=e;return l&&(s.sizes=l.width+"x"+l.height),s}return r?(await r({params:s})).map((e,t)=>{let s=(e.id||t)+"";return n(e,s)}):[n(i,"")]}}};