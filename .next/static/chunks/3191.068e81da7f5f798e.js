"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3191],{3191:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=n(57437),l=n(2265),a=n(54011),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},i=(0,l.forwardRef)(function(e,t){return l.createElement(a.P,o({},e,{chartType:"Line",ref:t}))}),c=n(11632),s=n(45747),d=n(40776),u=n(68575);function f(){let e=new Date().getFullYear(),{datas:t}=(0,u.v9)(e=>e.source_opportunity),[n,a]=(0,l.useState)([]),[o,f]=(0,l.useState)(e);return(0,l.useEffect)(()=>{console.log(o),(async()=>{if(o){let e={time_first:new Date(o+"-01-01").getTime(),time_end:new Date(o+"-12-31").getTime()},n=await d.Z.getFilterOpportunity(e);if(200===n.statusCode){let e=n.data;a(Array.from({length:12*t.length}).map((n,r)=>{let l=Math.floor(r/12),a=r%12,o=t[l].type_source_id,i=e.filter(e=>new Date(e.created_at).getMonth()===a&&e.type_source.type_source_id===o);return{month:"Th\xe1ng "+(a+1),type:t[l].name,value:i.length}}))}}})()},[o]),(0,r.jsxs)("div",{className:"p-4 flex flex-col gap-4 max-w-full border-b-[1px]",children:[(0,r.jsx)("div",{className:"p-4 flex justify-between flex-wrap gap-2",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,r.jsx)(c.Z,{placeholder:"Chọn năm",showSearch:!0,value:o,onChange:e=>{f(Number(e))},filterOption:(e,t)=>{var n;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(n=null==t?void 0:t.children)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},children:Array.from({length:e-2018+1},(e,t)=>2018+t).map(e=>(0,r.jsx)(s.W,{value:e.toString(),children:e},e.toString()))})})}),(0,r.jsx)("p",{className:"p-4 text-xl font-semibold",children:"Thống k\xea nguồn cơ hội"}),(0,r.jsxs)("div",{className:"w-full",children:[" ",(0,r.jsx)(()=>(0,r.jsx)(i,{data:n,xField:"month",yField:"value",colorField:"type",axis:{y:{labelFormatter:e=>"".concat(e).replace(/\d{1,3}(?=(\d{3})+$)/g,e=>"".concat(e,","))}},legend:{color:{title:!1,position:"right",rowPadding:5}},onReady:e=>{let{chart:t,...n}=e;t.on("afterrender",()=>{console.log("ca")},!0),t.on("element:click",e=>{console.log("bam")})}}),{})," "]})]})}}}]);