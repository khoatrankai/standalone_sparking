"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3519],{13969:function(e,t,a){a.d(t,{Z:function(){return U}});var l=a(57437),r=a(2265),n=a(91626),s=a(3810),i=a(17166),d=a(68575),c=a(80618),o=a(27648),u=a(61273),h=a(99376),x=a(22744),m=a(55536),p=a(58970),g=a(44967),j=a(16836),f=a(91250),v=a(46475),y=a(29487),w=a(94295),Z=a(67776),N=a(78049),b=a(18452),C=a(63445),S=e=>{let{refBtnRole:t}=e,[a,s]=(0,r.useState)(!1),[i,c]=(0,r.useState)(-1),o=(0,d.I0)(),{datas:u}=(0,d.v9)(e=>e.role_projects),h=e=>{c(e),k.setFieldsValue(null==u?void 0:u[e])},[x,m]=(0,r.useState)(!1),{postdata:S}=(0,v.Z)(),[_]=(0,y.Z)(),[k]=(0,y.Z)(),[I,P]=(0,r.useState)(""),T=async()=>{200===await S(()=>N.Z.deleteRole([null!=I?I:""]))&&(o((0,b.H)()),P(""))},F=async e=>{console.log(e);try{let t=await S(()=>N.Z.createRole(e));201===t&&(o((0,b.H)()),_.resetFields(),m(!1))}catch(e){console.error("Error creating product:",e)}},U=async e=>{try{let t=await S(()=>{var t;return N.Z.updateRole(null!==(t=null==u?void 0:u[null!=i?i:0].role_id)&&void 0!==t?t:"",e)});200===t&&(o((0,b.H)()),o((0,C.b)()),c(-1))}catch(e){console.error("Error creating product:",e)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{s(!0)},ref:t,children:"Vị tr\xed dự \xe1n"}),(0,l.jsx)(p.Z,{title:(0,l.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,l.jsx)("span",{children:"Vị tr\xed dự \xe1n"}),(0,l.jsx)(n.ZP,{className:"text-white font-semibold bg-orange-500",icon:(0,l.jsx)(w.gyF,{}),type:"default",onClick:()=>{_.resetFields(),m(!x)}})]}),open:a,onCancel:()=>{s(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!x,children:(0,l.jsxs)(g.Z,{form:_,onFinish:F,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,l.jsx)(g.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(j.default,{placeholder:"Nhập t\xean loại"})}),(0,l.jsx)(g.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(j.default,{placeholder:"Nhập tag loại"})}),(0,l.jsx)(g.Z.Item,{style:{display:"flex",minWidth:"100%",justifyContent:"end",margin:"0"},children:(0,l.jsx)(n.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{_.submit()},children:"Th\xeam"})})]})}),(0,l.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(i>-1),children:(0,l.jsxs)(g.Z,{form:k,onFinish:U,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,l.jsx)(g.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(j.default,{placeholder:"Nhập t\xean loại"})}),(0,l.jsx)(g.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(j.default,{placeholder:"Nhập tag loại"})}),(0,l.jsxs)(g.Z.Item,{style:{display:"flex",minWidth:"100%",gap:"2px",justifyContent:"end",margin:"0"},children:[(0,l.jsx)(n.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),(0,l.jsx)(n.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{c(-1)},children:"Huỷ"})]})]})}),(0,l.jsx)("div",{className:"border-t-2 w-full overflow-x-auto",children:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(f.Z,{columns:[{title:"Tag loại",dataIndex:"name_tag",width:"20%",key:"name_tag",render:e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("strong",{className:"flex gap-2 items-center",children:e})})},{title:"T\xean loại",dataIndex:"name",width:"40%",key:"name",render:(e,t,a)=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,(0,l.jsx)(n.ZP,{type:"link",onClick:()=>{h(a)},icon:(0,l.jsx)(Z.FNg,{})}),(0,l.jsx)(n.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>{var e;return P(null!==(e=null==t?void 0:t.role_id)&&void 0!==e?e:"")},children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:u,pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}),(0,l.jsx)(p.Z,{open:""!==I,title:"X\xf3a dữ liệu",onOk:T,onCancel:()=>{P("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})};function _(){var e,t,a,r,p,g,j,f,v,y,w,Z,N,b,C;let{customerID:_}=(0,h.useParams)(),{datas:k}=(0,d.v9)(e=>e.get_project_about);return(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"flex gap-1 flex-wrap",children:[(0,l.jsx)(i.Z,{}),(0,l.jsx)(c.Z,{}),(0,l.jsx)(S,{}),(0,l.jsx)(o.default,{href:"/project/gantt",children:(0,l.jsx)(n.ZP,{icon:(0,l.jsx)(u.Wq9,{})})}),(0,l.jsx)(o.default,{href:"/detail/project",children:(0,l.jsx)(n.ZP,{icon:(0,l.jsx)(x.B1I,{})})}),(0,l.jsx)(o.default,{href:"/management/all_project",children:(0,l.jsx)(n.ZP,{icon:(0,l.jsx)(m.hRG,{})})})]}),!_&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"font-semibold text-[#1BA399]",children:"T\xf3m lược dự \xe1n"}),(0,l.jsxs)("div",{className:"flex justify-around gap-2 flex-wrap",children:[(0,l.jsxs)(s.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null!==(w=null==k?void 0:null===(t=k.find)||void 0===t?void 0:null===(e=t.call(k,e=>"waiting"===e.status))||void 0===e?void 0:e.count.toLocaleString("vi-VN"))&&void 0!==w?w:0}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Chưa bắt đầu"})]}),(0,l.jsxs)(s.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null!==(Z=null==k?void 0:null===(r=k.find)||void 0===r?void 0:null===(a=r.call(k,e=>"start"===e.status))||void 0===a?void 0:a.count.toLocaleString("vi-VN"))&&void 0!==Z?Z:0}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Đang thực hiện"})]}),(0,l.jsxs)(s.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null!==(N=null==k?void 0:null===(g=k.find)||void 0===g?void 0:null===(p=g.call(k,e=>"pause"===e.status))||void 0===p?void 0:p.count.toLocaleString("vi-VN"))&&void 0!==N?N:0}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Tạm ngưng"})]}),(0,l.jsxs)(s.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null!==(b=null==k?void 0:null===(f=k.find)||void 0===f?void 0:null===(j=f.call(k,e=>"cancel"===e.status))||void 0===j?void 0:j.count.toLocaleString("vi-VN"))&&void 0!==b?b:0}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Đ\xe3 hủy"})]}),(0,l.jsxs)(s.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null!==(C=null==k?void 0:null===(y=k.find)||void 0===y?void 0:null===(v=y.call(k,e=>"completed"===e.status))||void 0===v?void 0:v.count.toLocaleString("vi-VN"))&&void 0!==C?C:0}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Ho\xe0n th\xe0nh"})]})]})]})]})}var k=a(11632),I=a(56771),P=a(48302),T=a(65624);function F(){let e=(0,T.Z)(["admin-top","project","project-edit"]),{customerID:t}=(0,h.useParams)(),[a,i]=(0,r.useState)(25),[c,o]=(0,r.useState)();(0,r.useEffect)(()=>{t&&y((0,C.b)({customer:t}))},[t]);let{datas:u}=(0,d.v9)(e=>e.get_projects),m=[{title:"#",className:"",dataIndex:"project_id",render:(t,a,r)=>(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsxs)("strong",{children:["#",r+1,"."]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(n.ZP,{type:"text",ghost:!0,className:" text-blue-600",onClick:()=>{window.location.href="/project/info/".concat(t)},children:"Xem"}),e&&(0,l.jsx)(P.Z,{ID:t})]})]}),sorter:(e,t)=>e.project_id.localeCompare(t.project_id)},{title:"T\xean dự \xe1n",className:"",dataIndex:"name",render:e=>(0,l.jsx)(l.Fragment,{children:e&&e.length>15?"".concat(e.slice(0,15),"..."):e}),sorter:(e,t)=>{var a;return(null===(a=e.name)||void 0===a?void 0:a.localeCompare(t.name||""))||0}},{title:"Kh\xe1ch h\xe0ng",className:"",dataIndex:["customer","name_company"],render:e=>(0,l.jsx)(l.Fragment,{children:e||"N/A"})},{title:"Gi\xe1 trị",className:"",dataIndex:"price",render:e=>e?"".concat(e.toLocaleString("vi-VN"),"đ"):"N/A",sorter:(e,t)=>(e.price||0)-(t.price||0)},{title:"Ng\xe0y bắt đầu",className:"",dataIndex:"start_date",render:e=>new Date(e).toLocaleDateString("vi-VN")},{title:"Ng\xe0y kết th\xfac",className:"",dataIndex:"end_date",render:e=>new Date(e).toLocaleDateString("vi-VN")},{title:"Trạng th\xe1i",className:"",dataIndex:"status",render:e=>{let t="",a="";switch(e){case"waiting":t="gold",a="Đang chờ";break;case"start":t="blue",a="Bắt đầu";break;case"pause":t="orange",a="Tạm dừng";break;case"cancel":t="red",a="Đ\xe3 hủy";break;case"completed":t="green",a="Ho\xe0n th\xe0nh";break;default:t="default",a="Kh\xf4ng x\xe1c định"}return(0,l.jsx)(s.Z,{className:"",color:t,children:a})},sorter:(e,t)=>e.status.localeCompare(t.status)}],g=e=>{o(null==u?void 0:u.filter(t=>(t.project_id+" "+t.name+" "+t.customer+" "+t.status).toLowerCase().includes(e.toLowerCase())))},{postdata:j}=(0,v.Z)(),y=(0,d.I0)(),[w,Z]=(0,r.useState)(!1),[b,S]=(0,r.useState)([]),_=async()=>{200===await j(()=>N.Z.deleteProject(b))&&(y((0,C.b)()),S([]),Z(!1))},F=(0,h.useSearchParams)();return(0,r.useEffect)(()=>{let e=F.get("id");u&&e?g(e):o(u.map((e,t)=>({...e,key:t})))},[u,F]),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(k.Z,{defaultValue:a,style:{width:83},onChange:e=>i(e),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"All"}]}),(0,l.jsx)(n.ZP,{hidden:!(b.length>0),children:"Xuất ra"}),(0,l.jsx)(n.ZP,{onClick:()=>{Z(!0)},danger:!0,hidden:!(b.length>0),className:"text-xl",icon:(0,l.jsx)(x.FH3,{})}),(0,l.jsx)(p.Z,{open:w,title:"X\xf3a dữ liệu",onOk:_,onCancel:()=>{Z(!1)},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]}),(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(I.Z,{onChange:e=>g(e.target.value),placeholder:"Search",style:{width:200}})})]}),(0,l.jsx)("div",{className:"w-full overflow-auto",children:(0,l.jsx)("div",{className:"min-w-fit",children:(0,l.jsx)(f.Z,{columns:m,rowSelection:{onChange:(e,t)=>{S(t.map(e=>e.project_id))}},dataSource:c,scroll:{x:"max-content"},pagination:{pageSize:a,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}function U(){let e=(0,T.Z)(["admin-top","project","project-edit"]);return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[e&&(0,l.jsx)("div",{className:"rounded-md",children:(0,l.jsx)(_,{})}),(0,l.jsx)("div",{className:"rounded-md",children:(0,l.jsx)(F,{})})]})})}},48302:function(e,t,a){var l=a(57437),r=a(2265),n=a(91626),s=a(58970),i=a(44967),d=a(16836),c=a(11632),o=a(23496),u=a(90136),h=a(56612),x=a(20347),m=a(96473),p=a(29487),g=a(68575),j=a(78049),f=a(46475),v=a(63445),y=a(80618),w=a(4599),Z=a(96748),N=a(79587),b=a(71096),C=a.n(b),S=a(16114),_=a(79820),k=a(99397),I=a(95805),P=a(49663),T=a(32489),F=a(75060),U=a(69174),V=a(12381);t.Z=e=>{var t;let{ID:a,refBtnProject:b,type:R,setID:O}=e,L=(0,r.useRef)(),B=(0,r.useRef)(),[W,A]=(0,r.useState)(""),[E,D]=(0,r.useState)(""),[Y,q]=(0,r.useState)([]),[G,H]=(0,r.useState)(!1),[M,K]=(0,r.useState)([]),{datas:X}=(0,g.v9)(e=>e.type_projects),{datas:z}=(0,g.v9)(e=>e.role_projects),{datas:J}=(0,g.v9)(e=>e.get_opportunities),{datas:$}=(0,g.v9)(e=>e.infos_customer),[Q]=(0,p.Z)(),ee=(0,g.I0)(),{datas:et}=(0,g.v9)(e=>e.get_users),ea=null===(t=null!=et?et:[])||void 0===t?void 0:t.filter(e=>!Y.some(t=>t.user===e.user_id)),{postdata:el}=(0,f.Z)(),er=async()=>{let e=await j.Z.getProject(a);if(200===e.statusCode){var t,l;Q.setFieldsValue(e.data),K([{uid:e.data.project_id,name:"logo.png",status:"done",url:e.data.picture_url}]),q(null!==(l=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.users)&&void 0!==l?l:[])}},en=e=>{q(t=>t.filter(t=>t.user!==e))},es=async e=>{try{var t;let l=(0,N.Z)(Object.entries({...e,start_date:e.start_date?e.start_date.toISOString():void 0,end_date:e.end_date?e.end_date.toISOString():void 0,picture_url:M.length>0?[null==M?void 0:null===(t=M[0])||void 0===t?void 0:t.originFileObj]:null,users:JSON.stringify(Y)}).reduce((e,t)=>{let[a,l]=t;return null!=l&&(e[a]=l),e},{})),r=await el(()=>j.Z.updateProject(a,l));(200===r||201===r)&&(ee((0,v.b)()),Q.resetFields(),H(!1),"gantt"===R&&O&&(ee((0,Z.C)()),O("")))}catch(e){console.error("Error updating project:",e)}},ei=(0,l.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,l.jsx)(m.Z,{}),(0,l.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.ZP,{hidden:!!b,type:"text",className:"text-xs text-yellow-500 font-semibold",onClick:()=>{H(!0),er()},ref:b,children:"Chỉnh sửa"}),(0,l.jsx)(s.Z,{title:"Cập nhật dự \xe1n",open:G,onCancel:()=>{H(!1),O&&O("")},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,l.jsxs)(i.Z,{layout:"vertical",form:Q,onFinish:es,style:{display:"flex",flexWrap:"wrap",gap:"12px"},children:[(0,l.jsx)(i.Z.Item,{name:"name",label:"T\xean dự \xe1n",style:{minWidth:"320px",flex:"1 1 0%"},rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean dự \xe1n"}],children:(0,l.jsx)(d.default,{placeholder:"T\xean dự \xe1n"})}),(0,l.jsx)(i.Z.Item,{name:"customer",label:"Kh\xe1ch h\xe0ng",style:{minWidth:"320px",flex:"1 1 0%"},rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean kh\xe1ch h\xe0ng"}],children:(0,l.jsx)(c.Z,{placeholder:"Chọn kh\xe1ch h\xe0ng",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(o.Z,{style:{margin:"8px 0"}}),(0,l.jsx)(n.ZP,{type:"link",onClick:()=>{var e;null===(e=B.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==$?void 0:$.map(e=>(0,l.jsx)(c.Z.Option,{value:e.info_id,children:e.name_company},e.info_id))})}),(0,l.jsx)(i.Z.Item,{name:"opportunity",label:"Cơ hội",style:{minWidth:"320px",flex:"1 1 0%"},rules:[],children:(0,l.jsx)(c.Z,{placeholder:"Chọn cơ hội",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},children:null==J?void 0:J.map(e=>(0,l.jsx)(c.Z.Option,{value:e.opportunity_id,children:e.company_name},e.opportunity_id))})}),(0,l.jsx)(i.Z.Item,{name:"type",label:"Loại dự \xe1n",style:{minWidth:"320px",flex:"1 1 0%"},rules:[{required:!0,message:"Vui l\xf2ng chọn loại dự \xe1n"}],children:(0,l.jsx)(c.Z,{placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(o.Z,{style:{margin:"8px 0"}}),(0,l.jsx)(n.ZP,{type:"link",onClick:()=>{var e;null===(e=L.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==X?void 0:X.map(e=>(0,l.jsx)(c.Z.Option,{value:e.type_id,children:e.name_type},e.type_id))})}),(0,l.jsx)(i.Z.Item,{name:"status",label:"Trạng th\xe1i",rules:[{required:!0,message:"Vui l\xf2ng chọn trạng th\xe1i"}],style:{minWidth:"220px",flex:"1 1 0%"},children:(0,l.jsxs)(c.Z,{placeholder:"Chọn trạng th\xe1i",children:[(0,l.jsx)(c.Z.Option,{value:"waiting",children:"Đang chờ"}),(0,l.jsx)(c.Z.Option,{value:"start",children:"Bắt đầu"}),(0,l.jsx)(c.Z.Option,{value:"pause",children:"Tạm dừng"}),(0,l.jsx)(c.Z.Option,{value:"cancel",children:"Hủy"}),(0,l.jsx)(c.Z.Option,{value:"completed",children:"Ho\xe0n th\xe0nh"})]})}),(0,l.jsx)(i.Z.Item,{name:"price",label:"Gi\xe1 trị (vnđ)",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(u.Z,{placeholder:"Gi\xe1 trị",className:"w-full",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>null==e?void 0:e.replace(/\$\s?|(,*)/g,"")})}),(0,l.jsx)(i.Z.Item,{name:"time_job",label:"Thời gian (giờ)",style:{minWidth:"220px",flex:"1 1 0%"},children:(0,l.jsx)(u.Z,{placeholder:"Thời gian c\xf4ng việc",className:"w-full"})}),(0,l.jsx)(i.Z.Item,{name:"start_date",label:"Ng\xe0y bắt đầu",initialValue:"",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},getValueFromEvent:e=>null==e?void 0:e.format("YYYY-MM-DD"),getValueProps:e=>({value:e?C()(e):""}),children:(0,l.jsx)(h.default,{placeholder:"Chọn ng\xe0y bắt đầu",style:{width:"100%"}})}),(0,l.jsx)(i.Z.Item,{name:"end_date",label:"Ng\xe0y kết th\xfac",initialValue:"",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},getValueFromEvent:e=>null==e?void 0:e.format("YYYY-MM-DD"),getValueProps:e=>({value:e?C()(e):""}),children:(0,l.jsx)(h.default,{placeholder:"Chọn ng\xe0y kết th\xfac",style:{width:"100%"}})}),(0,l.jsx)(i.Z.Item,{name:"user_support",label:"Nh\xe2n vi\xean hỗ trợ",style:{minWidth:"220px",flex:"1 1 0%"},children:(0,l.jsx)(c.Z,{placeholder:"Chọn nh\xe2n vi\xean",children:null==et?void 0:et.map(e=>(0,l.jsxs)(c.Z.Option,{value:e.user_id,children:[e.first_name," ",e.last_name]},e.user_id))})}),(0,l.jsx)(i.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:(0,l.jsx)(d.default.TextArea,{placeholder:"M\xf4 tả dự \xe1n",autoSize:{minRows:3}})}),(0,l.jsx)(i.Z.Item,{name:"picture_url",label:"Ảnh đại diện",className:"!m-0",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(x.default,{maxCount:1,action:"",listType:"picture-card",fileList:M,onPreview:e=>{ee((0,S.BZ)(e.url))},onChange:e=>{let{file:t}=e;"removed"===t.status?K([]):K([t])},children:M.length>0?null:ei})}),(0,l.jsx)(i.Z.Item,{className:"!m-0",style:{minWidth:"100%",flex:"1 1 0%"},children:(0,l.jsxs)(_.Zb,{className:"w-full",children:[(0,l.jsx)(_.Ol,{children:(0,l.jsxs)(_.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),"Ph\xe2n c\xf4ng dự \xe1n"]})}),(0,l.jsxs)(_.aY,{className:"space-y-4",children:[(0,l.jsx)(_.Zb,{className:"border-dashed border-2 border-gray-200",children:(0,l.jsx)(_.aY,{className:"p-4",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,l.jsx)(k.Z,{className:"w-4 h-4"}),"Th\xeam th\xe0nh vi\xean"]}),0===ea.length?(0,l.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,l.jsx)(I.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,l.jsx)("p",{children:"Tất cả người d\xf9ng đ\xe3 được ph\xe2n c\xf4ng"})]}):(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(F._,{children:"Chọn nh\xe2n vi\xean"}),(0,l.jsx)(c.Z,{placeholder:"Chọn nh\xe2n vi\xean",className:"h-14",value:W,onChange:A,children:null==ea?void 0:ea.map(e=>(0,l.jsx)(c.Z.Option,{value:e.user_id,children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"font-medium",children:e.first_name+" "+e.last_name}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:e.email})]})},e.user_id))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(F._,{children:"Chọn vai tr\xf2"}),(0,l.jsx)(c.Z,{placeholder:"Chọn vai tr\xf2",className:"h-14",value:E,onChange:D,children:null==z?void 0:z.map(e=>{var t;return(0,l.jsx)(c.Z.Option,{value:null!==(t=e.role_id)&&void 0!==t?t:"",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(U.C,{variant:"outline",className:"text-xs",children:e.name_tag}),(0,l.jsx)("span",{children:e.name})]})},e.role_id)})})]}),(0,l.jsx)("div",{className:"flex items-end",children:(0,l.jsxs)(V.Z2,{onClick:()=>{if(!W||!E){alert("Vui l\xf2ng chọn người d\xf9ng v\xe0 vai tr\xf2");return}if(W&&E){let e={user:W,role:E};q(t=>[...t,e]),A(""),D("")}},disabled:!W||!E,className:"w-full",children:[(0,l.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"Th\xeam"]})})]})]})})}),Y.length>0&&(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,l.jsx)(P.Z,{className:"w-4 h-4"}),"Th\xe0nh vi\xean đ\xe3 ph\xe2n c\xf4ng (",Y.length,")"]}),(0,l.jsx)("div",{className:"space-y-2",children:Y.map(e=>{var t,a,r,n,s;return(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(I.Z,{className:"w-4 h-4 text-blue-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:(null==et?void 0:null===(t=et.find(t=>t.user_id===e.user))||void 0===t?void 0:t.first_name)+" "+(null==et?void 0:null===(a=et.find(t=>t.user_id===e.user))||void 0===a?void 0:a.last_name)}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:null==et?void 0:null===(r=et.find(t=>t.user_id===e.user))||void 0===r?void 0:r.email})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(U.C,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:null==z?void 0:null===(n=z.find(t=>t.role_id===e.role))||void 0===n?void 0:n.name_tag}),(0,l.jsx)("span",{className:"text-sm text-gray-600",children:null==z?void 0:null===(s=z.find(t=>t.role_id===e.role))||void 0===s?void 0:s.name}),(0,l.jsx)(V.Z2,{type:"button",variant:"ghost",size:"sm",onClick:()=>en(e.user),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,l.jsx)(T.Z,{className:"w-4 h-4"})})]})]},e.user)})})]})]})]})}),(0,l.jsx)(i.Z.Item,{style:{width:"100%",display:"flex",justifyContent:"end"},children:(0,l.jsx)(n.ZP,{type:"primary",htmlType:"submit",children:"Cập nhật"})})]})}),(0,l.jsx)(y.Z,{refBtnGroup:L}),(0,l.jsx)(w.Z,{refBtnCustomer:B})]})}},16114:function(e,t,a){a.d(t,{BZ:function(){return r},Ln:function(){return n}});let l=(0,a(20301).oM)({name:"image-preview",initialState:{value:""},reducers:{onChangeImagePreview:(e,t)=>{e.value=t.payload},onDeleteImagePreview:e=>{e.value=""}}}),{onChangeImagePreview:r,onDeleteImagePreview:n}=l.actions;t.ZP=l.reducer},96748:function(e,t,a){a.d(t,{C:function(){return n}});var l=a(78049),r=a(20301);let n=(0,r.hg)("project/fetchProjectTypeFulls",async(e,t)=>{try{return await l.Z.getTypeFulls()}catch(e){return t.rejectWithValue("Failed to fetch project types")}}),s=(0,r.oM)({name:"type_full_project",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data)}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=s},18452:function(e,t,a){a.d(t,{H:function(){return n}});var l=a(78049),r=a(20301);let n=(0,r.hg)("project/fetchProjectRoles",async(e,t)=>{try{return await l.Z.getRoles()}catch(e){return t.rejectWithValue("Failed to fetch project roles")}}),s=(0,r.oM)({name:"role_project",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data)}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=s},41259:function(e,t,a){a.d(t,{C:function(){return n}});var l=a(58143),r=a(20301);let n=(0,r.hg)("user/fetchUserInfo",async(e,t)=>{try{return await l.Z.getUsers()}catch(e){return t.rejectWithValue("Failed to fetch user info")}}),s=(0,r.oM)({name:"user_info",initialState:{datas:null,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data)}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=s},28223:function(e,t,a){a.d(t,{Y:function(){return n}});var l=a(83464);let r=l.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"application/json"},withCredentials:!0}),n=l.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});t.Z=r},58143:function(e,t,a){var l=a(90382),r=a(28223);t.Z={getUsers:async()=>{try{return(await r.Z.get("/user/all")).data}catch(e){throw(0,l.S)(e),e}},getProfile:async()=>{try{return(await r.Z.get("/user/profile",{withCredentials:!0})).data}catch(e){throw(0,l.S)(e),e}},getUserIDAdmin:async e=>{try{return(await r.Z.get("/user/admin/id/".concat(e))).data}catch(e){throw(0,l.S)(e),e}},getUserIDAdminByUser:async()=>{try{return(await r.Z.get("/user/user")).data}catch(e){throw(0,l.S)(e),e}},loginUser:async e=>(await r.Z.post("/auth/login",e,{withCredentials:!0})).data,sendSign:async e=>(await r.Z.post("/auth/send-req-sign",e,{withCredentials:!0})).data,logoutUser:async()=>(await r.Z.post("/auth/logout")).data,createUser:async e=>{try{return(await r.Y.post("/user/create",e)).data}catch(e){throw(0,l.S)(e),e}},deleteUser:async e=>{try{return(await r.Z.delete("/user",{data:e})).data}catch(e){throw(0,l.S)(e),e}},updateUser:async(e,t)=>{try{return(await r.Y.put("/user/update/".concat(e),t)).data}catch(e){throw(0,l.S)(e),e}},updateUserProfile:async e=>{try{return(await r.Y.put("/user/update-profile",e)).data}catch(e){throw(0,l.S)(e),e}},updatePasswordUser:async e=>{try{return(await r.Z.put("/user/update-password",e)).data}catch(e){throw(0,l.S)(e),e}},getCategoryRoleFull:async()=>{try{return(await r.Z.get("/user/category-role-full")).data}catch(e){throw(0,l.S)(e),e}},getRoleUserFullByID:async e=>{try{return(await r.Z.get("/user/get-full-role-user-id/".concat(e))).data}catch(e){throw(0,l.S)(e),e}},getRoleUserFullByUser:async()=>{try{return(await r.Z.get("/user/get-full-role-user")).data}catch(e){throw(0,l.S)(e),e}},getRoleUserFullByAccess:async()=>{try{return(await r.Z.get("/user/get-full-role-user-access/")).data}catch(e){throw(0,l.S)(e),e}},updateRoleUserFullByID:async(e,t)=>{try{return(await r.Z.post("/user/full-role-user-id/".concat(e),t)).data}catch(e){throw(0,l.S)(e),e}},updateGroupRole:async(e,t)=>{try{return(await r.Z.put("/user/group-role/".concat(e),t)).data}catch(e){throw(0,l.S)(e),e}},getRoleByGroup:async e=>{try{return(await r.Z.get("/user/group-role/".concat(e))).data}catch(e){throw(0,l.S)(e),e}},getGroupUser:async()=>{try{return(await r.Z.get("/user/get-group-user")).data}catch(e){throw(0,l.S)(e),e}},getNotifyUser:async(e,t)=>{try{return(await r.Z.get("/user/get-notify?page=".concat(e,"&limit=").concat(t))).data}catch(e){throw(0,l.S)(e),e}},updateNotifyUser:async e=>{try{if(e)return(await r.Z.put("/user/update-notify/".concat(e))).data;return(await r.Z.put("/user/update-all-notify")).data}catch(e){throw(0,l.S)(e),e}},getCountNotifyUser:async()=>{try{return(await r.Z.get("/user/get-count-notify")).data}catch(e){throw(0,l.S)(e),e}},createGroupUser:async e=>{try{return(await r.Z.post("/user/create-group-user",e)).data}catch(e){throw(0,l.S)(e),e}},updateGroupUser:async(e,t)=>{try{return(await r.Z.put("/user/update-group-user/".concat(e),t)).data}catch(e){throw(0,l.S)(e),e}},deleteGroupUser:async e=>{try{return(await r.Z.delete("/user/group-user",{data:e})).data}catch(e){throw(0,l.S)(e),e}},getFilterUser:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,l]=e;null!=l&&t.append(a,l.toString())}),(await r.Z.get("/user/get-user-filter?".concat(t.toString()))).data}catch(e){throw(0,l.S)(e),e}},getTimeKeeping:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,l]=e;null!=l&&t.append(a,l.toString())}),(await r.Z.get("/user/timekeeping?".concat(t.toString()))).data}catch(e){throw(0,l.S)(e),e}},getTimeKeepingPerson:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,l]=e;null!=l&&t.append(a,l.toString())}),(await r.Z.get("/user/timekeeping-person?".concat(t.toString()))).data}catch(e){throw(0,l.S)(e),e}},createTimeKeeping:async()=>{try{return(await r.Z.post("/user/timekeeping")).data}catch(e){throw(0,l.S)(e),e}},checkTimeKeeping:async()=>{try{return(await r.Z.get("/user/check-timekeeping")).data}catch(e){throw(0,l.S)(e),e}}}},90382:function(e,t,a){a.d(t,{S:function(){return r}});var l=a(7261);let r=e=>{var t,a,r;let n=(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"An unexpected error occurred",s=null===(r=e.response)||void 0===r?void 0:r.status;l.Am.dismiss(),403===s?l.Am.error("Bạn kh\xf4ng c\xf3 quyền"):l.Am.error(n)}}}]);