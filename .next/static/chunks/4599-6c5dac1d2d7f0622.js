(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4599],{4599:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var l=n(57437),s=n(46475),r=n(3224),a=n(64985),i=n(53757),o=n(96473),d=n(91626),c=n(58970),u=n(44967),h=n(16836),p=n(11632),m=n(23496),x=n(20347),g=n(45747),f=n(2265),y=n(32768),j=n(68575),v=n(31129),b=n(29487),C=n(79587),Z=n(22744),w=n(66789),N=n(45168),_=n(94295);n(97174);var k=n(69960),S=n.n(k),I=n(28223),W=n(90382),F={getInfo:async e=>{try{return(await I.Z.post("/ai-gemini",{text:e})).data}catch(e){throw(0,W.S)(e),e}}},P=n(7261);function T(e){let{refBtnCustomer:t,setData:n}=e,[s,r]=(0,f.useState)(!1),[a,i]=(0,f.useState)(!1),[o,u]=(0,f.useState)(null),[h,p]=(0,f.useState)(null),m=()=>{r(!1)},{Dragger:g}=x.default,j=async e=>{i(!0);try{S().recognize(e,"vie",{}).then(e=>{let{data:{text:t}}=e;p(t)})}catch(e){return""}},v=async()=>{if(""!==h){let e=await F.getInfo(null!=h?h:"");200===e.statusCode&&(P.Am.success("Đ\xe3 nhận diện th\xe0nh c\xf4ng"),n(e.data),u(null),p(null),m()),i(!1)}};return(0,f.useEffect)(()=>{h&&v()},[h]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",icon:(0,l.jsx)(N.jCY,{}),onClick:()=>{r(!0)},ref:t,children:"Qu\xe9t th\xf4ng tin"}),(0,l.jsxs)(c.Z,{title:"Qu\xe9t th\xf4ng tin",open:s,onCancel:m,footer:null,width:"100%",style:{maxWidth:"600px"},children:[(0,l.jsxs)(g,{name:"file",multiple:!1,beforeUpload:e=>(u(URL.createObjectURL(e)),!0),onChange(e){let{status:t}=e.file;"done"===t?console.log(e):"error"===t&&console.log(e)},onDrop(e){console.log("Dropped files",e.dataTransfer.files)},showUploadList:!1,className:"".concat(o?"hidden":""),children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon flex justify-center items-center",children:(0,l.jsx)(_.LCy,{className:"text-6xl"})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,l.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]}),o&&(0,l.jsxs)("div",{style:{marginTop:20},className:"relative w-fit  rounded-md overflow-hidden",children:[(0,l.jsx)(d.ZP,{className:"absolute top-2 right-2 z-40",icon:(0,l.jsx)(y.Jvf,{className:" text-2xl  text-white hover:text-red-500"}),type:"text",onClick:()=>{u(null)}}),(0,l.jsx)(w.Z,{className:"w-full h-full object-contain",width:500,src:o,preview:!1}),(0,l.jsxs)("div",{className:" ".concat(a?"absolute inset-0 z-50 bg-black/70 flex items-center gap-2 flex-col justify-center":"hidden"),children:[(0,l.jsx)("div",{className:"loader"}),(0,l.jsx)("p",{className:"text-white pt-4",children:"Đang nhận diện xin vui l\xf2ng chờ"})]})]}),(0,l.jsx)("div",{className:"flex w-full justify-end items-center mt-4 ".concat(o?"":"hidden"),children:(0,l.jsx)(d.ZP,{className:"text-sm",type:"primary",onClick:()=>{j(null!=o?o:"")},children:"Lấy th\xf4ng tin"})})]})]})}function A(e){let{refBtnCustomer:t}=e,[n,w]=(0,f.useState)(),N=(0,f.useRef)(),[_,k]=(0,f.useState)(),{datas:S}=(0,j.v9)(e=>e.province_system),I=(0,f.useRef)(),{postdata:W}=(0,s.Z)(),F=(0,j.I0)(),{datas:P}=(0,j.v9)(e=>e.get_users),{datas:A}=(0,j.v9)(e=>e.get_group_customer),[V]=(0,b.Z)(),[O,L]=(0,f.useState)(!1);(0,f.useEffect)(()=>{n&&V.setFieldsValue({name_company:n.full_name,address_delivery:n.place_of_residence})},[n]);let E=async e=>{let t=(0,C.Z)(Object.entries({...e,picture_url:[null==_?void 0:_.originFileObj]}).reduce((e,t)=>{let[n,l]=t;return null!=l&&(e[n]=l),e},{})),n=await W(()=>i.Z.createInfoCustomer(t));(200===n||201===n)&&(V.resetFields(),L(!1),F((0,a.K)()),F((0,r.m)()))},q=(0,l.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,l.jsx)(o.Z,{}),(0,l.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",icon:(0,l.jsx)(y.b0B,{}),onClick:()=>{L(!0)},ref:t,children:"Th\xeam kh\xe1ch h\xe0ng"}),(0,l.jsxs)(c.Z,{title:"Tạo kh\xe1ch h\xe0ng",open:O,onCancel:()=>{L(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,l.jsx)(d.ZP,{onClick:()=>{var e;null===(e=N.current)||void 0===e||e.click()},icon:(0,l.jsx)(Z.vfz,{}),children:"Qu\xe9t cccd"}),(0,l.jsxs)(u.Z,{layout:"vertical",onFinish:E,form:V,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 h-fit w-fit rounded-lg p-1",children:[(0,l.jsx)(u.Z.Item,{name:"name_company",className:"!m-0",label:"T\xean c\xf4ng ty",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean c\xf4ng ty!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(h.default,{})}),(0,l.jsx)(u.Z.Item,{name:"group_customer",label:"Nh\xf3m kh\xe1ch h\xe0ng",rules:[{required:!0,message:"Vui l\xf2ng nhập nh\xf3m kh\xe1ch h\xe0ng!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(p.Z,{placeholder:"Chọn nh\xf3m",showSearch:!0,filterOption:(e,t)=>{var n;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(n=null==t?void 0:t.children)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(m.Z,{style:{margin:"8px 0"}}),(0,l.jsx)(d.ZP,{type:"link",onClick:()=>{var e;null===(e=I.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==A?void 0:A.map(e=>(0,l.jsx)(g.W,{value:e.group_id,children:e.name_group},e.group_id))})}),(0,l.jsx)(u.Z.Item,{name:"tax_code",label:"M\xe3 số thuế",rules:[{required:!0,message:"Vui l\xf2ng nhập m\xe3 số thuế!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(h.default,{})}),(0,l.jsx)(u.Z.Item,{name:"address_delivery",label:"Địa chỉ giao h\xe0ng",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(h.default,{})}),(0,l.jsx)(u.Z.Item,{name:"province",label:"Tỉnh/Th\xe0nh phố",rules:[{required:!0,message:"Vui l\xf2ng nhập tỉnh/th\xe0nh phố!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(p.Z,{placeholder:"Chọn khu vực",children:null==S?void 0:S.map(e=>(0,l.jsx)(g.W,{value:e.province_id,children:e.name_province},e.province_id))})}),(0,l.jsx)(u.Z.Item,{name:"phone_number",label:"Số điện thoại",rules:[{required:!0,message:"Vui l\xf2ng nhập số điện thoại!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(h.default,{})}),(0,l.jsx)(u.Z.Item,{name:"type_money",label:"Loại tiền tệ",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsxs)(p.Z,{placeholder:"Select a currency type",defaultValue:"vnd",children:[(0,l.jsx)(g.W,{value:"vnd",children:"VND"}),(0,l.jsx)(g.W,{value:"usd",children:"USD"})]})}),(0,l.jsx)(u.Z.Item,{name:"staff_support",label:"Nh\xe2n vi\xean hỗ trợ",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(p.Z,{placeholder:"Chọn nh\xe2n vi\xean",showSearch:!0,filterOption:(e,t)=>{var n,l;return(null!==(l=null==t?void 0:null===(n=t.children)||void 0===n?void 0:n.join(""))&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},children:null==P?void 0:P.map(e=>(0,l.jsxs)(g.W,{value:e.user_id,children:[e.first_name," ",e.last_name]},e.user_id))})}),(0,l.jsx)(u.Z.Item,{name:"website",label:"Website",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(h.default,{})}),(0,l.jsx)(u.Z.Item,{name:"picture_url",label:"Ảnh đại diện",className:"!m-0",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(x.default,{maxCount:1,action:"",listType:"picture-card",onChange:e=>{let{file:t}=e;k(t)},children:q})})]}),(0,l.jsx)(u.Z.Item,{style:{width:"100%",display:"flex",justifyContent:"end"},children:(0,l.jsx)(d.ZP,{type:"primary",htmlType:"submit",children:"Tạo"})})]})]}),(0,l.jsx)(T,{refBtnCustomer:N,setData:w}),(0,l.jsx)(v.Z,{refBtnGroup:I})]})}},31129:function(e,t,n){"use strict";var l=n(57437),s=n(2265),r=n(91626),a=n(58970),i=n(44967),o=n(16836),d=n(91250),c=n(46475),u=n(29487),h=n(94295),p=n(67776),m=n(68575),x=n(53757),g=n(92094),f=n(64985);t.Z=e=>{let{refBtnGroup:t}=e,[n,y]=(0,s.useState)(!1),[j,v]=(0,s.useState)(""),[b,C]=(0,s.useState)(-1),Z=(0,m.I0)(),{datas:w}=(0,m.v9)(e=>e.get_group_customer),N=e=>{C(e),W.setFieldsValue(null==w?void 0:w[e])},[_,k]=(0,s.useState)(!1),{postdata:S}=(0,c.Z)(),[I]=(0,u.Z)(),[W]=(0,u.Z)(),F=async()=>{200===await S(()=>x.Z.deleteGroupCustomer([null!=j?j:""]))&&(Z((0,g.V)()),v(""))},P=async e=>{try{let t=await S(()=>x.Z.createGroupCustomer(e));201===t&&(Z((0,g.V)()),I.resetFields(),k(!1))}catch(e){console.error("Error creating product:",e)}},T=async e=>{try{let t=await S(()=>x.Z.updateGroupCustomer(null==w?void 0:w[null!=b?b:0].group_id,e));200===t&&(Z((0,g.V)()),Z((0,f.K)()),C(-1))}catch(e){console.error("Error creating product:",e)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{y(!0)},ref:t,children:"Nh\xf3m kh\xe1ch h\xe0ng"}),(0,l.jsx)(a.Z,{title:(0,l.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,l.jsx)("span",{children:"Nh\xf3m kh\xe1ch h\xe0ng"}),(0,l.jsx)(r.ZP,{className:"text-white font-semibold bg-orange-500",icon:(0,l.jsx)(h.gyF,{}),type:"default",onClick:()=>{I.resetFields(),k(!_)}})]}),open:n,onCancel:()=>{y(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!_,children:(0,l.jsxs)(i.Z,{form:I,onFinish:P,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,l.jsx)(i.Z.Item,{name:"name_group",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean nh\xf3m"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(o.default,{placeholder:"Nhập t\xean nh\xf3m"})}),(0,l.jsx)(i.Z.Item,{style:{display:"flex",justifyContent:"end",margin:"0"},children:(0,l.jsx)(r.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{I.submit()},children:"Th\xeam"})})]})}),(0,l.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(b>-1),children:(0,l.jsxs)(i.Z,{form:W,onFinish:T,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,l.jsx)(i.Z.Item,{name:"name_group",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean nh\xf3m"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(o.default,{placeholder:"Nhập t\xean nh\xf3m"})}),(0,l.jsxs)(i.Z.Item,{style:{display:"flex",gap:"2px",justifyContent:"end",margin:"0"},children:[(0,l.jsx)(r.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),(0,l.jsx)(r.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{C(-1)},children:"Huỷ"})]})]})}),(0,l.jsx)("div",{className:"border-t-2 w-full overflow-x-auto",children:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(d.Z,{columns:[{title:"M\xe3 nh\xf3m",dataIndex:"group_id",key:"group_id",render:(e,t,n)=>(0,l.jsxs)("div",{className:"flex gap-1 items-center",children:["#",n+1,".",e]})},{title:"T\xean nh\xf3m",dataIndex:"name_group",width:"50%",key:"name_group",render:(e,t,n)=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,(0,l.jsx)(r.ZP,{type:"link",onClick:()=>{N(n)},icon:(0,l.jsx)(p.FNg,{})}),(0,l.jsx)(r.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>v(null==t?void 0:t.group_id),children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:w,pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}),(0,l.jsx)(a.Z,{open:""!==j,title:"X\xf3a dữ liệu",onOk:F,onCancel:()=>{v("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})}},46475:function(e,t,n){"use strict";var l=n(2265),s=n(7261);t.Z=()=>{let[e,t]=(0,l.useState)(null),[n,r]=(0,l.useState)(null);return{postdata:async e=>{let n=s.Am.loading("Processing...");try{let l=await e();if(l)return t(l),r(l.statusCode),200===l.statusCode||201===l.statusCode?s.Am.update(n,{render:l.message,type:"success",isLoading:!1,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.Am.update(n,{render:l.message,type:"error",isLoading:!1,position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),l.statusCode;return s.Am.update(n,{render:"No response received.",type:"error",isLoading:!1,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),null}catch(e){s.Am.update(n,{render:"An unexpected error occurred",type:"error",isLoading:!1,autoClose:3e3})}},statusCode:n,response:e}}},3224:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var l=n(53757),s=n(20301);let r=(0,s.hg)("customer/fetchCustomerAbout",async(e,t)=>{try{return await l.Z.getAboutCustomer()}catch(e){return t.rejectWithValue("Failed to fetch customer Infos")}}),a=(0,s.oM)({name:"customer_about",initialState:{datas:{totalCustomer:0,totalActive:0,totalInActive:0,contactActive:0,contactInactive:0,contactActiveToday:0},loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data)}).addCase(r.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=a},92094:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var l=n(53757),s=n(20301);let r=(0,s.hg)("customer/fetchGroupCustomer",async(e,t)=>{try{return await l.Z.getGroupCustomer()}catch(e){return t.rejectWithValue("Failed to fetch customer Infos")}}),a=(0,s.oM)({name:"customer_group",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data)}).addCase(r.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=a},79587:function(e,t){"use strict";t.Z=e=>{let t=new FormData;return Object.keys(e).forEach(n=>{let l=e[n];Array.isArray(l)?0===l.length?t.append(n,JSON.stringify([])):"object"!=typeof l[0]||l.every(e=>e instanceof File)?"string"==typeof l[0]?l.forEach(e=>{t.append(n,e)}):l.forEach(e=>{t.append(n,e)}):t.append(n,JSON.stringify(l)):l instanceof File?t.append(n,l):"object"==typeof l&&null!==l?t.append(n,JSON.stringify(l)):null!=l&&t.append(n,String(l))}),t}},97174:function(){}}]);