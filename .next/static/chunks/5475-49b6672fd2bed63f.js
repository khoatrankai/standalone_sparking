"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5475],{5870:function(e,t,a){a.d(t,{Z:function(){return G}});var l=a(57437),n=a(2265),r=a(3810),s=a(85481),i=a(91626),d=a(58970),o=a(91250),c=a(63253),u=a(90987),h=a(68772),p=()=>{let[e,t]=(0,n.useState)(!1),[a,r]=(0,n.useState)(),[s,p]=(0,n.useState)([]),m=e=>{e&&""!==e&&r(e)};(0,n.useEffect)(()=>{let e=async e=>{let t=await u.Z.getCodeID(e);200===t.statusCode&&p([t.data,...s])};if(a&&""!==a){let t=a.split("@");(null==s?void 0:s.find(e=>e.code.includes(null==t?void 0:t[0])))||2!==t.length||e(t[0])}},[a]),(0,n.useEffect)(()=>{console.log(s)},[s]);let x=async()=>{p([]),t(!1)},g=[{title:"ID sản phẩm",dataIndex:"code_product_id",key:"code_product_id"},{title:"M\xe3 sản phẩm",dataIndex:"code",key:"code"},{title:"T\xean sản phẩm",dataIndex:["product","name"],key:"name"},{title:"Trạng th\xe1i",dataIndex:"status",key:"status",render:e=>{let t="",a="";switch(e){case"inventory":t="bg-blue-500",a="Lưu kho";break;case"selled":t="bg-purple-500",a="Đ\xe3 b\xe1n";break;case"borrowed":t="bg-orange-500",a="Đ\xe3 thu\xea";break;case"export":t="bg-yellow-500",a="Đ\xe3 xuất kho";break;case"error":t="bg-red-500",a="Lỗi";break;default:t="bg-gray-500",a="Kh\xf4ng x\xe1c định"}return(0,l.jsx)("div",{className:"flex items-center gap-1 ".concat(t," text-white px-2 font-bold justify-center rounded-md"),children:a})}}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.ZP,{onClick:()=>{t(!e)},icon:(0,l.jsx)(c.TlQ,{})}),e&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(d.Z,{title:"Qu\xe9t check sản phẩm",open:e,onCancel:x,footer:null,width:"100%",style:{maxWidth:"1000px"},children:(0,l.jsxs)("div",{className:"flex flex-wrap",children:[(0,l.jsx)("div",{className:"w-72 h-72",children:(0,l.jsx)(h.ZY,{onScan:e=>{console.log(e),e.length>0&&m(e[0].rawValue)}})}),(0,l.jsx)(o.Z,{columns:g,className:"flex-1 min-w-96",dataSource:s,scroll:{x:"max-content"},pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})]})})})]})},m=a(13966),x=a(86360),g=a(68575),y=a(68505),f=a(66004),v=a(44967),j=a(16836),w=a(46475),Z=a(29487),b=a(94295),C=a(67776),_=a(53420),N=a(68445),S=e=>{let{refBtnClassify:t}=e,[a,r]=(0,n.useState)(!1),[s,c]=(0,n.useState)(-1),h=(0,g.I0)(),{datas:p}=(0,g.v9)(e=>e.get_classify_type),m=e=>{c(e),k.setFieldsValue(null==p?void 0:p[e])},[x,y]=(0,n.useState)(!1),{postdata:f}=(0,w.Z)(),[S]=(0,Z.Z)(),[k]=(0,Z.Z)(),[I,T]=(0,n.useState)(""),L=async()=>{200===await f(()=>u.Z.deleteClassifyType([null!=I?I:""]))&&(h((0,_.T)()),T(""))},P=async e=>{try{let t=await f(()=>u.Z.createClassify(e));201===t&&(h((0,_.T)()),S.resetFields(),y(!1))}catch(e){console.error("Error creating product:",e)}},F=async e=>{try{let t=await f(()=>{var t;return u.Z.updateClassify(null!==(t=null==p?void 0:p[null!=s?s:0].classify_id)&&void 0!==t?t:"",e)});200===t&&(h((0,_.T)()),h((0,N.Q)()),c(-1))}catch(e){console.error("Error creating product:",e)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{r(!0)},ref:t,children:"Ph\xe2n loại"}),(0,l.jsx)(d.Z,{title:(0,l.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,l.jsx)("span",{children:"Ph\xe2n loại"}),(0,l.jsx)(i.ZP,{className:"text-white font-semibold bg-orange-500",icon:(0,l.jsx)(b.gyF,{}),type:"default",onClick:()=>{S.resetFields(),y(!x)}})]}),open:a,onCancel:()=>{r(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!x,children:(0,l.jsxs)(v.Z,{form:S,onFinish:P,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,l.jsx)(v.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(j.default,{placeholder:"Nhập t\xean loại"})}),(0,l.jsx)(v.Z.Item,{name:"description",rules:[{required:!0,message:"Vui l\xf2ng nhập m\xf4 tả"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(j.default.TextArea,{autoSize:{minRows:1},placeholder:"Nhập m\xf4 tả"})}),(0,l.jsx)(v.Z.Item,{style:{display:"flex",justifyContent:"end",margin:"0"},children:(0,l.jsx)(i.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{S.submit()},children:"Th\xeam"})})]})}),(0,l.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(s>-1),children:(0,l.jsxs)(v.Z,{form:k,onFinish:F,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,l.jsx)(v.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(j.default,{placeholder:"Nhập t\xean loại"})}),(0,l.jsx)(v.Z.Item,{name:"description",rules:[{required:!0,message:"Vui l\xf2ng nhập m\xf4 tả"}],style:{flex:"1 1 0%",margin:"0"},children:(0,l.jsx)(j.default.TextArea,{autoSize:{minRows:1},placeholder:"Nhập m\xf4 tả"})}),(0,l.jsxs)(v.Z.Item,{style:{display:"flex",gap:"2px",justifyContent:"end",margin:"0"},children:[(0,l.jsx)(i.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),(0,l.jsx)(i.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{c(-1)},children:"Huỷ"})]})]})}),(0,l.jsx)("div",{className:"border-t-2 w-full overflow-x-auto",children:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(o.Z,{columns:[{title:"T\xean ph\xe2n loại",dataIndex:"name",width:"35%",key:"name",render:e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("strong",{className:"flex gap-2 items-center",children:e})})},{title:"M\xf4 tả",dataIndex:"description",width:"40%",key:"description",render:(e,t,a)=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,(0,l.jsx)(i.ZP,{type:"link",onClick:()=>{m(a)},icon:(0,l.jsx)(C.FNg,{})}),(0,l.jsx)(i.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>{var e;return T(null!==(e=null==t?void 0:t.classify_id)&&void 0!==e?e:"")},children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:p,pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}),(0,l.jsx)(d.Z,{open:""!==I,title:"X\xf3a dữ liệu",onOk:L,onCancel:()=>{T("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})};function k(){let{datas:e}=(0,g.v9)(e=>e.about_product);return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex gap-1 flex-wrap",children:[(0,l.jsx)(s.Z,{}),(0,l.jsx)(m.Z,{}),(0,l.jsx)(S,{}),(0,l.jsx)(x.Z,{}),(0,l.jsx)(y.Z,{}),(0,l.jsx)(f.Z,{}),(0,l.jsx)(p,{})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"font-semibold text-[#1BA399]",children:"Tổng quan sản phẩm"}),(0,l.jsxs)("div",{className:"flex justify-around gap-2 flex-wrap",children:[(0,l.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 border-0 bg-[#EB8823] shadow-lg shadow-black/20 bg-black/80",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null==e?void 0:e.quantity_product.toLocaleString("vi-VN")}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Tổng số sản phẩm"})]}),(0,l.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null==e?void 0:e.quantity_active.toLocaleString("vi-VN")}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Sản phẩm đang b\xe1n"})]}),(0,l.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null==e?void 0:e.quantity_hide.toLocaleString("vi-VN")}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Sản phẩm ngưng b\xe1n"})]}),(0,l.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null==e?void 0:e.quantity_hire.toLocaleString("vi-VN")}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Số lượng sản phẩm cho thu\xea"})]}),(0,l.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null==e?void 0:e.quantity_stored.toLocaleString("vi-VN")}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Số lượng sản phẩm tồn kho"})]}),(0,l.jsxs)(r.Z,{className:"lex flex-col pl-4 pt-8 rounded-lg gap-2 min-w-fit flex-1 h-32 bg-[#EB8823] border-0 shadow-lg  shadow-black/20",children:[(0,l.jsx)("p",{className:"font-bold text-3xl text-white",children:null==e?void 0:e.quantity_ordered.toLocaleString("vi-VN")}),(0,l.jsx)("p",{className:"text-xs text-wrap text-slate-50/80 min-w-36",children:"Số lượng sản phẩm đ\xe3 b\xe1n"})]})]})]})]})}var I=a(66487),T=a(11632),L=a(56771),P=a(96473),F=a(42654),V=a(23496),A=a(90136),W=a(20347),O=a(66789),q=a(28826),R=a(45747),B=a(79587),E=a(7140),D=a(80169),M=e=>{let{productID:t,fetchListCode:a}=e,[r,s]=(0,n.useState)(null),o=async()=>{let e=await u.Z.createCodeProduct(t);201===e.statusCode&&(s(String(e.data.code)),a())};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.ZP,{onClick:()=>{o()},icon:(0,l.jsx)(c.TlQ,{})}),(0,l.jsx)(d.Z,{title:"QR Code sản phẩm",open:!!r,onCancel:()=>{s(null)},footer:null,width:"100%",style:{maxWidth:"fit-content"},children:(0,l.jsx)(D.Z,{value:r||"-"})})]})},Q=a(20020),z=a(63599),H=a(37342);let U=e=>new Promise((t,a)=>{let l=new FileReader;l.readAsDataURL(e),l.onload=()=>t(l.result),l.onerror=e=>a(e)});var X=e=>{let[t,a]=(0,n.useState)([]),r=(0,n.useRef)(),s=(0,n.useRef)(),c=(0,n.useRef)(),h=(0,n.useRef)(),p=(0,n.useRef)(),[b,C]=(0,n.useState)([]),{datas:_}=(0,g.v9)(e=>e.get_profits),[S,k]=(0,n.useState)(!1),{postdata:I}=(0,w.Z)(),L=(0,g.I0)(),D=async()=>{let t=await u.Z.getProductsID(e.productID);console.log(t),200===t.statusCode&&(L((0,N.Q)()),L((0,Q.N)()),C(t.data))},X=[{title:"ID sản phẩm",dataIndex:"code_product_id",key:"code_product_id"},{title:"M\xe3 sản phẩm",dataIndex:"code",key:"code"},{title:"Trạng th\xe1i",dataIndex:"status",key:"status",render:e=>{let t="",a="";switch(e){case"inventory":t="bg-blue-500",a="Lưu kho";break;case"selled":t="bg-purple-500",a="Đ\xe3 b\xe1n";break;case"borrowed":t="bg-orange-500",a="Đ\xe3 thu\xea";break;case"export":t="bg-yellow-500",a="Đ\xe3 xuất kho";break;case"error":t="bg-red-500",a="Lỗi";break;default:t="bg-gray-500",a="Kh\xf4ng x\xe1c định"}return(0,l.jsx)("div",{className:"flex items-center gap-1 ".concat(t," text-white px-2 font-bold justify-center rounded-md"),children:a})}}],{datas:J}=(0,g.v9)(e=>e.type_product),{datas:K}=(0,g.v9)(e=>e.get_supplier),{datas:Y}=(0,g.v9)(e=>e.brand_product),{datas:G}=(0,g.v9)(e=>e.original_product),[$]=(0,Z.Z)(),{datas:ee}=(0,g.v9)(e=>e.vat_system),{datas:et}=(0,g.v9)(e=>e.unit_product),ea=async()=>{let t=await u.Z.getProductID(e.productID);if(200===t.statusCode){var l,n,r,s,i,d,o,c,h,p,m;$.setFieldsValue({...t.data,type:null===(n=t.data)||void 0===n?void 0:null===(l=n.type)||void 0===l?void 0:l.type_product_id,brand:null===(s=t.data)||void 0===s?void 0:null===(r=s.brand)||void 0===r?void 0:r.brand_id,original:null===(d=t.data)||void 0===d?void 0:null===(i=d.original)||void 0===i?void 0:i.original_id,unit_product:null===(c=t.data)||void 0===c?void 0:null===(o=c.unit_product)||void 0===o?void 0:o.unit_id,supplier_product:null===(h=t.data.supplier_product)||void 0===h?void 0:h.supplier_id}),ec(null===(m=t.data)||void 0===m?void 0:null===(p=m.picture_urls)||void 0===p?void 0:p.map(e=>({uid:null==e?void 0:e.picture_id,name:"",status:"done",url:null==e?void 0:e.url}))),a(t.data.details)}},[el,en]=(0,n.useState)(!1),[er,es]=(0,n.useState)(""),[ei,ed]=(0,n.useState)([]),[eo,ec]=(0,n.useState)([]),eu=async e=>{e.url||e.preview||(e.preview=await U(e.originFileObj)),es(e.url||e.preview),en(!0)},eh=async a=>{let l=eo.map(e=>e.originFileObj),n={...a,images:l.filter(e=>void 0!==e),details:t},r=(0,B.Z)(n);try{let t=await I(()=>u.Z.updateProductInfo(e.productID,r,ei));200===t&&(L((0,N.Q)()),L((0,Q.N)()),k(!1))}catch(e){console.error("Error creating product:",e)}},ep=(0,l.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,l.jsx)(P.Z,{}),(0,l.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.ZP,{className:"  text-xs text-yellow-500 font-semibold",type:"text",onClick:()=>{k(!0),ea(),D()},children:"Chỉnh sửa"}),(0,l.jsxs)(d.Z,{title:"Cập nhật sản phẩm",open:S,onCancel:()=>{k(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,l.jsxs)(F.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:[(0,l.jsx)(E.Z,{tab:"Th\xf4ng tin sản phẩm",children:(0,l.jsxs)(v.Z,{layout:"vertical",form:$,onFinish:eh,style:{display:"flex",flexWrap:"wrap",gap:"12px"},children:[(0,l.jsx)(v.Z.Item,{name:"name",className:"!m-0",label:"T\xean sản phẩm",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean sản phẩm!"}],style:{width:"100%"},children:(0,l.jsx)(j.default,{placeholder:"T\xean sản phẩm"})}),(0,l.jsx)(v.Z.Item,{name:"code_original",className:"!m-0",label:"M\xe3 sản phẩm",rules:[{required:!0,message:"Vui l\xf2ng nhập m\xe3 sản phẩm!"}],style:{minWidth:"240px",flex:"1 1 0%"},children:(0,l.jsx)(j.default,{placeholder:"M\xe3 sản phẩm"})}),(0,l.jsx)(v.Z.Item,{name:"supplier_product",className:"!m-0",label:"Nh\xe0 cung cấp",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,l.jsx)(T.Z,{placeholder:"Chọn nh\xe0 cung cấp",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(V.Z,{style:{margin:"8px 0"}}),(0,l.jsx)(i.ZP,{type:"link",onClick:()=>{var e;null===(e=r.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==K?void 0:K.map(e=>(0,l.jsx)(R.W,{value:e.supplier_id,children:e.name},e.supplier_id))})}),(0,l.jsx)(v.Z.Item,{name:"type",className:"!m-0",label:"Loại sản phẩm",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,l.jsx)(T.Z,{placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(V.Z,{style:{margin:"8px 0"}}),(0,l.jsx)(i.ZP,{type:"link",onClick:()=>{var e;null===(e=p.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==J?void 0:J.map(e=>(0,l.jsx)(R.W,{value:e.type_product_id,children:e.name},e.type_product_id))})}),(0,l.jsx)(v.Z.Item,{name:"price",className:"!m-0 flex",label:"Gi\xe1 trị",rules:[{required:!0,message:"Vui l\xf2ng nhập gi\xe1 trị!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(A.Z,{defaultValue:0,className:"w-full"})}),(0,l.jsx)(v.Z.Item,{name:"warranty",className:"!m-0 flex",label:"Bảo h\xe0nh(*th\xe1ng)",rules:[{required:!0,message:"Vui l\xf2ng nhập gi\xe1 trị!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,l.jsx)(A.Z,{defaultValue:0,className:"w-full"})}),(0,l.jsx)(v.Z.Item,{name:"description",label:"M\xf4 tả",rules:[{required:!0,message:"Vui l\xf2ng nhập th\xf4ng tin m\xf4 tả"}],style:{width:"100%",margin:"0"},children:(0,l.jsx)(q.Z,{placeholder:"M\xf4 tả",autoSize:{minRows:3}})}),(0,l.jsx)(v.Z.Item,{name:"vat",className:"!m-0",label:"Thuế",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,l.jsx)(T.Z,{placeholder:"Chọn loại thuế",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},children:null==ee?void 0:ee.map(e=>(0,l.jsxs)(R.W,{value:e.vat_id,children:[e.type_vat,"%"]},e.vat_id))})}),(0,l.jsx)(v.Z.Item,{name:"brand",className:"!m-0",label:"Thương hiệu",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,l.jsx)(T.Z,{placeholder:"Chọn loại thương hiệu",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(V.Z,{style:{margin:"8px 0"}}),(0,l.jsx)(i.ZP,{type:"link",onClick:()=>{var e;null===(e=s.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==Y?void 0:Y.map(e=>(0,l.jsx)(R.W,{value:e.brand_id,children:e.name},e.brand_id))})}),(0,l.jsx)(v.Z.Item,{name:"original",className:"!m-0",label:"Xuất xứ",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,l.jsx)(T.Z,{placeholder:"Chọn loại xuất xứ",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(V.Z,{style:{margin:"8px 0"}}),(0,l.jsx)(i.ZP,{type:"link",onClick:()=>{var e;null===(e=c.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==G?void 0:G.map(e=>(0,l.jsx)(R.W,{value:e.original_id,children:e.name},e.original_id))})}),(0,l.jsx)(v.Z.Item,{name:"profit",className:"!m-0",label:"Lợi nhuận",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,l.jsx)(T.Z,{placeholder:"Chọn loại lợi nhuận",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},children:null==_?void 0:_.map(e=>(0,l.jsxs)(R.W,{value:e.profit_id,children:[e.type_profit,"%"]},e.profit_id))})}),(0,l.jsx)(v.Z.Item,{name:"unit_product",className:"!m-0",label:"Đơn vị sản phẩm",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,l.jsx)(T.Z,{placeholder:"Chọn loại đơn vị",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(V.Z,{style:{margin:"8px 0"}}),(0,l.jsx)(i.ZP,{type:"link",onClick:()=>{var e;null===(e=h.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==et?void 0:et.map(e=>(0,l.jsx)(R.W,{value:e.unit_id,children:e.name_unit},e.unit_id))})}),(0,l.jsxs)(v.Z.Item,{label:"Ảnh sản phẩm",className:"!m-0",style:{minWidth:"320px",flex:"1 1 0%"},children:[(0,l.jsx)(W.default,{action:"",listType:"picture-card",fileList:eo,onPreview:eu,onChange:e=>{let{fileList:t}=e;ec(t)},onRemove:e=>{ed([...ei,e.uid])},multiple:!0,children:eo.length>=5?null:ep}),er&&(0,l.jsx)(O.Z,{alt:"ha",wrapperStyle:{display:"none"},preview:{visible:el,onVisibleChange:e=>en(e),afterOpenChange:e=>!e&&es("")},src:er})]})]})},1),(0,l.jsx)(E.Z,{tab:"Th\xf4ng số kỹ thuật",children:(0,l.jsx)(H.Z,{data:t,setData:a})},2),(0,l.jsxs)(E.Z,{tab:"Số lượng sản phẩm",children:[(0,l.jsx)(M,{productID:e.productID,fetchListCode:D}),(0,l.jsx)(o.Z,{columns:X,dataSource:b,scroll:{x:"max-content"},pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})]},3)]}),(0,l.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"end"},children:(0,l.jsx)(i.ZP,{type:"primary",onClick:()=>{$.submit()},children:"Cập nhật"})})]}),(0,l.jsx)(z.Z,{refBtnSupplier:r}),(0,l.jsx)(f.Z,{refBtnOriginal:c}),(0,l.jsx)(y.Z,{refBtnBrand:s}),(0,l.jsx)(m.Z,{refBtnType:p}),(0,l.jsx)(x.Z,{refBtnUnit:h})]})},J=a(22744),K=a(65624);function Y(){let{postdata:e}=(0,w.Z)(),t=(0,K.Z)(["admin-top","product","product-edit"]),a=(0,g.I0)(),{datas:r}=(0,g.v9)(e=>e.vat_system),{datas:s}=(0,g.v9)(e=>e.get_profits),[c,h]=(0,n.useState)(25),[p,m]=(0,n.useState)(),{datas:x}=(0,g.v9)(e=>e.info_products),y=[{title:"#",className:"",dataIndex:"code_original",render:(e,a)=>(0,l.jsxs)("div",{className:"flex flex-col gap-1 ",children:[(0,l.jsxs)("strong",{children:["#","".concat(null!=e?e:"".slice(0,10),"...")]}),(0,l.jsx)("div",{className:"flex gap-2",children:t&&(0,l.jsx)(X,{productID:a.product_id})})]}),sorter:(e,t)=>{var a,l;return(null!==(a=e.code_original)&&void 0!==a?a:"").localeCompare(null!==(l=t.code_original)&&void 0!==l?l:"")}},{title:"T\xean sản phẩm",className:"",dataIndex:"name",render:e=>(0,l.jsx)(l.Fragment,{children:e.length>15?"".concat(e.slice(0,15),"..."):e}),sorter:(e,t)=>e.name.localeCompare(t.name)},{title:"Loại sản phẩm",className:"",dataIndex:["type","name"],sorter:(e,t)=>e.type.name.localeCompare(t.type.name),render:e=>(0,l.jsx)(l.Fragment,{children:e})},{title:"Gi\xe1 trị",className:"",dataIndex:"price",render:e=>"".concat(e.toLocaleString("vi-VN"),"đ"),sorter:(e,t)=>e.price-t.price},{title:"Thuế",className:"",dataIndex:"vat",sorter:(e,t)=>{var a,l;return(null!==(a=e.vat)&&void 0!==a?a:"").localeCompare(null!==(l=t.vat)&&void 0!==l?l:"")},render:e=>{var t;return(0,l.jsxs)(l.Fragment,{children:[null==r?void 0:null===(t=r.find(t=>t.vat_id===e))||void 0===t?void 0:t.type_vat,"%"]})}},{title:"Lợi nhuận",className:"",dataIndex:"profit",sorter:(e,t)=>{var a,l;return(null!==(a=e.profit)&&void 0!==a?a:"").localeCompare(null!==(l=t.profit)&&void 0!==l?l:"")},render:e=>{var t;return(0,l.jsxs)(l.Fragment,{children:[null==s?void 0:null===(t=s.find(t=>t.profit_id===e))||void 0===t?void 0:t.type_profit,"%"]})}},{title:"Trạng th\xe1i",className:"",dataIndex:"status",render:(t,n)=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(I.Z,{defaultChecked:"active"===t,onChange:async t=>{200===await e(()=>u.Z.updateStatusProduct(n.product_id,t?"active":"hide"))&&a((0,Q.N)())}})}),sorter:(e,t)=>e.status.localeCompare(t.status)},{title:"Số lượng",className:"",dataIndex:"quantity",sorter:(e,t)=>e.quantity-t.quantity},{title:"Đơn vị",className:"",dataIndex:["unit_product","name_unit"],sorter:(e,t)=>e.unit_product.name_unit.localeCompare(t.unit_product.name_unit),render:e=>(0,l.jsx)(l.Fragment,{children:e})}];(0,n.useEffect)(()=>{m(x.map((e,t)=>({...e,key:t})))},[x]);let f=e=>{m(null==x?void 0:x.filter(t=>String(t.code_original+" "+t.name+" "+t.type+" "+t.price+" "+t.quantity).toLowerCase().includes(e.toLowerCase())))},[v,j]=(0,n.useState)(!1),[Z,b]=(0,n.useState)([]),C=async()=>{200===await e(()=>u.Z.deleteProducts(Z))&&(a((0,N.Q)()),b([]),j(!1))};return(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(T.Z,{defaultValue:c,style:{width:83},onChange:e=>h(e),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"All"}]}),(0,l.jsx)(i.ZP,{hidden:!(Z.length>0),children:"Xuất ra"}),(0,l.jsx)(i.ZP,{onClick:()=>{j(!0)},danger:!0,hidden:!(Z.length>0),className:"text-xl",icon:(0,l.jsx)(J.FH3,{})}),(0,l.jsx)(d.Z,{open:v,title:"X\xf3a dữ liệu",onOk:C,onCancel:()=>{j(!1)},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]}),(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(L.Z,{onChange:e=>{f(e.target.value)},placeholder:"Search",style:{width:200}})})]}),(0,l.jsx)("div",{className:"w-full overflow-auto",children:(0,l.jsx)("div",{className:"min-w-fit",children:(0,l.jsx)(o.Z,{columns:y,rowSelection:{onChange:(e,t)=>{b(t.map(e=>{var t;return null!==(t=e.product_id)&&void 0!==t?t:""}))}},dataSource:p,scroll:{x:"max-content"},pagination:{pageSize:c,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}function G(){let e=(0,K.Z)(["admin-top","product","product-edit"]);return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[e&&(0,l.jsx)("div",{className:"rounded-md",children:(0,l.jsx)(k,{})}),(0,l.jsx)("div",{className:"rounded-md",children:(0,l.jsx)(Y,{})})]})})}},46475:function(e,t,a){var l=a(2265),n=a(7261);t.Z=()=>{let[e,t]=(0,l.useState)(null),[a,r]=(0,l.useState)(null);return{postdata:async e=>{let a=n.Am.loading("Processing...");try{let l=await e();if(l)return t(l),r(l.statusCode),200===l.statusCode||201===l.statusCode?n.Am.update(a,{render:l.message,type:"success",isLoading:!1,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):n.Am.update(a,{render:l.message,type:"error",isLoading:!1,position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),l.statusCode;return n.Am.update(a,{render:"No response received.",type:"error",isLoading:!1,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),null}catch(e){n.Am.update(a,{render:"An unexpected error occurred",type:"error",isLoading:!1,autoClose:3e3})}},statusCode:a,response:e}}},53420:function(e,t,a){a.d(t,{T:function(){return r}});var l=a(90987),n=a(20301);let r=(0,n.hg)("product/fetchClassifyType",async(e,t)=>{try{return await l.Z.getClassifies()}catch(e){return t.rejectWithValue("Failed to fetch product types")}}),s=(0,n.oM)({name:"classify_type",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data)}).addCase(r.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=s},14781:function(e,t,a){a.d(t,{q:function(){return r}});var l=a(64262),n=a(20301);let r=(0,n.hg)("system/fetchSystemProfits",async(e,t)=>{try{return await l.Z.getProfits()}catch(e){return t.rejectWithValue("Failed to fetch product Vats")}}),s=(0,n.oM)({name:"profit_system",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data)}).addCase(r.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=s},89315:function(e,t,a){a.d(t,{v:function(){return r}});var l=a(64262),n=a(20301);let r=(0,n.hg)("system/fetchSystemVats",async(e,t)=>{try{return await l.Z.getVats()}catch(e){return t.rejectWithValue("Failed to fetch product Vats")}}),s=(0,n.oM)({name:"vat_system",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data)}).addCase(r.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=s},28223:function(e,t,a){a.d(t,{Y:function(){return r}});var l=a(83464);let n=l.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"application/json"},withCredentials:!0}),r=l.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});t.Z=n},64262:function(e,t,a){var l=a(90382),n=a(28223);t.Z={getProvinces:async()=>{try{return(await n.Z.get("/system/provinces")).data}catch(e){throw(0,l.S)(e),e}},getVats:async()=>{try{return(await n.Z.get("/system/vats")).data}catch(e){throw(0,l.S)(e),e}},getVat:async e=>{try{return(await n.Z.get("/system/vat/".concat(e))).data}catch(e){throw(0,l.S)(e),e}},createVat:async e=>{try{return(await n.Z.post("/system/create-vat",{type_vat:e.type_vat})).data}catch(e){throw(0,l.S)(e),e}},updateVat:async(e,t)=>{try{return(await n.Z.put("/system/update-vat/".concat(e),t)).data}catch(e){throw(0,l.S)(e),e}},getProfits:async()=>{try{return(await n.Z.get("/system/profits")).data}catch(e){throw(0,l.S)(e),e}},getProfit:async e=>{try{return(await n.Z.get("/system/profit/".concat(e))).data}catch(e){throw(0,l.S)(e),e}},createProfit:async e=>{try{return(await n.Z.post("/system/create-profit",e)).data}catch(e){throw(0,l.S)(e),e}},updateProfit:async(e,t)=>{try{return(await n.Z.put("/system/profit/".concat(e),t)).data}catch(e){throw(0,l.S)(e),e}},getTargets:async()=>{try{return(await n.Z.get("/system/targets_revenue")).data}catch(e){throw(0,l.S)(e),e}},getTarget:async e=>{try{return(await n.Z.get("/system/target_revenue/".concat(e))).data}catch(e){throw(0,l.S)(e),e}},getTargetYear:async()=>{try{return(await n.Z.get("/system/target_revenue_year")).data}catch(e){throw(0,l.S)(e),e}},createTarget:async e=>{try{return(await n.Z.post("/system/target_revenue",e)).data}catch(e){throw(0,l.S)(e),e}},updateTarget:async(e,t)=>{try{return(await n.Z.put("/system/target_revenue/".concat(e),t)).data}catch(e){throw(0,l.S)(e),e}},getLinksSystem:async()=>{try{return(await n.Z.get("/system/links_system")).data}catch(e){throw(0,l.S)(e),e}},getLinkSystem:async e=>{try{return(await n.Z.get("/system/link_system/".concat(e))).data}catch(e){throw(0,l.S)(e),e}},createLinkSystem:async e=>{try{return(await n.Z.post("/system/link_system",e)).data}catch(e){throw(0,l.S)(e),e}},updateLinkSystem:async(e,t)=>{try{return(await n.Z.put("/system/link_system/".concat(e),t)).data}catch(e){throw(0,l.S)(e),e}}}},79587:function(e,t){t.Z=e=>{let t=new FormData;return Object.keys(e).forEach(a=>{let l=e[a];Array.isArray(l)?0===l.length?t.append(a,JSON.stringify([])):"object"!=typeof l[0]||l.every(e=>e instanceof File)?"string"==typeof l[0]?l.forEach(e=>{t.append(a,e)}):l.forEach(e=>{t.append(a,e)}):t.append(a,JSON.stringify(l)):l instanceof File?t.append(a,l):"object"==typeof l&&null!==l?t.append(a,JSON.stringify(l)):null!=l&&t.append(a,String(l))}),t}},90382:function(e,t,a){a.d(t,{S:function(){return n}});var l=a(7261);let n=e=>{var t,a,n;let r=(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"An unexpected error occurred",s=null===(n=e.response)||void 0===n?void 0:n.status;l.Am.dismiss(),403===s?l.Am.error("Bạn kh\xf4ng c\xf3 quyền"):l.Am.error(r)}}}]);