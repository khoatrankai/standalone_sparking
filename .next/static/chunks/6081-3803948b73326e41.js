"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6081],{88723:function(e,t,l){l.d(t,{Z:function(){return f}});var a=l(57437),n=l(46475),r=l(24307),i=l(91626),s=l(58970),d=l(42654),o=l(44967),c=l(16836),h=l(11632),u=l(56612),x=l(29487),m=l(45747),p=l(7140),g=l(2265),y=l(32768);function f(e){let{refBtnTask:t,id:l,resetData:f}=e,[j]=(0,x.Z)(),{postdata:w}=(0,n.Z)(),[k,Z]=(0,g.useState)(!1),v=async e=>{let t=await w(()=>r.Z.createTask({...e,work:l}));(200===t||201===t)&&(f(),Z(!1))},_=async()=>{j.submit()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.ZP,{hidden:!!t,icon:(0,a.jsx)(y.b0B,{}),onClick:()=>{Z(!0)},ref:t,children:"Th\xeam task"}),(0,a.jsxs)(s.Z,{title:"Tạo task",open:k,onCancel:()=>{Z(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,a.jsx)(d.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,a.jsx)(p.Z,{tab:"Th\xf4ng tin task",children:(0,a.jsxs)(o.Z,{layout:"vertical",form:j,onFinish:v,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[(0,a.jsx)(o.Z.Item,{name:"name",label:"T\xean task",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xean c\xf4ng việc"}],style:{minWidth:"100%",flex:"1 1 0%"},children:(0,a.jsx)(c.default,{})}),(0,a.jsx)(o.Z.Item,{name:"status",label:"Trạng th\xe1i",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,a.jsxs)(h.Z,{placeholder:"Chọn trạng th\xe1i",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},children:[(0,a.jsx)(m.W,{value:"waitting",children:"Đang thực hiện"},"1"),(0,a.jsx)(m.W,{value:"success",children:"Th\xe0nh c\xf4ng"},"2"),(0,a.jsx)(m.W,{value:"fail",children:"Thất bại"},"3")]})}),(0,a.jsx)(o.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:(0,a.jsx)(c.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})}),(0,a.jsx)(o.Z.Item,{name:"time_start",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,a.jsx)(u.default,{placeholder:"Chọn ng\xe0y bắt đầu",style:{width:"100%"}})}),(0,a.jsx)(o.Z.Item,{className:" mb-0",name:"time_end",rules:[{required:!0}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,a.jsx)(u.default,{placeholder:"Chọn ng\xe0y kết th\xfac",style:{width:"100%"}})})]})},1)}),(0,a.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,a.jsx)(i.ZP,{type:"primary",onClick:_,children:"Tạo"})})]})]})}},83458:function(e,t,l){var a=l(57437),n=l(2265),r=l(91626),i=l(58970),s=l(44967),d=l(11632),o=l(16836),c=l(91250),h=l(46475),u=l(29487),x=l(94295),m=l(67776),p=l(68575),g=l(24307),y=l(45747),f=l(61232),j=l(94899),w=l(96248),k=l(80841),Z=l(22744),v=l(21544);t.Z=e=>{let{refBtnStatus:t}=e,l=(0,n.useRef)(),[_,C]=(0,n.useState)(!1),[b,N]=(0,n.useState)(-1),W=(0,p.I0)(),{datas:I}=(0,p.v9)(e=>e.get_type_work),{datas:T}=(0,p.v9)(e=>e.get_status_work),F=e=>{var t;N(e),L.setFieldsValue({...null==T?void 0:T[e],type_work:null==T?void 0:null===(t=T[e].type_work)||void 0===t?void 0:t.type_work_id})},[S,P]=(0,n.useState)(!1),{postdata:V}=(0,h.Z)(),[q]=(0,u.Z)(),[L]=(0,u.Z)(),[A,D]=(0,n.useState)(""),E=async()=>{200===await V(()=>g.Z.deleteStatusWork([null!=A?A:""]))&&(W((0,f.vh)()),D(""))},B=async e=>{try{let t=await V(()=>g.Z.createStatusWork(e));201===t&&(W((0,f.vh)()),W((0,j.cW)()),q.resetFields(),P(!1))}catch(e){console.error("Error creating product:",e)}},M=async e=>{try{let t=await V(()=>{var t;return g.Z.updateStatusWork(null!==(t=null==T?void 0:T[null!=b?b:0].status_work_id)&&void 0!==t?t:"",e)});200===t&&(W((0,f.vh)()),W((0,w.D)()),W((0,k.LG)()),N(-1))}catch(e){console.error("Error creating product:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{C(!0)},ref:t,children:"Trạng th\xe1i c\xf4ng việc"}),(0,a.jsx)(i.Z,{title:(0,a.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,a.jsx)("span",{children:"Trạng th\xe1i c\xf4ng việc"}),(0,a.jsx)(r.ZP,{className:"text-white font-semibold bg-orange-500",icon:(0,a.jsx)(x.gyF,{}),type:"default",onClick:()=>{q.resetFields(),P(!S)}}),(0,a.jsx)(r.ZP,{icon:(0,a.jsx)(Z.h78,{}),onClick:()=>{var e;null===(e=l.current)||void 0===e||e.click()}})]}),open:_,onCancel:()=>{C(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!S,children:(0,a.jsxs)(s.Z,{form:q,onFinish:B,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,a.jsx)(s.Z.Item,{name:"type_work",rules:[{required:!0,message:"Vui l\xf2ng chọn loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(d.Z,{placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},children:null==I?void 0:I.map(e=>(0,a.jsx)(y.W,{value:e.type_work_id,children:e.name},e.type_work_id))})}),(0,a.jsx)(s.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean trạng th\xe1i"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(o.default,{placeholder:"Nhập t\xean trạng th\xe1i"})}),(0,a.jsx)(s.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag trạng th\xe1i"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(o.default,{placeholder:"Nhập tag trạng th\xe1i"})}),(0,a.jsx)(s.Z.Item,{style:{display:"flex",justifyContent:"end",margin:"0"},children:(0,a.jsx)(r.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{q.submit()},children:"Th\xeam"})})]})}),(0,a.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(b>-1),children:(0,a.jsxs)(s.Z,{form:L,onFinish:M,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,a.jsx)(s.Z.Item,{name:"type_work",rules:[{required:!0,message:"Vui l\xf2ng chọn loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(d.Z,{placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},children:null==I?void 0:I.map(e=>(0,a.jsx)(y.W,{value:e.type_work_id,children:e.name},e.type_work_id))})}),(0,a.jsx)(s.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean trạng th\xe1i"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(o.default,{placeholder:"Nhập t\xean trạng th\xe1i"})}),(0,a.jsx)(s.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag trạng th\xe1i"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(o.default,{placeholder:"Nhập tag trạng th\xe1i"})}),(0,a.jsxs)(s.Z.Item,{style:{display:"flex",gap:"2px",justifyContent:"end",margin:"0"},children:[(0,a.jsx)(r.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),(0,a.jsx)(r.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{N(-1)},children:"Huỷ"})]})]})}),(0,a.jsx)("div",{className:"border-t-2 w-full overflow-x-auto",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(c.Z,{columns:[{title:"M\xe3 trạng th\xe1i",dataIndex:"status_work_id",key:"status_work_id",render:(e,t,l)=>(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:["#",l+1,".",e]})},{title:"T\xean loại",dataIndex:["type_work","name"],width:"25%",key:"name_type",render:e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("strong",{className:"flex gap-2 items-center",children:e})})},{title:"Tag trạng th\xe1i",dataIndex:"name_tag",width:"25%",key:"name_tag",render:e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("strong",{className:"flex gap-2 items-center",children:e})})},{title:"T\xean trạng th\xe1i",dataIndex:"name",width:"25%",key:"name",render:(e,t,l)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,(0,a.jsx)(r.ZP,{type:"link",onClick:()=>{F(l)},icon:(0,a.jsx)(m.FNg,{})}),(0,a.jsx)(r.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>D(null==t?void 0:t.status_work_id),children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:T,pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}),(0,a.jsx)(v.Z,{refBtnType:l}),(0,a.jsx)(i.Z,{open:""!==A,title:"X\xf3a dữ liệu",onOk:E,onCancel:()=>{D("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})}},21544:function(e,t,l){var a=l(57437),n=l(2265),r=l(91626),i=l(58970),s=l(44967),d=l(16836),o=l(91250),c=l(46475),h=l(29487),u=l(94295),x=l(67776),m=l(68575),p=l(24307),g=l(96248),y=l(80841);t.Z=e=>{let{refBtnType:t}=e,[l,f]=(0,n.useState)(!1),[j,w]=(0,n.useState)(-1),k=(0,m.I0)(),{datas:Z}=(0,m.v9)(e=>e.get_type_work),v=e=>{w(e),W.setFieldsValue(null==Z?void 0:Z[e])},[_,C]=(0,n.useState)(!1),{postdata:b}=(0,c.Z)(),[N]=(0,h.Z)(),[W]=(0,h.Z)(),[I,T]=(0,n.useState)(""),F=async()=>{200===await b(()=>p.Z.deleteTypeWork([null!=I?I:""]))&&(k((0,g.D)()),T(""))},S=async e=>{try{let t=await b(()=>p.Z.createTypeWork(e));201===t&&(k((0,g.D)()),N.resetFields(),C(!1))}catch(e){console.error("Error creating product:",e)}},P=async e=>{try{let t=await b(()=>{var t;return p.Z.updateTypeWork(null!==(t=null==Z?void 0:Z[null!=j?j:0].type_work_id)&&void 0!==t?t:"",e)});200===t&&(k((0,g.D)()),k((0,y.LG)()),w(-1))}catch(e){console.error("Error creating product:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{f(!0)},ref:t,children:"Loại c\xf4ng việc"}),(0,a.jsx)(i.Z,{title:(0,a.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,a.jsx)("span",{children:"Loại c\xf4ng việc"}),(0,a.jsx)(r.ZP,{className:"text-white font-semibold bg-orange-500",icon:(0,a.jsx)(u.gyF,{}),type:"default",onClick:()=>{N.resetFields(),C(!_)}})]}),open:l,onCancel:()=>{f(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!_,children:(0,a.jsxs)(s.Z,{form:N,onFinish:S,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,a.jsx)(s.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(d.default,{placeholder:"Nhập t\xean loại"})}),(0,a.jsx)(s.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(d.default,{placeholder:"Nhập tag loại"})}),(0,a.jsx)(s.Z.Item,{style:{display:"flex",justifyContent:"end",margin:"0"},children:(0,a.jsx)(r.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{N.submit()},children:"Th\xeam"})})]})}),(0,a.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(j>-1),children:(0,a.jsxs)(s.Z,{form:W,onFinish:P,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,a.jsx)(s.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(d.default,{placeholder:"Nhập t\xean loại"})}),(0,a.jsx)(s.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,a.jsx)(d.default,{placeholder:"Nhập tag loại"})}),(0,a.jsxs)(s.Z.Item,{style:{display:"flex",gap:"2px",justifyContent:"end",margin:"0"},children:[(0,a.jsx)(r.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),(0,a.jsx)(r.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{w(-1)},children:"Huỷ"})]})]})}),(0,a.jsx)("div",{className:"border-t-2 w-full overflow-x-auto",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(o.Z,{columns:[{title:"M\xe3 loại",dataIndex:"type_work_id",key:"type_work_id",render:(e,t,l)=>(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:["#",l+1,".",e]})},{title:"Tag loại",dataIndex:"name_tag",width:"35%",key:"name_tag",render:e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("strong",{className:"flex gap-2 items-center",children:e})})},{title:"T\xean loại",dataIndex:"name",width:"40%",key:"name",render:(e,t,l)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,(0,a.jsx)(r.ZP,{type:"link",onClick:()=>{v(l)},icon:(0,a.jsx)(x.FNg,{})}),(0,a.jsx)(r.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>T(null==t?void 0:t.type_work_id),children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:Z,pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}),(0,a.jsx)(i.Z,{open:""!==I,title:"X\xf3a dữ liệu",onOk:F,onCancel:()=>{T("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})}},43882:function(e,t,l){l.d(t,{C:function(){return r}});var a=l(20301),n=l(24307);let r=(0,a.hg)("typeWorkID/fetchTypeWorksID",async(e,t)=>{try{return await n.Z.getFullTypeWorkById(e)}catch(e){return t.rejectWithValue("Failed to fetch type works")}}),i=(0,a.oM)({name:"typeWork",initialState:{datas:void 0,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(r.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=i},80841:function(e,t,l){l.d(t,{Dx:function(){return i},LG:function(){return r}});var a=l(20301),n=l(24307);let r=(0,a.hg)("work/fetchWorks",async(e,t)=>{try{return await n.Z.getAllWorks(e)}catch(e){return t.rejectWithValue("Failed to fetch works")}}),i=(0,a.hg)("work/fetchYearWorks",async(e,t)=>{try{return await n.Z.getAllYearWorks(e)}catch(e){return t.rejectWithValue("Failed to fetch works")}}),s=(0,a.hg)("work/createWork",async(e,t)=>{try{return await n.Z.createWork(e)}catch(e){return t.rejectWithValue("Failed to create work")}}),d=(0,a.hg)("work/updateWork",async(e,t)=>{let{work_id:l,data:a}=e;try{return await n.Z.updateWork(l,a)}catch(e){return t.rejectWithValue("Failed to update work")}}),o=(0,a.oM)({name:"work",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(r.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(s.fulfilled,(e,t)=>{e.datas.push(t.payload.data)}).addCase(d.fulfilled,(e,t)=>{let l=e.datas.findIndex(e=>e.work_id===t.payload.data.work_id);-1!==l&&(e.datas[l]=t.payload.data)})}}).reducer;t.ZP=o}}]);