"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9626],{9626:function(e,t,l){l.d(t,{Z:function(){return b}});var n=l(57437),i=l(46475),a=l(11265),r=l(27929),s=l(24307),d=l(91626),c=l(58970),o=l(42654),h=l(44967),u=l(11632),x=l(23496),p=l(16836),m=l(29487),y=l(45747),g=l(7140),j=l(2265),f=l(32768),v=l(68575),Z=l(63302),w=l(60792),C=l(45407),_=l(99376);function b(e){var t,l;let{type:b,idType:N,idStatus:k,refBtnActivity:T}=e,{projectID:I}=(0,_.useParams)(),F=(0,_.useSearchParams)(),W=(0,j.useRef)(),S=(0,j.useRef)(),P=(0,j.useRef)(),{datas:V}=(0,v.v9)(e=>e.get_type_activities),{datas:A}=(0,v.v9)(e=>e.get_contracts);(0,j.useEffect)(()=>{if(F){let e=F.get("contract");e&&L.setFieldValue("contract",e)}},[F]),(0,j.useEffect)(()=>{k&&N&&(L.setFieldsValue({status:k,type:N}),O(N))},[k,N]);let[L]=(0,m.Z)(),{postdata:q}=(0,i.Z)(),R=(0,v.I0)(),[E,B]=(0,j.useState)(!1),[M,O]=(0,j.useState)(""),Y=async e=>{let t=await q(()=>s.Z.createActivity(e));(200===t||201===t)&&(b||R((0,a.ij)({project:I})),"schedule"===b&&R((0,r.N)(N)),B(!1))},D=async()=>{L.submit()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.ZP,{hidden:!!T,type:b?"link":"default",className:b?"text-[#EC8920]":"bg-blue-400 border-0 text-white font-semibold",icon:(0,n.jsx)(f.b0B,{}),onClick:()=>{B(!0)},ref:T,children:"Th\xeam hoạt động"}),(0,n.jsxs)(c.Z,{title:"Tạo hoạt động",open:E,onCancel:()=>{B(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,n.jsx)(o.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,n.jsx)(g.Z,{tab:"Th\xf4ng tin hoạt đồng",children:(0,n.jsxs)(h.Z,{layout:"vertical",form:L,onFinish:Y,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[(0,n.jsx)(h.Z.Item,{name:"type",label:"Loại hoạt động",rules:[{required:!0,message:"Vui l\xf2ng chọn loại hoạt động!"}],style:{width:"100%",flex:"1 1 0%"},children:(0,n.jsx)(u.Z,{disabled:!!N,placeholder:"Chọn loại",onChange:e=>{O(e)},showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)(x.Z,{style:{margin:"8px 0"}}),(0,n.jsx)(d.ZP,{type:"link",onClick:()=>{var e;null===(e=W.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==V?void 0:V.map(e=>(0,n.jsx)(y.W,{value:e.type_activity_id,children:e.name},e.type_activity_id))})}),(0,n.jsx)(h.Z.Item,{name:"name",label:"T\xean hoạt động",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xean hoạt động"}],style:{minWidth:"100%",flex:"1 1 0%"},children:(0,n.jsx)(p.default,{})}),(0,n.jsx)(h.Z.Item,{name:"status",label:"Trạng th\xe1i",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,n.jsx)(u.Z,{disabled:!!k,placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)(x.Z,{style:{margin:"8px 0"}}),(0,n.jsx)(d.ZP,{type:"link",onClick:()=>{var e;null===(e=P.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null===(l=V.find(e=>e.type_activity_id===M))||void 0===l?void 0:null===(t=l.status)||void 0===t?void 0:t.map(e=>(0,n.jsx)(y.W,{value:e.status_activity_id,children:e.name},e.status_activity_id))})}),(0,n.jsx)(h.Z.Item,{name:"contract",label:"Hợp đồng",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,n.jsx)(u.Z,{placeholder:"Chọn hợp đồng",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)(x.Z,{style:{margin:"8px 0"}}),(0,n.jsx)(d.ZP,{type:"link",onClick:()=>{var e;null===(e=S.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==A?void 0:A.map(e=>(0,n.jsx)(y.W,{value:e.contract_id,children:e.name_contract},e.contract_id))})}),(0,n.jsx)(h.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:(0,n.jsx)(p.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]})},1)}),(0,n.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,n.jsx)(d.ZP,{type:"primary",onClick:D,children:"Tạo"})})]}),(0,n.jsx)(Z.Z,{refBtnContract:S}),(0,n.jsx)(w.Z,{refBtnType:W}),(0,n.jsx)(C.Z,{refBtnStatus:P})]})}},45407:function(e,t,l){var n=l(57437),i=l(2265),a=l(91626),r=l(58970),s=l(44967),d=l(11632),c=l(16836),o=l(91250),h=l(46475),u=l(29487),x=l(94295),p=l(67776),m=l(68575),y=l(24307),g=l(57842),j=l(11265),f=l(45747),v=l(94899),Z=l(84154),w=l(60792);t.Z=e=>{let{refBtnStatus:t}=e,l=(0,i.useRef)(),[C,_]=(0,i.useState)(!1),[b,N]=(0,i.useState)(-1),k=(0,m.I0)(),{datas:T}=(0,m.v9)(e=>e.get_type_activities),{datas:I}=(0,m.v9)(e=>e.get_status_activity),F=e=>{N(e),A.setFieldsValue({...null==I?void 0:I[e],type_activity:null==I?void 0:I[e].type_activity.type_activity_id})},[W,S]=(0,i.useState)(!1),{postdata:P}=(0,h.Z)(),[V]=(0,u.Z)(),[A]=(0,u.Z)(),[L,q]=(0,i.useState)(""),R=async()=>{200===await P(()=>y.Z.deleteStatusActivity([null!=L?L:""]))&&(k((0,g.YK)()),q(""))},E=async e=>{try{let t=await P(()=>y.Z.createStatusActivity(e));201===t&&(k((0,g.YK)()),k((0,v.cW)()),V.resetFields(),S(!1))}catch(e){console.error("Error creating product:",e)}},B=async e=>{try{let t=await P(()=>{var t;return y.Z.updateStatusActivity(null!==(t=null==I?void 0:I[null!=b?b:0].status_activity_id)&&void 0!==t?t:"",e)});200===t&&(k((0,g.YK)()),k((0,v.cW)()),k((0,j.ij)({})),N(-1))}catch(e){console.error("Error creating product:",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{_(!0)},ref:t,children:"Trạng th\xe1i hoạt động"}),(0,n.jsx)(r.Z,{title:(0,n.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,n.jsx)("span",{children:"Trạng th\xe1i hoạt động"}),(0,n.jsx)(a.ZP,{className:"text-white font-semibold bg-orange-500",icon:(0,n.jsx)(x.gyF,{}),type:"default",onClick:()=>{V.resetFields(),S(!W)}}),(0,n.jsx)(a.ZP,{icon:(0,n.jsx)(Z.pEI,{}),onClick:()=>{var e;null===(e=l.current)||void 0===e||e.click()}})]}),open:C,onCancel:()=>{_(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!W,children:(0,n.jsxs)(s.Z,{form:V,onFinish:E,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,n.jsx)(s.Z.Item,{name:"type_activity",rules:[{required:!0,message:"Vui l\xf2ng chọn loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(d.Z,{placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},children:null==T?void 0:T.map(e=>(0,n.jsx)(f.W,{value:e.type_activity_id,children:e.name},e.type_activity_id))})}),(0,n.jsx)(s.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean trạng th\xe1i"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(c.default,{placeholder:"Nhập t\xean trạng th\xe1i"})}),(0,n.jsx)(s.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag trạng th\xe1i"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(c.default,{placeholder:"Nhập tag trạng th\xe1i"})}),(0,n.jsx)(s.Z.Item,{style:{display:"flex",justifyContent:"end",margin:"0"},children:(0,n.jsx)(a.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{V.submit()},children:"Th\xeam"})})]})}),(0,n.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(b>-1),children:(0,n.jsxs)(s.Z,{form:A,onFinish:B,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,n.jsx)(s.Z.Item,{name:"type_activity",rules:[{required:!0,message:"Vui l\xf2ng chọn loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(d.Z,{placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},children:null==T?void 0:T.map(e=>(0,n.jsx)(f.W,{value:e.type_activity_id,children:e.name},e.type_activity_id))})}),(0,n.jsx)(s.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean trạng th\xe1i"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(c.default,{placeholder:"Nhập t\xean trạng th\xe1i"})}),(0,n.jsx)(s.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag trạng th\xe1i"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(c.default,{placeholder:"Nhập tag trạng th\xe1i"})}),(0,n.jsxs)(s.Z.Item,{style:{display:"flex",gap:"2px",justifyContent:"end",margin:"0"},children:[(0,n.jsx)(a.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),(0,n.jsx)(a.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{N(-1)},children:"Huỷ"})]})]})}),(0,n.jsx)("div",{className:"border-t-2 w-full overflow-x-auto",children:(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(o.Z,{columns:[{title:"M\xe3 trạng th\xe1i",dataIndex:"status_activity_id",key:"status_activity_id",render:(e,t,l)=>(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:["#",l+1,".",e]})},{title:"T\xean loại",dataIndex:["type_activity","name"],width:"25%",key:"name_type",render:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("strong",{className:"flex gap-2 items-center",children:e})})},{title:"Tag trạng th\xe1i",dataIndex:"name_tag",width:"25%",key:"name_tag",render:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("strong",{className:"flex gap-2 items-center",children:e})})},{title:"T\xean trạng th\xe1i",dataIndex:"name",width:"25%",key:"name",render:(e,t,l)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,(0,n.jsx)(a.ZP,{type:"link",onClick:()=>{F(l)},icon:(0,n.jsx)(p.FNg,{})}),(0,n.jsx)(a.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>q(null==t?void 0:t.status_activity_id),children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:I,pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}),(0,n.jsx)(w.Z,{refBtnType:l}),(0,n.jsx)(r.Z,{open:""!==L,title:"X\xf3a dữ liệu",onOk:R,onCancel:()=>{q("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})}},60792:function(e,t,l){var n=l(57437),i=l(2265),a=l(91626),r=l(58970),s=l(44967),d=l(16836),c=l(91250),o=l(46475),h=l(29487),u=l(94295),x=l(67776),p=l(68575),m=l(24307),y=l(94899),g=l(11265);t.Z=e=>{let{refBtnType:t}=e,[l,j]=(0,i.useState)(!1),[f,v]=(0,i.useState)(-1),Z=(0,p.I0)(),{datas:w}=(0,p.v9)(e=>e.get_type_activities),C=e=>{v(e),T.setFieldsValue(null==w?void 0:w[e])},[_,b]=(0,i.useState)(!1),{postdata:N}=(0,o.Z)(),[k]=(0,h.Z)(),[T]=(0,h.Z)(),[I,F]=(0,i.useState)(""),W=async()=>{200===await N(()=>m.Z.deleteTypeActivity([null!=I?I:""]))&&(Z((0,y.cW)()),F(""))},S=async e=>{try{let t=await N(()=>m.Z.createTypeActivity(e));201===t&&(Z((0,y.cW)()),k.resetFields(),b(!1))}catch(e){console.error("Error creating product:",e)}},P=async e=>{try{let t=await N(()=>{var t;return m.Z.updateTypeActivity(null!==(t=null==w?void 0:w[null!=f?f:0].type_activity_id)&&void 0!==t?t:"",e)});200===t&&(Z((0,y.cW)()),Z((0,g.ij)({})),v(-1))}catch(e){console.error("Error creating product:",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{j(!0)},ref:t,children:"Loại hoạt động"}),(0,n.jsx)(r.Z,{title:(0,n.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,n.jsx)("span",{children:"Loại hoạt động"}),(0,n.jsx)(a.ZP,{className:"text-white font-semibold bg-orange-500",icon:(0,n.jsx)(u.gyF,{}),type:"default",onClick:()=>{k.resetFields(),b(!_)}})]}),open:l,onCancel:()=>{j(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!_,children:(0,n.jsxs)(s.Z,{form:k,onFinish:S,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,n.jsx)(s.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(d.default,{placeholder:"Nhập t\xean loại"})}),(0,n.jsx)(s.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(d.default,{placeholder:"Nhập tag loại"})}),(0,n.jsx)(s.Z.Item,{style:{display:"flex",justifyContent:"end",margin:"0"},children:(0,n.jsx)(a.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{k.submit()},children:"Th\xeam"})})]})}),(0,n.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(f>-1),children:(0,n.jsxs)(s.Z,{form:T,onFinish:P,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,n.jsx)(s.Z.Item,{name:"name",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(d.default,{placeholder:"Nhập t\xean loại"})}),(0,n.jsx)(s.Z.Item,{name:"name_tag",rules:[{required:!0,message:"Vui l\xf2ng nhập tag loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(d.default,{placeholder:"Nhập tag loại"})}),(0,n.jsxs)(s.Z.Item,{style:{display:"flex",gap:"2px",justifyContent:"end",margin:"0"},children:[(0,n.jsx)(a.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),(0,n.jsx)(a.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{v(-1)},children:"Huỷ"})]})]})}),(0,n.jsx)("div",{className:"border-t-2 w-full overflow-x-auto",children:(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(c.Z,{columns:[{title:"M\xe3 loại",dataIndex:"type_activity_id",key:"type_activity_id",render:(e,t,l)=>(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:["#",l+1,".",e]})},{title:"Tag loại",dataIndex:"name_tag",width:"35%",key:"name_tag",render:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("strong",{className:"flex gap-2 items-center",children:e})})},{title:"T\xean loại",dataIndex:"name",width:"40%",key:"name",render:(e,t,l)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,(0,n.jsx)(a.ZP,{type:"link",onClick:()=>{C(l)},icon:(0,n.jsx)(x.FNg,{})}),(0,n.jsx)(a.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>F(null==t?void 0:t.type_activity_id),children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:w,pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}),(0,n.jsx)(r.Z,{open:""!==I,title:"X\xf3a dữ liệu",onOk:W,onCancel:()=>{F("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})}},63302:function(e,t,l){l.d(t,{Z:function(){return T}});var n=l(57437),i=l(4599),a=l(17166),r=l(46475),s=l(2950),d=l(70601),c=l(91626),o=l(58970),h=l(42654),u=l(44967),x=l(11632),p=l(23496),m=l(16836),y=l(90136),g=l(56612),j=l(29487),f=l(45747),v=l(7140),Z=l(2265),w=l(32768),C=l(68575),_=l(1329),b=l(71096),N=l.n(b),k=l(99376);function T(e){let{refBtnContract:t}=e,{customerID:l}=(0,k.useParams)(),b=(0,k.useSearchParams)(),T=(0,Z.useRef)(),I=(0,Z.useRef)(),F=(0,Z.useRef)(),{datas:W}=(0,C.v9)(e=>e.get_type_contract),{datas:S}=(0,C.v9)(e=>e.infos_customer),{datas:P}=(0,C.v9)(e=>e.get_projects);(0,Z.useEffect)(()=>{l&&V.setFieldValue("customer",l)},[l]),(0,Z.useEffect)(()=>{if(b){let e=b.get("customer"),t=b.get("project");e&&V.setFieldValue("customer",e),t&&V.setFieldValue("project",t)}},[b]);let[V]=(0,j.Z)(),{postdata:A}=(0,r.Z)(),L=(0,C.I0)(),[q,R]=(0,Z.useState)(!1),E=async e=>{let t=await A(()=>d.Z.createContract(e));(200===t||201===t)&&(L((0,s.Wq)(l?{customer:l}:null)),R(!1))},B=async()=>{V.submit()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",icon:(0,n.jsx)(w.b0B,{}),onClick:()=>{R(!0)},ref:t,children:"Th\xeam hợp đồng"}),(0,n.jsxs)(o.Z,{title:"Tạo hợp đồng",open:q,onCancel:()=>{R(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,n.jsx)(h.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,n.jsx)(v.Z,{tab:"Th\xf4ng tin hợp đồng",children:(0,n.jsxs)(u.Z,{layout:"vertical",form:V,onFinish:E,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[(0,n.jsx)(u.Z.Item,{name:"customer",label:"Kh\xe1ch h\xe0ng",rules:[{required:!0,message:"Vui l\xf2ng chọn kh\xe1ch h\xe0ng!"}],style:{width:"100%",flex:"1 1 0%"},children:(0,n.jsx)(x.Z,{placeholder:"Chọn kh\xe1ch h\xe0ng",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)(p.Z,{style:{margin:"8px 0"}}),(0,n.jsx)(c.ZP,{type:"link",onClick:()=>{var e;null===(e=T.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==S?void 0:S.map(e=>(0,n.jsx)(f.W,{value:e.info_id,children:e.name_company},e.info_id))})}),(0,n.jsx)(u.Z.Item,{name:"project",label:"Dự \xe1n",style:{width:"100%",flex:"1 1 0%"},children:(0,n.jsx)(x.Z,{placeholder:"Chọn dự \xe1n",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)(p.Z,{style:{margin:"8px 0"}}),(0,n.jsx)(c.ZP,{type:"link",onClick:()=>{var e;null===(e=I.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==P?void 0:P.map(e=>(0,n.jsx)(f.W,{value:e.project_id,children:e.name},e.project_id))})}),(0,n.jsx)(u.Z.Item,{name:"name_contract",label:"T\xean hợp đồng",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xean hợp đồng"}],style:{minWidth:"100%",flex:"1 1 0%"},children:(0,n.jsx)(m.default,{})}),(0,n.jsx)(u.Z.Item,{name:"code_contract",label:"M\xe3 hợp đồng",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập m\xe3 hợp đồng"}],style:{minWidth:"100%",flex:"1 1 0%"},children:(0,n.jsx)(m.default,{})}),(0,n.jsx)(u.Z.Item,{name:"price",label:"Gi\xe1 trị hợp đồng(vnđ)",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,n.jsx)(y.Z,{placeholder:"Price",className:"w-full",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>null==e?void 0:e.replace(/\$\s?|(,*)/g,"")})}),(0,n.jsx)(u.Z.Item,{name:"type_contract",label:"Loại hợp đồng",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,n.jsx)(x.Z,{placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>{var l;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(l=null==t?void 0:t.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)(p.Z,{style:{margin:"8px 0"}}),(0,n.jsx)(c.ZP,{type:"link",onClick:()=>{var e;null===(e=F.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==W?void 0:W.map(e=>(0,n.jsx)(f.W,{value:e.type_id,children:e.name_type},e.type_id))})}),(0,n.jsx)(u.Z.Item,{name:"type",label:"Loại thanh to\xe1n",rules:[{required:!0}],style:{minWidth:"240px",flex:"1 1 0%"},children:(0,n.jsxs)(x.Z,{placeholder:"Select status",children:[(0,n.jsx)(f.W,{value:"default",children:"Cố định"}),(0,n.jsx)(f.W,{value:"time",children:"Chu k\xec"})]})}),(0,n.jsx)(u.Z.Item,{name:"date_start",label:"Ng\xe0y bắt đầu",initialValue:"",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},getValueFromEvent:e=>null==e?void 0:e.format("YYYY-MM-DD"),getValueProps:e=>({value:e?N()(e):""}),children:(0,n.jsx)(g.default,{placeholder:"Chọn ng\xe0y bắt đầu",style:{width:"100%"}})}),(0,n.jsx)(u.Z.Item,{name:"date_expired",label:"Ng\xe0y kết th\xfac",rules:[{required:!0}],initialValue:"",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},getValueFromEvent:e=>null==e?void 0:e.format("YYYY-MM-DD"),getValueProps:e=>({value:e?N()(e):""}),children:(0,n.jsx)(g.default,{placeholder:"Chọn ng\xe0y kết th\xfac",style:{width:"100%"}})}),(0,n.jsx)(u.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:(0,n.jsx)(m.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]})},1)}),(0,n.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,n.jsx)(c.ZP,{type:"primary",onClick:B,children:"Tạo"})})]}),(0,n.jsx)(i.Z,{refBtnCustomer:T}),(0,n.jsx)(a.Z,{refBtnProject:I}),(0,n.jsx)(_.Z,{refBtnType:F})]})}},1329:function(e,t,l){var n=l(57437),i=l(2265),a=l(91626),r=l(58970),s=l(44967),d=l(16836),c=l(91250),o=l(46475),h=l(29487),u=l(94295),x=l(67776),p=l(68575),m=l(70601),y=l(29387),g=l(2950);t.Z=e=>{let{refBtnType:t}=e,[l,j]=(0,i.useState)(!1),[f,v]=(0,i.useState)(-1),Z=(0,p.I0)(),{datas:w}=(0,p.v9)(e=>e.get_type_contract),C=e=>{v(e),T.setFieldsValue(null==w?void 0:w[e])},[_,b]=(0,i.useState)(!1),{postdata:N}=(0,o.Z)(),[k]=(0,h.Z)(),[T]=(0,h.Z)(),[I,F]=(0,i.useState)(""),W=async()=>{200===await N(()=>m.Z.deleteTypeContract([null!=I?I:""]))&&(Z((0,y.eV)()),F(""))},S=async e=>{try{let t=await N(()=>m.Z.createTypeContract(e));201===t&&(Z((0,y.eV)()),k.resetFields(),b(!1))}catch(e){console.error("Error creating product:",e)}},P=async e=>{try{let t=await N(()=>{var t;return m.Z.updateTypeContract(null!==(t=null==w?void 0:w[null!=f?f:0].type_id)&&void 0!==t?t:"",e)});200===t&&(Z((0,y.eV)()),Z((0,g.Wq)(null)),v(-1))}catch(e){console.error("Error creating product:",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{j(!0)},ref:t,children:"Loại hợp đồng"}),(0,n.jsx)(r.Z,{title:(0,n.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,n.jsx)("span",{children:"Loại hợp đồng"}),(0,n.jsx)(a.ZP,{className:"text-white font-semibold bg-orange-500",icon:(0,n.jsx)(u.gyF,{}),type:"default",onClick:()=>{k.resetFields(),b(!_)}})]}),open:l,onCancel:()=>{j(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!_,children:(0,n.jsxs)(s.Z,{form:k,onFinish:S,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,n.jsx)(s.Z.Item,{name:"name_type",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(d.default,{placeholder:"Nhập t\xean loại"})}),(0,n.jsx)(s.Z.Item,{style:{display:"flex",justifyContent:"end",margin:"0"},children:(0,n.jsx)(a.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{k.submit()},children:"Th\xeam"})})]})}),(0,n.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(f>-1),children:(0,n.jsxs)(s.Z,{form:T,onFinish:P,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,n.jsx)(s.Z.Item,{name:"name_type",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(d.default,{placeholder:"Nhập t\xean loại"})}),(0,n.jsxs)(s.Z.Item,{style:{display:"flex",gap:"2px",justifyContent:"end",margin:"0"},children:[(0,n.jsx)(a.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),(0,n.jsx)(a.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{v(-1)},children:"Huỷ"})]})]})}),(0,n.jsx)("div",{className:"border-t-2 w-full overflow-x-auto",children:(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(c.Z,{columns:[{title:"M\xe3 loại",dataIndex:"type_id",key:"type_id",render:(e,t,l)=>(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:["#",l+1,".",e]})},{title:"T\xean loại",dataIndex:"name_type",width:"50%",key:"name_type",render:(e,t,l)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,(0,n.jsx)(a.ZP,{type:"link",onClick:()=>{C(l)},icon:(0,n.jsx)(x.FNg,{})}),(0,n.jsx)(a.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>{var e;return F(null!==(e=null==t?void 0:t.type_id)&&void 0!==e?e:"")},children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:w,pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}),(0,n.jsx)(r.Z,{open:""!==I,title:"X\xf3a dữ liệu",onOk:W,onCancel:()=>{F("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})}},27929:function(e,t,l){l.d(t,{N:function(){return a}});var n=l(20301),i=l(24307);let a=(0,n.hg)("typeActivityID/fetchTypeActivitiesID",async(e,t)=>{try{return await i.Z.getFullTypeActivityById(e)}catch(e){return t.rejectWithValue("Failed to fetch type activities")}}),r=(0,n.oM)({name:"typeActivity",initialState:{datas:void 0,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(a.pending,e=>{e.loading=!0,e.error=null}).addCase(a.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(a.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=r},29387:function(e,t,l){l.d(t,{eV:function(){return a}});var n=l(20301),i=l(70601);let a=(0,n.hg)("typeContract/fetchTypeContracts",async(e,t)=>{try{return await i.Z.getTypeContracts()}catch(e){return t.rejectWithValue("Failed to fetch type contracts")}}),r=(0,n.hg)("typeContract/createTypeContract",async(e,t)=>{try{return await i.Z.createTypeContract(e)}catch(e){return t.rejectWithValue("Failed to create type contract")}}),s=(0,n.hg)("typeContract/updateTypeContract",async(e,t)=>{let{id:l,data:n}=e;try{return await i.Z.updateTypeContract(l,n)}catch(e){return t.rejectWithValue("Failed to update type contract")}}),d=(0,n.oM)({name:"typeContract",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(a.pending,e=>{e.loading=!0,e.error=null}).addCase(a.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(a.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(r.fulfilled,(e,t)=>{e.datas.push(t.payload.data)}).addCase(s.fulfilled,(e,t)=>{let l=e.datas.findIndex(e=>e.type_id===t.payload.data.type_id);-1!==l&&(e.datas[l]=t.payload.data)})}}).reducer;t.ZP=d}}]);