(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8914],{55761:function(t,e,a){Promise.resolve().then(a.bind(a,43305))},43305:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return w}});var i=a(57437),l=a(78687),n=a(45664),d=a(11265),s=a(14301),c=a(3810),r=a(91626),o=a(33866),u=a(27589),v=a(2265),h=a(94295),x=a(22744),g=a(84154),f=a(68575);let m=t=>{let{name_tag:e}=t,a=n.g[e];return a?a.color:"default"};function y(){let t=(0,f.I0)();(0,v.useEffect)(()=>{t((0,d.k6)(new Date().getFullYear()))},[t]);let{datas:e}=(0,f.v9)(t=>t.get_activities);(0,v.useEffect)(()=>{console.log(e)},[e]);let a=t=>e.filter(e=>{let a=new Date(e.time_start);return console.log(t,a.getDate()===t.date(),a.getMonth()===t.month(),a.getFullYear()===t.year()),a.getDate()===t.date()&&a.getMonth()===t.month()&&a.getFullYear()===t.year()}),l=t=>e.filter(e=>{let a=new Date(e.time_start);return a.getMonth()===t.month()+1&&a.getFullYear()===t.year()}),n=t=>{let e=a(t);return console.log(e),(0,i.jsx)("ul",{className:"flex flex-col gap-2 px-2",children:e.map(t=>{var e,a,l,n,d,o,u,v,f,y;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("li",{className:"p-2 rounded-lg  bg-red-100/30 min-w-fit",children:(0,i.jsxs)(s.Z,{title:"Chi tiết",content:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"flex flex-col w-80 gap-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("p",{className:"font-semibold capitalize text-xl text-[#00A9AE]",children:t.name}),(0,i.jsx)("div",{children:(0,i.jsx)(c.Z,{className:"text-xs",color:null!==(f=m({name_tag:null==t?void 0:null===(e=t.status)||void 0===e?void 0:e.name_tag}))&&void 0!==f?f:"default",children:null==t?void 0:null===(a=t.status)||void 0===a?void 0:a.name})})]}),(0,i.jsxs)("div",{className:"flex gap-2 items-center text-black/80 text-sm",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(h.UYI,{className:"text-[#00A9AE]"}),(0,i.jsx)("p",{className:"font-medium capitalize   ",children:null==t?void 0:null===(l=t.type)||void 0===l?void 0:l.name})]}),(null===(n=t.contract)||void 0===n?void 0:n.name_contract)&&(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(g.JMN,{className:"text-[#00A9AE]"}),(0,i.jsx)("p",{className:"font-medium capitalize ",children:null===(d=t.contract)||void 0===d?void 0:d.name_contract})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(x.o2E,{className:"text-[#00A9AE]"}),(0,i.jsx)("p",{className:"font-medium capitalize ",children:new Date(t.time_start).toLocaleDateString("vi-VN")})]})]}),(0,i.jsx)("p",{className:"text-sm text-black/60",children:t.description}),(0,i.jsx)(r.ZP,{type:"default",className:"bg-[#ED8C22] ",children:"Xem chi tiết"})]})}),className:"w-full h-full flex gap-2",children:[(0,i.jsx)("div",{className:"bg-red-400 w-2 rounded-full"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("p",{className:"font-semibold capitalize min-w-24",children:t.name.length>20?"".concat(t.name.slice(0,20),"..."):t.name}),(0,i.jsx)("p",{className:"font-light lowercase text-slate-500 text-sm",children:null==t?void 0:null===(o=t.type)||void 0===o?void 0:o.name})]}),(0,i.jsx)("div",{className:"flex-1 flex justify-end",children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Z,{className:"text-xs",color:null!==(y=m({name_tag:null==t?void 0:null===(u=t.status)||void 0===u?void 0:u.name_tag}))&&void 0!==y?y:"default",children:null==t?void 0:null===(v=t.status)||void 0===v?void 0:v.name})})})]})},t.activity_id)})})})},y=t=>{let e=l(t),a=e.filter(t=>{var e,a;return(null==t?void 0:null===(e=t.status)||void 0===e?void 0:e.name_tag)==="in_progress"||(null==t?void 0:null===(a=t.status)||void 0===a?void 0:a.name_tag)==="on_hold"}),n=e.filter(t=>{var e,a;return(null==t?void 0:null===(e=t.status)||void 0===e?void 0:e.name_tag)==="awaiting_review"||(null==t?void 0:null===(a=t.status)||void 0===a?void 0:a.name_tag)==="requires_revision"}),d=e.filter(t=>{var e,a;return(null==t?void 0:null===(e=t.status)||void 0===e?void 0:e.name_tag)==="completed"||(null==t?void 0:null===(a=t.status)||void 0===a?void 0:a.name_tag)==="delivered"}),s=e.filter(t=>{var e,a;return(null==t?void 0:null===(e=t.status)||void 0===e?void 0:e.name_tag)==="canceled"||(null==t?void 0:null===(a=t.status)||void 0===a?void 0:a.name_tag)==="not_feasible"});return(0,i.jsxs)("div",{className:"p-2 rounded-lg flex flex-col gap-1",children:[e.length>0&&(0,i.jsx)(o.Z,{status:"default",text:"".concat(e.length," hoạt động mới")}),a.length>0&&(0,i.jsx)(o.Z,{status:"processing",text:"".concat(a.length," hoạt động đang thực hiện")}),n.length>0&&(0,i.jsx)(o.Z,{status:"warning",text:"".concat(n.length," hoạt động kiểm tra")}),d.length>0&&(0,i.jsx)(o.Z,{status:"success",text:"".concat(d.length," hoạt động ho\xe0n tất")}),s.length>0&&(0,i.jsx)(o.Z,{status:"error",text:"".concat(s.length," hoạt động hủy bỏ")})]})};return(0,i.jsx)("div",{children:(0,i.jsx)(u.Z,{cellRender:(t,e)=>"date"===e.type?n(t):"month"===e.type?y(t):e.originNode})})}var p=a(94899),j=a(65624),_=a(27648),N=a(61273),A=a(45202);function w(){var t;let{datas:e}=(0,f.v9)(t=>t.get_type_activities),a=(0,j.Z)(["admin-top","activity","activity-read"]),n=(0,f.I0)();return(0,v.useEffect)(()=>{a&&n((0,p.cW)())},[n,a]),(0,i.jsx)(i.Fragment,{children:a?(0,i.jsxs)("div",{className:"p-8 h-full",children:[(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(_.default,{href:"scheduler/gantt",children:(0,i.jsx)(r.ZP,{icon:(0,i.jsx)(N.Wq9,{})})}),(0,i.jsx)(_.default,{href:"scheduler/".concat(null==e?void 0:null===(t=e[0])||void 0===t?void 0:t.type_activity_id),children:(0,i.jsx)(r.ZP,{icon:(0,i.jsx)(A.DDi,{})})})]}),(0,i.jsx)(y,{})]}):(0,i.jsx)(l.Z,{})})}},11265:function(t,e,a){"use strict";a.d(e,{ij:function(){return n},k6:function(){return d}});var i=a(20301),l=a(24307);let n=(0,i.hg)("activity/fetchActivities",async(t,e)=>{try{return await l.Z.getAllActivities(t)}catch(t){return e.rejectWithValue("Failed to fetch activities")}}),d=(0,i.hg)("activity/fetchYearActivities",async(t,e)=>{try{return await l.Z.getAllYearActivities(t)}catch(t){return e.rejectWithValue("Failed to fetch activities")}}),s=(0,i.hg)("activity/createActivity",async(t,e)=>{try{return await l.Z.createActivity(t)}catch(t){return e.rejectWithValue("Failed to create activity")}}),c=(0,i.hg)("activity/updateActivity",async(t,e)=>{let{activity_id:a,data:i}=t;try{return await l.Z.updateActivity(a,i)}catch(t){return e.rejectWithValue("Failed to update activity")}}),r=(0,i.oM)({name:"activity",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:t=>{t.addCase(n.pending,t=>{t.loading=!0,t.error=null}).addCase(n.fulfilled,(t,e)=>{t.loading=!1,t.datas=e.payload.data}).addCase(n.rejected,(t,e)=>{t.loading=!1,t.error=e.payload}).addCase(d.pending,t=>{t.loading=!0,t.error=null}).addCase(d.fulfilled,(t,e)=>{t.loading=!1,t.datas=e.payload.data}).addCase(d.rejected,(t,e)=>{t.loading=!1,t.error=e.payload}).addCase(s.fulfilled,(t,e)=>{t.datas.push(e.payload.data)}).addCase(c.fulfilled,(t,e)=>{let a=t.datas.findIndex(t=>t.activity_id===e.payload.data.activity_id);-1!==a&&(t.datas[a]=e.payload.data)})}}).reducer;e.ZP=r},94899:function(t,e,a){"use strict";a.d(e,{cW:function(){return n}});var i=a(20301),l=a(24307);let n=(0,i.hg)("typeActivity/fetchTypeActivities",async(t,e)=>{try{return await l.Z.getAllTypeActivities()}catch(t){return e.rejectWithValue("Failed to fetch type activities")}}),d=(0,i.hg)("typeActivity/createTypeActivity",async(t,e)=>{try{return await l.Z.createTypeActivity(t)}catch(t){return e.rejectWithValue("Failed to create type activity")}}),s=(0,i.hg)("typeActivity/updateTypeActivity",async(t,e)=>{let{type_id:a,data:i}=t;try{return await l.Z.updateTypeActivity(a,i)}catch(t){return e.rejectWithValue("Failed to update type activity")}}),c=(0,i.oM)({name:"typeActivity",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:t=>{t.addCase(n.pending,t=>{t.loading=!0,t.error=null}).addCase(n.fulfilled,(t,e)=>{t.loading=!1,t.datas=e.payload.data}).addCase(n.rejected,(t,e)=>{t.loading=!1,t.error=e.payload}).addCase(d.fulfilled,(t,e)=>{t.datas.push(e.payload.data)}).addCase(s.fulfilled,(t,e)=>{let a=t.datas.findIndex(t=>t.type_activity_id===e.payload.data.type_activity_id);-1!==a&&(t.datas[a]=e.payload.data)})}}).reducer;e.ZP=c}},function(t){t.O(0,[6051,5452,7240,522,9212,5319,5651,6006,1047,8143,7526,7464,7821,3464,9481,9970,3281,6498,7648,2337,3197,2971,2117,1744],function(){return t(t.s=55761)}),_N_E=t.O()}]);