(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3824],{16258:function(e,t,a){Promise.resolve().then(a.bind(a,57991))},8900:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var n=a(1119),r=a(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},c=a(10703),o=r.forwardRef(function(e,t){return r.createElement(c.Z,(0,n.Z)({},e,{ref:t,icon:l}))})},54537:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var n=a(1119),r=a(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},c=a(10703),o=r.forwardRef(function(e,t){return r.createElement(c.Z,(0,n.Z)({},e,{ref:t,icon:l}))})},48235:function(e,t,a){"use strict";var n=a(2265),r=a(54011),l=function(){return(l=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c=(0,n.forwardRef)(function(e,t){return n.createElement(r.P,l({},e,{chartType:"Pie",ref:t}))});t.Z=c},3810:function(e,t,a){"use strict";a.d(t,{Z:function(){return _}});var n=a(2265),r=a(36760),l=a.n(r),c=a(18694),o=a(93350),s=a(53445),i=a(19722),d=a(6694),u=a(71744),h=a(95201),p=a(36360),m=a(12918),x=a(71140),y=a(99320);let f=e=>{let{paddingXXS:t,lineWidth:a,tagPaddingHorizontal:n,componentCls:r,calc:l}=e,c=l(n).sub(a).equal(),o=l(t).sub(a).equal();return{[r]:Object.assign(Object.assign({},(0,m.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:c,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:"".concat((0,h.unit)(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusSM,opacity:1,transition:"all ".concat(e.motionDurationMid),textAlign:"start",position:"relative",["&".concat(r,"-rtl")]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},["".concat(r,"-close-icon")]:{marginInlineStart:o,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:"all ".concat(e.motionDurationMid),"&:hover":{color:e.colorTextHeading}},["&".concat(r,"-has-color")]:{borderColor:"transparent",["&, a, a:hover, ".concat(e.iconCls,"-close, ").concat(e.iconCls,"-close:hover")]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",["&:not(".concat(r,"-checkable-checked):hover")]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},["> ".concat(e.iconCls," + span, > span + ").concat(e.iconCls)]:{marginInlineStart:c}}),["".concat(r,"-borderless")]:{borderColor:"transparent",background:e.tagBorderlessBg}}},g=e=>{let{lineWidth:t,fontSizeIcon:a,calc:n}=e,r=e.fontSizeSM;return(0,x.mergeToken)(e,{tagFontSize:r,tagLineHeight:(0,h.unit)(n(e.lineHeightSM).mul(r).equal()),tagIconSize:n(a).sub(n(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},v=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var j=(0,y.I$)("Tag",e=>f(g(e)),v),w=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)0>t.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a};let b=n.forwardRef((e,t)=>{let{prefixCls:a,style:r,className:c,checked:o,onChange:s,onClick:i}=e,d=w(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:h,tag:p}=n.useContext(u.E_),m=h("tag",a),[x,y,f]=j(m),g=l()(m,"".concat(m,"-checkable"),{["".concat(m,"-checkable-checked")]:o},null==p?void 0:p.className,c,y,f);return x(n.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},r),null==p?void 0:p.style),className:g,onClick:e=>{null==s||s(!o),null==i||i(e)}})))});var C=a(18536);let Z=e=>(0,C.Z)(e,(t,a)=>{let{textColor:n,lightBorderColor:r,lightColor:l,darkColor:c}=a;return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:n,background:l,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:c,borderColor:c},["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}});var S=(0,y.bk)(["Tag","preset"],e=>Z(g(e)),v);let N=(e,t,a)=>{let n="string"!=typeof a?a:a.charAt(0).toUpperCase()+a.slice(1);return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:e["color".concat(a)],background:e["color".concat(n,"Bg")],borderColor:e["color".concat(n,"Border")],["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}};var k=(0,y.bk)(["Tag","status"],e=>{let t=g(e);return[N(t,"success","Success"),N(t,"processing","Info"),N(t,"error","Error"),N(t,"warning","Warning")]},v),P=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)0>t.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a};let T=n.forwardRef((e,t)=>{let{prefixCls:a,className:r,rootClassName:h,style:p,children:m,icon:x,color:y,onClose:f,bordered:g=!0,visible:v}=e,w=P(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:b,direction:C,tag:Z}=n.useContext(u.E_),[N,T]=n.useState(!0),_=(0,c.Z)(w,["closeIcon","closable"]);n.useEffect(()=>{void 0!==v&&T(v)},[v]);let F=(0,o.o2)(y),E=(0,o.yT)(y),O=F||E,I=Object.assign(Object.assign({backgroundColor:y&&!O?y:void 0},null==Z?void 0:Z.style),p),R=b("tag",a),[B,D,W]=j(R),V=l()(R,null==Z?void 0:Z.className,{["".concat(R,"-").concat(y)]:O,["".concat(R,"-has-color")]:y&&!O,["".concat(R,"-hidden")]:!N,["".concat(R,"-rtl")]:"rtl"===C,["".concat(R,"-borderless")]:!g},r,h,D,W),L=e=>{e.stopPropagation(),null==f||f(e),e.defaultPrevented||T(!1)},[,M]=(0,s.Z)((0,s.w)(e),(0,s.w)(Z),{closable:!1,closeIconRender:e=>{let t=n.createElement("span",{className:"".concat(R,"-close-icon"),onClick:L},e);return(0,i.wm)(e,t,e=>({onClick:t=>{var a;null===(a=null==e?void 0:e.onClick)||void 0===a||a.call(e,t),L(t)},className:l()(null==e?void 0:e.className,"".concat(R,"-close-icon"))}))}}),Y="function"==typeof w.onClick||m&&"a"===m.type,A=x||null,H=A?n.createElement(n.Fragment,null,A,m&&n.createElement("span",null,m)):m,q=n.createElement("span",Object.assign({},_,{ref:t,className:V,style:I}),H,M,F&&n.createElement(S,{key:"preset",prefixCls:R}),E&&n.createElement(k,{key:"status",prefixCls:R}));return B(Y?n.createElement(d.Z,{component:"Tag"},q):q)});T.CheckableTag=b;var _=T},99376:function(e,t,a){"use strict";var n=a(35475);a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})},57991:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var n=a(57437),r=a(91626),l=a(42654),c=a(2265),o=a(32768),s=a(48235),i=a(70601),d=a(99376);let u=()=>{var e,t,a,r,l,o;let{id:u}=(0,d.useParams)(),[h,p]=(0,c.useState)(),m=async()=>{let e=await i.Z.getContractDashboardByProject(u);200===e.statusCode&&p(e.data)};(0,c.useEffect)(()=>{u&&m()},[u]);let x={data:[{type:"Ho\xe0n tất",value:null!==(e=null==h?void 0:h.completed)&&void 0!==e?e:0},{type:"Tạm dừng",value:null!==(t=null==h?void 0:h.hide)&&void 0!==t?t:0},{type:"Đang thực hiện",value:null!==(a=null==h?void 0:h.active)&&void 0!==a?a:0},{type:"Đ\xe3 hủy",value:null!==(r=null==h?void 0:h.delete)&&void 0!==r?r:0}],angleField:"value",colorField:"type",innerRadius:.6,label:!1,legend:{color:{title:!1,position:"right",rowPadding:5}},annotations:[{type:"text",style:{text:"".concat((null!==(l=null==h?void 0:h.completed)&&void 0!==l?l:0)/(null!==(o=null==h?void 0:h.total)&&void 0!==o?o:1)*100)+"%",x:"50%",y:"50%",textAlign:"center",fontSize:15,fontStyle:"bold"}}]};return(0,n.jsx)(s.Z,{...x})};var h=a(94295),p=a(3810),m=a(91250);a(62339);var x=a(22744);function y(){var e;let{id:t}=(0,d.useParams)(),[a,l]=(0,c.useState)(),[o,s]=(0,c.useState)(),u=[{title:"",dataIndex:"contract_id",className:"text-xs",render:()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.ZP,{icon:(0,n.jsx)(x.QZE,{className:"text-yellow-400"}),type:"link"})})||"N/A",width:2},{title:"",dataIndex:"name_contract",className:"text-xs",render:(e,t)=>{var a;let r="",l="";switch(t.status){case"active":r="gold",l="Đang thực hiện";break;case"completed":r="green",l="Bắt đầu";break;case"delete":r="red",l="Đ\xe3 x\xf3a";break;case"hide":r="gray",l="Đ\xe3 ẩn";break;default:r="default",l="Kh\xf4ng x\xe1c định"}return(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("a",{className:"capitalize",href:"/detail/contract/".concat(t.contract_id,"?contract=").concat(t.contract_id),children:(null!==(a=null==e?void 0:e.length)&&void 0!==a?a:0)>40?"".concat((null!=e?e:"").slice(0,40),"..."):null!=e?e:"N/A"}),(0,n.jsx)(p.Z,{className:"",color:r,children:l})]})}},{title:"",dataIndex:["customer","name_company"],className:"text-xs"},{title:"",dataIndex:["customer","phone_number"],className:"text-xs"}],h=async()=>{let e=await i.Z.getContractsFilterbyProject({id:t});if(200===e.statusCode){var a;let t=e.data,n=new Date,r=null!==(a=null==t?void 0:t[n.toLocaleDateString("vi-vn")])&&void 0!==a?a:[];null==t||delete t[n.toLocaleDateString("vi-vn")],s(t),l(r)}};return(0,c.useEffect)(()=>{t&&h()},[t]),(0,n.jsx)("div",{className:"flex flex-col gap-2 max-w-full w-full rounded-lg h-96",children:(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"w-full flex items-center",children:(0,n.jsxs)("p",{className:"font-bold text-sm text-center",children:["Ng\xe0y h\xf4m nay ",(0,n.jsxs)("span",{className:"font-light",children:["(",null!==(e=null==a?void 0:a.length)&&void 0!==e?e:0,")"]})]})}),(0,n.jsx)("div",{children:(0,n.jsx)(m.Z,{columns:u,dataSource:a,scroll:{x:"max-content"},showHeader:!1,pagination:!1,showSorterTooltip:{target:"sorter-icon"}})})]}),o&&Object.keys(o).map(e=>{var t;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsxs)("p",{className:"font-bold text-sm",children:["Ng\xe0y ",e," ",(0,n.jsxs)("span",{className:"font-light",children:["(",null==o?void 0:null===(t=o[e])||void 0===t?void 0:t.length,")"]})," "]}),(0,n.jsx)("div",{children:(0,n.jsx)(m.Z,{columns:u,dataSource:null==o?void 0:o[e],scroll:{x:"max-content"},showHeader:!1,pagination:!1,showSorterTooltip:{target:"sorter-icon"}})})]})})})]})})})})}var f=a(78049),g=a(77398),v=a.n(g);function j(){var e,t;let{id:a}=(0,d.useParams)(),[r,l]=(0,c.useState)(),o=async()=>{let e=await f.Z.getFullProject(a);200===e.statusCode&&l(e.data)};return(0,c.useEffect)(()=>{a&&o()},[a]),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-1 sm:w-auto w-96",children:[(0,n.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,n.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Kh\xe1ch h\xe0ng"}),(0,n.jsx)("a",{className:"flex-1 flex justify-start text-blue-500",href:"/customer/info/".concat(null==r?void 0:r.customer),children:null==r?void 0:null===(e=r.customer)||void 0===e?void 0:e.name_company})]}),(0,n.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,n.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Tổng chi ph\xed"}),(0,n.jsxs)("p",{className:"flex-1 flex justify-start",children:[null==r?void 0:null===(t=r.price)||void 0===t?void 0:t.toLocaleString("vi-vn"),"đ"]})]}),(0,n.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,n.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"T\xecnh trạng"}),(0,n.jsx)("p",{className:"flex-1 flex justify-start",children:(null==r?void 0:r.status)==="cancel"?"Đ\xe3 hủy":(null==r?void 0:r.status)==="completed"?"Ho\xe0n th\xe0nh":(null==r?void 0:r.status)==="pause"?"Tạm ngưng":(null==r?void 0:r.status)==="start"?"Đang thực hiện":"Đang chờ"})]}),(0,n.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,n.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Ng\xe0y tạo"}),(0,n.jsx)("p",{className:"flex-1 flex justify-start",children:v()(null==r?void 0:r.created_at).format("DD/MM/YYYY")})]}),(0,n.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,n.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Ng\xe0y bắt đầu"}),(0,n.jsxs)("p",{className:"flex-1 flex justify-start",children:[" ",v()(null==r?void 0:r.start_date).format("DD/MM/YYYY")]})]}),(0,n.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,n.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Hạn ho\xe0n th\xe0nh"}),(0,n.jsxs)("p",{className:"flex-1 flex justify-start",children:[" ",v()(null==r?void 0:r.end_date).format("DD/MM/YYYY")]})]})]})})}a(62986);var w=a(63302);function b(){var e,t,a,s,p,m,x,g,v,b,C,Z;let S=(0,c.useRef)(),N=(0,d.useRouter)(),{id:k}=(0,d.useParams)(),[P,T]=(0,c.useState)(),[_,F]=(0,c.useState)(),E=async()=>{let e=await i.Z.getContractDashboardByProject(k);200===e.statusCode&&F(e.data)};(0,c.useEffect)(()=>{k&&E()},[k]);let O=async()=>{let e=await f.Z.getFullProject(k);200===e.statusCode&&T(e.data)};(0,c.useEffect)(()=>{k&&O()},[k]);let I=[{label:"Chi tiết dự \xe1n",key:"detail",children:(0,n.jsx)(j,{})},{label:"Hợp đồng",key:"contract",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"py-4",children:(0,n.jsx)(r.ZP,{className:"text-xs",icon:(0,n.jsx)(h.gyF,{}),onClick:()=>{var e;null===(e=S.current)||void 0===e||e.click()},children:"Th\xeam hợp đồng"})}),(0,n.jsx)("div",{children:(0,n.jsx)(y,{})})]})}];return(0,n.jsxs)("div",{className:"flex flex-col w-full",children:[(0,n.jsx)("div",{className:"p-1",children:(0,n.jsx)(r.ZP,{type:"link",icon:(0,n.jsx)(o.Eg1,{}),onClick:()=>{N.back()},children:"Quay lại"})}),(0,n.jsx)("div",{className:"text-xl border-y-[1px] p-6",children:(0,n.jsx)("p",{children:"Chi tiết dự \xe1n"})}),(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("p",{className:"font-semibold",children:"Tổng quan"}),(0,n.jsxs)("p",{className:"text-sm text-gray-400",children:["Dự \xe1n ",null==P?void 0:P.name]}),(0,n.jsxs)("div",{className:"flex py-2 gap-2 items-center flex-wrap",children:[(0,n.jsx)("div",{className:"flex-1 max-w-96 shadow-2xl shadow-blue-500/20 rounded-md",children:(0,n.jsx)("div",{className:"h-32",children:(0,n.jsx)(u,{})})}),(0,n.jsxs)("div",{className:"flex gap-2 h-32 flex-1 justify-around shadow-[rgba(7,_65,_210,_0.1)_0px_9px_30px] rounded-md flex-wrap min-h-fit",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center p-2 min-w-fit",children:[(0,n.jsx)("p",{children:"HĐ đ\xfang hạn"}),(0,n.jsx)("p",{className:"font-semibold text-2xl",children:null!==(e=null==_?void 0:_.expired_success)&&void 0!==e?e:0}),(0,n.jsxs)("p",{children:[(null!==(t=null==_?void 0:_.expired_success)&&void 0!==t?t:0)/(null!==(a=null==_?void 0:_.total)&&void 0!==a?a:1),"% hợp đồng"]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center p-2 min-w-fit",children:[(0,n.jsx)("p",{children:"HĐ trễ hạn"}),(0,n.jsx)("p",{className:"font-semibold text-2xl",children:null!==(s=null==_?void 0:_.overdue)&&void 0!==s?s:0}),(0,n.jsxs)("p",{children:[(null!==(p=null==_?void 0:_.overdue)&&void 0!==p?p:0)/(null!==(m=null==_?void 0:_.total)&&void 0!==m?m:1),"% hợp đồng"]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center p-2 min-w-fit",children:[(0,n.jsx)("p",{children:"HĐ đ\xe3 hủy"}),(0,n.jsx)("p",{className:"font-semibold text-2xl",children:null!==(x=null==_?void 0:_.delete)&&void 0!==x?x:0}),(0,n.jsxs)("p",{children:[(null!==(g=null==_?void 0:_.delete)&&void 0!==g?g:0)/(null!==(v=null==_?void 0:_.total)&&void 0!==v?v:1),"% hợp đồng"]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center p-2 min-w-fit",children:[(0,n.jsx)("p",{children:"HĐ tạm dừng"}),(0,n.jsx)("p",{className:"font-semibold text-2xl",children:null!==(b=null==_?void 0:_.hide)&&void 0!==b?b:0}),(0,n.jsxs)("p",{children:[(null!==(C=null==_?void 0:_.hide)&&void 0!==C?C:0)/(null!==(Z=null==_?void 0:_.total)&&void 0!==Z?Z:1),"% hợp đồng"]})]})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(l.Z,{className:"w-full custom-tabs",items:I,tabPosition:"top"})})]}),(0,n.jsx)(w.Z,{refBtnContract:S})]})}var C=a(29387),Z=a(64985),S=a(63445),N=a(68575);function k(){let e=(0,N.I0)();return(0,c.useEffect)(()=>{e((0,Z.K)()),e((0,S.b)()),e((0,C.eV)())},[e]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(b,{})})}},63302:function(e,t,a){"use strict";a.d(t,{Z:function(){return P}});var n=a(57437),r=a(4599),l=a(17166),c=a(46475),o=a(2950),s=a(70601),i=a(91626),d=a(58970),u=a(42654),h=a(44967),p=a(11632),m=a(23496),x=a(16836),y=a(90136),f=a(56612),g=a(29487),v=a(45747),j=a(7140),w=a(2265),b=a(32768),C=a(68575),Z=a(1329),S=a(71096),N=a.n(S),k=a(99376);function P(e){let{refBtnContract:t}=e,{customerID:a}=(0,k.useParams)(),S=(0,k.useSearchParams)(),P=(0,w.useRef)(),T=(0,w.useRef)(),_=(0,w.useRef)(),{datas:F}=(0,C.v9)(e=>e.get_type_contract),{datas:E}=(0,C.v9)(e=>e.infos_customer),{datas:O}=(0,C.v9)(e=>e.get_projects);(0,w.useEffect)(()=>{a&&I.setFieldValue("customer",a)},[a]),(0,w.useEffect)(()=>{if(S){let e=S.get("customer"),t=S.get("project");e&&I.setFieldValue("customer",e),t&&I.setFieldValue("project",t)}},[S]);let[I]=(0,g.Z)(),{postdata:R}=(0,c.Z)(),B=(0,C.I0)(),[D,W]=(0,w.useState)(!1),V=async e=>{let t=await R(()=>s.Z.createContract(e));(200===t||201===t)&&(B((0,o.Wq)(a?{customer:a}:null)),W(!1))},L=async()=>{I.submit()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",icon:(0,n.jsx)(b.b0B,{}),onClick:()=>{W(!0)},ref:t,children:"Th\xeam hợp đồng"}),(0,n.jsxs)(d.Z,{title:"Tạo hợp đồng",open:D,onCancel:()=>{W(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,n.jsx)(u.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,n.jsx)(j.Z,{tab:"Th\xf4ng tin hợp đồng",children:(0,n.jsxs)(h.Z,{layout:"vertical",form:I,onFinish:V,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[(0,n.jsx)(h.Z.Item,{name:"customer",label:"Kh\xe1ch h\xe0ng",rules:[{required:!0,message:"Vui l\xf2ng chọn kh\xe1ch h\xe0ng!"}],style:{width:"100%",flex:"1 1 0%"},children:(0,n.jsx)(p.Z,{placeholder:"Chọn kh\xe1ch h\xe0ng",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)(m.Z,{style:{margin:"8px 0"}}),(0,n.jsx)(i.ZP,{type:"link",onClick:()=>{var e;null===(e=P.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==E?void 0:E.map(e=>(0,n.jsx)(v.W,{value:e.info_id,children:e.name_company},e.info_id))})}),(0,n.jsx)(h.Z.Item,{name:"project",label:"Dự \xe1n",style:{width:"100%",flex:"1 1 0%"},children:(0,n.jsx)(p.Z,{placeholder:"Chọn dự \xe1n",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)(m.Z,{style:{margin:"8px 0"}}),(0,n.jsx)(i.ZP,{type:"link",onClick:()=>{var e;null===(e=T.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==O?void 0:O.map(e=>(0,n.jsx)(v.W,{value:e.project_id,children:e.name},e.project_id))})}),(0,n.jsx)(h.Z.Item,{name:"name_contract",label:"T\xean hợp đồng",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xean hợp đồng"}],style:{minWidth:"100%",flex:"1 1 0%"},children:(0,n.jsx)(x.default,{})}),(0,n.jsx)(h.Z.Item,{name:"code_contract",label:"M\xe3 hợp đồng",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập m\xe3 hợp đồng"}],style:{minWidth:"100%",flex:"1 1 0%"},children:(0,n.jsx)(x.default,{})}),(0,n.jsx)(h.Z.Item,{name:"price",label:"Gi\xe1 trị hợp đồng(vnđ)",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,n.jsx)(y.Z,{placeholder:"Price",className:"w-full",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>null==e?void 0:e.replace(/\$\s?|(,*)/g,"")})}),(0,n.jsx)(h.Z.Item,{name:"type_contract",label:"Loại hợp đồng",style:{minWidth:"240px",flex:"1 1 0%"},children:(0,n.jsx)(p.Z,{placeholder:"Chọn loại",showSearch:!0,filterOption:(e,t)=>{var a;return(Array.isArray(null==t?void 0:t.children)?t.children.join(""):null!==(a=null==t?void 0:t.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)(m.Z,{style:{margin:"8px 0"}}),(0,n.jsx)(i.ZP,{type:"link",onClick:()=>{var e;null===(e=_.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==F?void 0:F.map(e=>(0,n.jsx)(v.W,{value:e.type_id,children:e.name_type},e.type_id))})}),(0,n.jsx)(h.Z.Item,{name:"type",label:"Loại thanh to\xe1n",rules:[{required:!0}],style:{minWidth:"240px",flex:"1 1 0%"},children:(0,n.jsxs)(p.Z,{placeholder:"Select status",children:[(0,n.jsx)(v.W,{value:"default",children:"Cố định"}),(0,n.jsx)(v.W,{value:"time",children:"Chu k\xec"})]})}),(0,n.jsx)(h.Z.Item,{name:"date_start",label:"Ng\xe0y bắt đầu",initialValue:"",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},getValueFromEvent:e=>null==e?void 0:e.format("YYYY-MM-DD"),getValueProps:e=>({value:e?N()(e):""}),children:(0,n.jsx)(f.default,{placeholder:"Chọn ng\xe0y bắt đầu",style:{width:"100%"}})}),(0,n.jsx)(h.Z.Item,{name:"date_expired",label:"Ng\xe0y kết th\xfac",rules:[{required:!0}],initialValue:"",className:" mb-0",style:{minWidth:"320px",flex:"1 1 0%"},getValueFromEvent:e=>null==e?void 0:e.format("YYYY-MM-DD"),getValueProps:e=>({value:e?N()(e):""}),children:(0,n.jsx)(f.default,{placeholder:"Chọn ng\xe0y kết th\xfac",style:{width:"100%"}})}),(0,n.jsx)(h.Z.Item,{name:"description",label:"M\xf4 tả",style:{width:"100%"},children:(0,n.jsx)(x.default.TextArea,{placeholder:"Description",autoSize:{minRows:3}})})]})},1)}),(0,n.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,n.jsx)(i.ZP,{type:"primary",onClick:L,children:"Tạo"})})]}),(0,n.jsx)(r.Z,{refBtnCustomer:P}),(0,n.jsx)(l.Z,{refBtnProject:T}),(0,n.jsx)(Z.Z,{refBtnType:_})]})}},1329:function(e,t,a){"use strict";var n=a(57437),r=a(2265),l=a(91626),c=a(58970),o=a(44967),s=a(16836),i=a(91250),d=a(46475),u=a(29487),h=a(94295),p=a(67776),m=a(68575),x=a(70601),y=a(29387),f=a(2950);t.Z=e=>{let{refBtnType:t}=e,[a,g]=(0,r.useState)(!1),[v,j]=(0,r.useState)(-1),w=(0,m.I0)(),{datas:b}=(0,m.v9)(e=>e.get_type_contract),C=e=>{j(e),P.setFieldsValue(null==b?void 0:b[e])},[Z,S]=(0,r.useState)(!1),{postdata:N}=(0,d.Z)(),[k]=(0,u.Z)(),[P]=(0,u.Z)(),[T,_]=(0,r.useState)(""),F=async()=>{200===await N(()=>x.Z.deleteTypeContract([null!=T?T:""]))&&(w((0,y.eV)()),_(""))},E=async e=>{try{let t=await N(()=>x.Z.createTypeContract(e));201===t&&(w((0,y.eV)()),k.resetFields(),S(!1))}catch(e){console.error("Error creating product:",e)}},O=async e=>{try{let t=await N(()=>{var t;return x.Z.updateTypeContract(null!==(t=null==b?void 0:b[null!=v?v:0].type_id)&&void 0!==t?t:"",e)});200===t&&(w((0,y.eV)()),w((0,f.Wq)(null)),j(-1))}catch(e){console.error("Error creating product:",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",onClick:()=>{g(!0)},ref:t,children:"Loại hợp đồng"}),(0,n.jsx)(c.Z,{title:(0,n.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,n.jsx)("span",{children:"Loại hợp đồng"}),(0,n.jsx)(l.ZP,{className:"text-white font-semibold bg-orange-500",icon:(0,n.jsx)(h.gyF,{}),type:"default",onClick:()=>{k.resetFields(),S(!Z)}})]}),open:a,onCancel:()=>{g(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!Z,children:(0,n.jsxs)(o.Z,{form:k,onFinish:E,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,n.jsx)(o.Z.Item,{name:"name_type",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(s.default,{placeholder:"Nhập t\xean loại"})}),(0,n.jsx)(o.Z.Item,{style:{display:"flex",justifyContent:"end",margin:"0"},children:(0,n.jsx)(l.ZP,{className:"bg-green-500 text-white font-semibold",onClick:()=>{k.submit()},children:"Th\xeam"})})]})}),(0,n.jsx)("div",{className:"bg-slate-200 px-1 py-2 rounded-md",hidden:!(v>-1),children:(0,n.jsxs)(o.Z,{form:P,onFinish:O,style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(0,n.jsx)(o.Z.Item,{name:"name_type",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean loại"}],style:{flex:"1 1 0%",margin:"0"},children:(0,n.jsx)(s.default,{placeholder:"Nhập t\xean loại"})}),(0,n.jsxs)(o.Z.Item,{style:{display:"flex",gap:"2px",justifyContent:"end",margin:"0"},children:[(0,n.jsx)(l.ZP,{className:"bg-yellow-500 text-white font-semibold",htmlType:"submit",children:"Cập nhật"}),(0,n.jsx)(l.ZP,{className:"bg-red-500 text-white font-semibold",onClick:()=>{j(-1)},children:"Huỷ"})]})]})}),(0,n.jsx)("div",{className:"border-t-2 w-full overflow-x-auto",children:(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(i.Z,{columns:[{title:"M\xe3 loại",dataIndex:"type_id",key:"type_id",render:(e,t,a)=>(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:["#",a+1,".",e]})},{title:"T\xean loại",dataIndex:"name_type",width:"50%",key:"name_type",render:(e,t,a)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("strong",{className:"flex gap-2 items-center",children:[e,(0,n.jsx)(l.ZP,{type:"link",onClick:()=>{C(a)},icon:(0,n.jsx)(p.FNg,{})}),(0,n.jsx)(l.ZP,{className:"  text-xs text-red-500 font-semibold",type:"text",onClick:()=>{var e;return _(null!==(e=null==t?void 0:t.type_id)&&void 0!==e?e:"")},children:"X\xf3a"})]})})}],scroll:{x:"max-content"},className:"custom-table",dataSource:b,pagination:{pageSize:10,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}),(0,n.jsx)(c.Z,{open:""!==T,title:"X\xf3a dữ liệu",onOk:F,onCancel:()=>{_("")},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]})}},2950:function(e,t,a){"use strict";a.d(t,{Wq:function(){return l}});var n=a(20301),r=a(70601);let l=(0,n.hg)("contract/fetchContracts",async(e,t)=>{try{if(e)return await r.Z.getYearContracts(e);return await r.Z.getContracts()}catch(e){return t.rejectWithValue("Failed to fetch contracts")}}),c=(0,n.hg)("contract/createContract",async(e,t)=>{try{return await r.Z.createContract(e)}catch(e){return t.rejectWithValue("Failed to create contract")}}),o=(0,n.hg)("contract/updateContract",async(e,t)=>{let{id:a,data:n}=e;try{return await r.Z.updateContract(a,n)}catch(e){return t.rejectWithValue("Failed to update contract")}}),s=(0,n.oM)({name:"contract",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(c.fulfilled,(e,t)=>{e.datas.push(t.payload.data)}).addCase(o.fulfilled,(e,t)=>{let a=e.datas.findIndex(e=>e.contract_id===t.payload.data.contract_id);-1!==a&&(e.datas[a]=t.payload.data)})}}).reducer;t.ZP=s},29387:function(e,t,a){"use strict";a.d(t,{eV:function(){return l}});var n=a(20301),r=a(70601);let l=(0,n.hg)("typeContract/fetchTypeContracts",async(e,t)=>{try{return await r.Z.getTypeContracts()}catch(e){return t.rejectWithValue("Failed to fetch type contracts")}}),c=(0,n.hg)("typeContract/createTypeContract",async(e,t)=>{try{return await r.Z.createTypeContract(e)}catch(e){return t.rejectWithValue("Failed to create type contract")}}),o=(0,n.hg)("typeContract/updateTypeContract",async(e,t)=>{let{id:a,data:n}=e;try{return await r.Z.updateTypeContract(a,n)}catch(e){return t.rejectWithValue("Failed to update type contract")}}),s=(0,n.oM)({name:"typeContract",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(c.fulfilled,(e,t)=>{e.datas.push(t.payload.data)}).addCase(o.fulfilled,(e,t)=>{let a=e.datas.findIndex(e=>e.type_id===t.payload.data.type_id);-1!==a&&(e.datas[a]=t.payload.data)})}}).reducer;t.ZP=s},28223:function(e,t,a){"use strict";a.d(t,{Y:function(){return l}});var n=a(83464);let r=n.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"application/json"},withCredentials:!0}),l=n.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});t.Z=r},70601:function(e,t,a){"use strict";var n=a(28223),r=a(90382);t.Z={getContracts:async()=>{try{return(await n.Z.get("/contract/all")).data}catch(e){throw(0,r.S)(e),e}},getContractAbout:async()=>{try{return(await n.Z.get("/contract/about")).data}catch(e){throw(0,r.S)(e),e}},getYearContracts:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,n]=e;null!=n&&t.append(a,n.toString())}),(await n.Z.get("/contract/all/filter?".concat(t.toString()))).data}catch(e){throw(0,r.S)(e),e}},getContract:async e=>{try{return(await n.Z.get("/contract/id/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},createContract:async e=>{try{return(await n.Z.post("/contract/create",e)).data}catch(e){throw(0,r.S)(e),e}},deleteContract:async e=>{try{return(await n.Z.delete("/contract",{data:e})).data}catch(e){throw(0,r.S)(e),e}},deleteTypeContract:async e=>{try{return(await n.Z.delete("/contract/type-contract",{data:e})).data}catch(e){throw(0,r.S)(e),e}},updateContract:async(e,t)=>{try{return(await n.Z.put("/contract/update/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},getTypeContracts:async()=>{try{return(await n.Z.get("/contract/type-contract")).data}catch(e){throw(0,r.S)(e),e}},getTypeFullContracts:async()=>{try{return(await n.Z.get("/contract/full-type-contract")).data}catch(e){throw(0,r.S)(e),e}},getFullContractDashboard:async()=>{try{return(await n.Z.get("/contract/dashboard")).data}catch(e){throw(0,r.S)(e),e}},getContractDashboardByProject:async e=>{try{return(await n.Z.get("/contract/dashboard-by-project/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},getDebtSupplier:async()=>{try{return(await n.Z.get("/contract/debt-supplier")).data}catch(e){throw(0,r.S)(e),e}},getPaymentContractDashboard:async()=>{try{return(await n.Z.get("/contract/payment-contract-dashboard")).data}catch(e){throw(0,r.S)(e),e}},getPaymentExpiredCustomer:async()=>{try{return(await n.Z.get("/contract/payment-expired-customer")).data}catch(e){throw(0,r.S)(e),e}},getPaymentReadyCustomer:async()=>{try{return(await n.Z.get("/contract/payment-ready-customer")).data}catch(e){throw(0,r.S)(e),e}},getPaymentReadySupplier:async()=>{try{return(await n.Z.get("/contract/payment-ready-supplier")).data}catch(e){throw(0,r.S)(e),e}},getRevenueTotal:async()=>{try{return(await n.Z.get("/contract/revenue-total-contract")).data}catch(e){throw(0,r.S)(e),e}},getYearCurrentContracts:async()=>{try{return(await n.Z.get("/contract/current-year")).data}catch(e){throw(0,r.S)(e),e}},getFullContractByTypeID:async e=>{try{return(await n.Z.get("/contract/contract-by-type-id/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},createTypeContract:async e=>{try{return(await n.Z.post("/contract/type-contract",e)).data}catch(e){throw(0,r.S)(e),e}},updateTypeContract:async(e,t)=>{try{return(await n.Z.put("/contract/type-contract/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},createPayment:async e=>{try{return(await n.Z.post("/contract/payment",e)).data}catch(e){throw(0,r.S)(e),e}},deletePayment:async e=>{try{return(await n.Z.delete("/contract/payment",{data:e})).data}catch(e){throw(0,r.S)(e),e}},updatePayment:async(e,t)=>{try{return(await n.Z.put("/contract/payment/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},getPaymentByProject:async e=>{try{return(await n.Z.get("/contract/payment-by-project/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},getAllPayments:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,n]=e;null!=n&&t.append(a,n.toString())}),(await n.Z.get("/contract/payment?".concat(t.toString()))).data}catch(e){throw(0,r.S)(e),e}},createTypeMethod:async e=>{try{return(await n.Z.post("/contract/type-method",e)).data}catch(e){throw(0,r.S)(e),e}},updateTypeMethod:async(e,t)=>{try{return(await n.Z.put("/contract/type-method/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},getAllTypeMethods:async()=>{try{return(await n.Z.get("/contract/type-method")).data}catch(e){throw(0,r.S)(e),e}},getDocumentContractById:async e=>{try{return(await n.Z.get("/contract/document/all/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},createDocumentContract:async e=>{try{return(await n.Y.post("/contract/document/create",e)).data}catch(e){throw(0,r.S)(e),e}},deleteDocumentContract:async e=>{try{return(await n.Z.delete("/contract/document/delete?id=".concat(e))).data}catch(e){throw(0,r.S)(e),e}},getContractsFilterbyProject:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,n]=e;null!=n&&t.append(a,n.toString())}),(await n.Z.get("/contract/get-contract-filter-by-project?".concat(t.toString()))).data}catch(e){throw(0,r.S)(e),e}},getContractsFilterFull:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,n]=e;null!=n&&t.append(a,n.toString())}),(await n.Z.get("/contract/get-contracts-filter-full?".concat(t.toString()))).data}catch(e){throw(0,r.S)(e),e}},importContracts:async e=>{try{return(await n.Z.post("/contract/import",e)).data}catch(e){throw(0,r.S)(e),e}}}},90382:function(e,t,a){"use strict";a.d(t,{S:function(){return r}});var n=a(7261);let r=e=>{var t,a,r;let l=(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"An unexpected error occurred",c=null===(r=e.response)||void 0===r?void 0:r.status;n.Am.dismiss(),403===c?n.Am.error("Bạn kh\xf4ng c\xf3 quyền"):n.Am.error(l)}},62339:function(){},62986:function(){}},function(e){e.O(0,[2836,5652,6051,7699,5706,5452,1994,6950,6990,1866,9508,5319,5651,6006,8143,7526,7464,7821,3464,9481,314,9970,5270,1412,3281,7651,6399,5422,1250,8970,4967,3569,3344,6498,3984,136,6612,480,7580,8026,1017,4599,6966,2971,2117,1744],function(){return e(e.s=16258)}),_N_E=e.O()}]);