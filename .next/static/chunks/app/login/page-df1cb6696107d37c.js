(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{69202:function(e,t,a){Promise.resolve().then(a.bind(a,42560))},42560:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var r=a(57437),s=a(2265);a(27073);var n=a(66789),o=a(44967),l=a(16836),c=a(91626),i=a(58970),u=a(27648),d=a(29487),h=a(46475),p=a(58143),g=a(68575),m=a(59679),y=a(99376),w=a(49089),f=a(22744),x=a(7261),Z=a(34819),S=a(58102);function C(){let[e]=(0,d.Z)(),[t]=(0,d.Z)(),a=(0,y.useRouter)(),C=(0,y.useSearchParams)(),[j,v]=(0,s.useState)(!1),[b,k]=(0,s.useState)(!1),[U,P]=(0,s.useState)(void 0),N=(0,g.I0)(),{datas:A}=(0,g.v9)(e=>e.get_profile),{datas:B}=(0,g.v9)(e=>e.get_profile_customer),{postdata:R}=(0,h.Z)(),O=async e=>{U?200===await R(()=>S.Z.loginCustomer(e))&&(N((0,Z.R)()),a.push("/customers")):200===await R(()=>p.Z.loginUser(e))&&(N((0,m.Y)()),a.push("/"))},T=async e=>{U||201===await R(()=>p.Z.sendSign(e))&&(k(!0),v(!1),t.resetFields())},L=async()=>{if(C){let e=C.get("type"),t=C.get("email"),r=C.get("password"),s=C.get("status");"success"===s&&x.Am.update("12",{render:"T\xe0i khoản đ\xe3 được x\xe1c nhận",type:"success",isLoading:!1,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),"fail"===s&&x.Am.update("12",{render:"T\xe0i khoản đ\xe3 bị lỗi",type:"error",isLoading:!1,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),t&&r?await O({email:t,password:r}):"customer"===e?(P(!0),B?a.push("/customers"):N((0,Z.R)())):(P(!1),A?a.push("/"):N((0,m.Y)()))}else P(!1),A?a.push("/"):N((0,m.Y)())};return(0,s.useEffect)(()=>{L()},[C,A,N,a,B]),(0,r.jsxs)("div",{className:"w-screen  h-screen bg-login flex justify-center items-center",children:[(0,r.jsx)("div",{className:"px-32 min-w-[605px] absolute xl:relative hidden xl:block flex-col gap-4",children:(0,r.jsx)(n.Z,{preview:!1,alt:"",src:"/logo2.png",className:" h-full ",height:80})}),(0,r.jsxs)("div",{className:"xl:border-l-2 flex flex-col sm:px-32 sm:mx-0 mx-2 sm:w-auto items-center w-full xl:gap-16 gap-8 py-16 justify-center xl:bg-transparent bg-white/20 rounded-xl xl:rounded-none xl:z-0 z-10",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2 max-w-60",children:[(0,r.jsx)(n.Z,{preview:!1,alt:"",src:"/logo2.png",className:" h-full w-full xl:hidden block",height:30}),(0,r.jsx)("p",{className:"font-medium text-white capitalize text-4xl xl:block hidden",children:"Welcome"}),(0,r.jsxs)("p",{className:"xl:uppercase xl:text-base text-white font-medium sm:text-xl text-base capitalize min-w-max",children:["Login to ",U?"Customer":"Admin"," dashboard"]})]}),(0,r.jsxs)(o.Z,{className:"max-w-60 w-full",form:e,onFinish:O,style:{},children:[(0,r.jsx)(o.Z.Item,{name:"email",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập t\xe0i khoản"}],style:{minWidth:"100%",flex:"1 1 0%",marginBottom:"6px"},children:(0,r.jsx)(l.default,{placeholder:"T\xe0i khoản",className:"!bg-white/25 !text-white"})}),(0,r.jsx)(o.Z.Item,{name:"password",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập mật khẩu"}],style:{minWidth:"100%",flex:"1 1 0%",margin:"0px"},children:(0,r.jsx)(l.default.Password,{placeholder:"Mật khẩu",className:"!bg-white/25 !text-white",onKeyDown:t=>{"Enter"===t.key&&e.submit()}})})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4  max-w-60 w-full",children:[(0,r.jsxs)("div",{className:"flex gap-1 w-full",children:[(0,r.jsx)(c.ZP,{className:"uppercase font-medium bg-[#ED8A21]  flex-1",type:"primary",onClick:()=>{e.submit()},children:"Login"}),(0,r.jsx)(c.ZP,{className:"uppercase ",type:"primary",icon:(0,r.jsx)(w.dfI,{}),onClick:()=>{v(!0)}})]}),(0,r.jsx)(u.default,{href:"#",className:"uppercase text-white text-sm font-medium underline ",children:"Forgetten your password?"})]})]}),(0,r.jsxs)(i.Z,{title:"Đăng k\xfd",open:j,onCancel:()=>{v(!1)},footer:null,width:"100%",style:{maxWidth:"320px"},children:[(0,r.jsx)(o.Z,{layout:"vertical",form:t,onFinish:T,children:(0,r.jsx)(o.Z.Item,{name:"email",label:"Email",rules:[{required:!0,type:"string",message:"Vui l\xf2ng nhập email"}],style:{width:"100%"},children:(0,r.jsx)(l.default,{placeholder:"Email của bạn"})})}),(0,r.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,r.jsx)(c.ZP,{type:"primary",onClick:()=>{t.submit()},children:"Đăng k\xfd"})})]}),(0,r.jsx)(i.Z,{open:b,onCancel:()=>{k(!1)},footer:null,width:"100%",style:{maxWidth:"320px"},children:(0,r.jsxs)("div",{className:"flex justify-center items-center flex-col",children:[(0,r.jsx)("div",{className:"p-16 w-fit rounded-full border-2 border-blue-600 mb-2",children:(0,r.jsx)(f.vB0,{className:"text-6xl text-green-500"})}),(0,r.jsx)("p",{className:"font-semibold text-3xl",children:"Gửi đơn đăng k\xfd th\xe0nh c\xf4ng"})]})})]})}function j(){return(0,r.jsx)("div",{children:(0,r.jsx)(C,{})})}},46475:function(e,t,a){"use strict";var r=a(2265),s=a(7261);t.Z=()=>{let[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(null);return{postdata:async e=>{let a=s.Am.loading("Processing...");try{let r=await e();if(r)return t(r),n(r.statusCode),200===r.statusCode||201===r.statusCode?s.Am.update(a,{render:r.message,type:"success",isLoading:!1,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.Am.update(a,{render:r.message,type:"error",isLoading:!1,position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),r.statusCode;return s.Am.update(a,{render:"No response received.",type:"error",isLoading:!1,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),null}catch(e){s.Am.update(a,{render:"An unexpected error occurred",type:"error",isLoading:!1,autoClose:3e3})}},statusCode:a,response:e}}},34819:function(e,t,a){"use strict";a.d(t,{R:function(){return n}});var r=a(58102),s=a(20301);let n=(0,s.hg)("customer/fetchCustomerProfile",async(e,t)=>{try{return await r.Z.getProfileCustomer()}catch(e){return t.rejectWithValue("Failed to fetch user info")}}),o=(0,s.oM)({name:"customer_profile",initialState:{datas:null,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data),400===t.payload.statusCode&&(e.loading=!1,e.datas=null)}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=o},59679:function(e,t,a){"use strict";a.d(t,{Y:function(){return n}});var r=a(58143),s=a(20301);let n=(0,s.hg)("user/fetchUserProfile",async(e,t)=>{try{return await r.Z.getProfile()}catch(e){return t.rejectWithValue("Failed to fetch user info")}}),o=(0,s.oM)({name:"user_profile",initialState:{datas:null,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data),400===t.payload.statusCode&&(e.loading=!1,e.datas=null)}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=o},28223:function(e,t,a){"use strict";a.d(t,{Y:function(){return n}});var r=a(83464);let s=r.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"application/json"},withCredentials:!0}),n=r.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});t.Z=s},58102:function(e,t,a){"use strict";var r=a(90382),s=a(28223);t.Z={getProfileCustomer:async()=>{try{return(await s.Z.get("/customer/profile",{withCredentials:!0})).data}catch(e){throw(0,r.S)(e),e}},loginCustomer:async e=>(await s.Z.post("/auth/login-customer",e,{withCredentials:!0})).data,logoutCustomer:async()=>(await s.Z.post("/auth/logout-customer")).data,updatePasswordCustomer:async e=>{try{return(await s.Z.put("/customer/update-password",e)).data}catch(e){throw(0,r.S)(e),e}},updateAccountCustomerProfile:async e=>{try{return(await s.Y.put("/customer/update-account-customer-profile",e)).data}catch(e){throw(0,r.S)(e),e}},getAllCustomerByToken:async()=>{try{return(await s.Z.get("/customer/get-all-customer-by-token")).data}catch(e){throw(0,r.S)(e),e}},getAllProjectByToken:async()=>{try{return(await s.Z.get("/project/all-customer")).data}catch(e){throw(0,r.S)(e),e}},getAllPriceQuoteByToken:async()=>{try{return(await s.Z.get("/price_quote/all-customer")).data}catch(e){throw(0,r.S)(e),e}},getAllContractByToken:async()=>{try{return(await s.Z.get("/contract/all-customer")).data}catch(e){throw(0,r.S)(e),e}},getAllPaymentByToken:async()=>{try{return(await s.Z.get("/contract/all-payment-customer")).data}catch(e){throw(0,r.S)(e),e}}}},58143:function(e,t,a){"use strict";var r=a(90382),s=a(28223);t.Z={getUsers:async()=>{try{return(await s.Z.get("/user/all")).data}catch(e){throw(0,r.S)(e),e}},getProfile:async()=>{try{return(await s.Z.get("/user/profile",{withCredentials:!0})).data}catch(e){throw(0,r.S)(e),e}},getUserIDAdmin:async e=>{try{return(await s.Z.get("/user/admin/id/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},getUserIDAdminByUser:async()=>{try{return(await s.Z.get("/user/user")).data}catch(e){throw(0,r.S)(e),e}},loginUser:async e=>(await s.Z.post("/auth/login",e,{withCredentials:!0})).data,sendSign:async e=>(await s.Z.post("/auth/send-req-sign",e,{withCredentials:!0})).data,logoutUser:async()=>(await s.Z.post("/auth/logout")).data,createUser:async e=>{try{return(await s.Y.post("/user/create",e)).data}catch(e){throw(0,r.S)(e),e}},deleteUser:async e=>{try{return(await s.Z.delete("/user",{data:e})).data}catch(e){throw(0,r.S)(e),e}},updateUser:async(e,t)=>{try{return(await s.Y.put("/user/update/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},updateUserProfile:async e=>{try{return(await s.Y.put("/user/update-profile",e)).data}catch(e){throw(0,r.S)(e),e}},updatePasswordUser:async e=>{try{return(await s.Z.put("/user/update-password",e)).data}catch(e){throw(0,r.S)(e),e}},getCategoryRoleFull:async()=>{try{return(await s.Z.get("/user/category-role-full")).data}catch(e){throw(0,r.S)(e),e}},getRoleUserFullByID:async e=>{try{return(await s.Z.get("/user/get-full-role-user-id/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},getRoleUserFullByUser:async()=>{try{return(await s.Z.get("/user/get-full-role-user")).data}catch(e){throw(0,r.S)(e),e}},getRoleUserFullByAccess:async()=>{try{return(await s.Z.get("/user/get-full-role-user-access/")).data}catch(e){throw(0,r.S)(e),e}},updateRoleUserFullByID:async(e,t)=>{try{return(await s.Z.post("/user/full-role-user-id/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},updateGroupRole:async(e,t)=>{try{return(await s.Z.put("/user/group-role/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},getRoleByGroup:async e=>{try{return(await s.Z.get("/user/group-role/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},getGroupUser:async()=>{try{return(await s.Z.get("/user/get-group-user")).data}catch(e){throw(0,r.S)(e),e}},getNotifyUser:async(e,t)=>{try{return(await s.Z.get("/user/get-notify?page=".concat(e,"&limit=").concat(t))).data}catch(e){throw(0,r.S)(e),e}},updateNotifyUser:async e=>{try{if(e)return(await s.Z.put("/user/update-notify/".concat(e))).data;return(await s.Z.put("/user/update-all-notify")).data}catch(e){throw(0,r.S)(e),e}},getCountNotifyUser:async()=>{try{return(await s.Z.get("/user/get-count-notify")).data}catch(e){throw(0,r.S)(e),e}},createGroupUser:async e=>{try{return(await s.Z.post("/user/create-group-user",e)).data}catch(e){throw(0,r.S)(e),e}},updateGroupUser:async(e,t)=>{try{return(await s.Z.put("/user/update-group-user/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},deleteGroupUser:async e=>{try{return(await s.Z.delete("/user/group-user",{data:e})).data}catch(e){throw(0,r.S)(e),e}},getFilterUser:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&t.append(a,r.toString())}),(await s.Z.get("/user/get-user-filter?".concat(t.toString()))).data}catch(e){throw(0,r.S)(e),e}},getTimeKeeping:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&t.append(a,r.toString())}),(await s.Z.get("/user/timekeeping?".concat(t.toString()))).data}catch(e){throw(0,r.S)(e),e}},getTimeKeepingPerson:async e=>{try{let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&t.append(a,r.toString())}),(await s.Z.get("/user/timekeeping-person?".concat(t.toString()))).data}catch(e){throw(0,r.S)(e),e}},createTimeKeeping:async()=>{try{return(await s.Z.post("/user/timekeeping")).data}catch(e){throw(0,r.S)(e),e}},checkTimeKeeping:async()=>{try{return(await s.Z.get("/user/check-timekeeping")).data}catch(e){throw(0,r.S)(e),e}}}},90382:function(e,t,a){"use strict";a.d(t,{S:function(){return s}});var r=a(7261);let s=e=>{var t,a,s;let n=(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"An unexpected error occurred",o=null===(s=e.response)||void 0===s?void 0:s.status;r.Am.dismiss(),403===o?r.Am.error("Bạn kh\xf4ng c\xf3 quyền"):r.Am.error(n)}},27073:function(){}},function(e){e.O(0,[7475,6051,7699,5319,5651,6006,8143,7526,7464,7821,3464,9970,5270,3281,7651,8970,4967,3569,7648,5133,2971,2117,1744],function(){return e(e.s=69202)}),_N_E=e.O()}]);