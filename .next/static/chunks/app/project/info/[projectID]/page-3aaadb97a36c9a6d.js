(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6680],{57782:function(e,s,l){Promise.resolve().then(l.bind(l,76417))},76417:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return A}});var a=l(57437),t=l(78687),n=l(11632),i=l(42654),r=l(2265),d=l(20396),c=l(68575),o=l(99376),x=l(24307),u=l(70601),m=l(78049),h=l(59958),v=l(3810),f=l(77398),p=l.n(f),j=l(61273),g=l(22744);function N(){var e,s,l,t,n,i,d,f,N,w,y,b,_,k,Z;let{projectID:C}=(0,o.useParams)(),{datas:D}=(0,c.v9)(e=>e.infos_customer),[S,T]=(0,r.useState)([]),[I,H]=(0,r.useState)([]),[P,z]=(0,r.useState)(0),[L,Y]=(0,r.useState)(),F=async()=>{let e=await x.Z.getAllWorkByProject(C),s=await m.Z.getProject(C),l=await u.Z.getPaymentByProject(C);if(200===e.statusCode&&200===s.statusCode&&200===l.statusCode){var a,t;Y(s.data),T(null!==(a=e.data)&&void 0!==a?a:[]),H(null!==(t=l.data)&&void 0!==t?t:[]),z(e.data.reduce((e,s)=>"completed"===s.status.name_tag?e+1:e,0))}};(0,r.useEffect)(()=>{C&&F()},[C]);let A=(e,s)=>{let l=new Date(e),a=new Date(s),t=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate());return Math.ceil(Math.abs(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())-t)/864e5)};return(0,a.jsxs)("div",{className:"p-4 flex flex-wrap shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),0px_1px_0px_0px_rgba(25,28,33,0.02),0px_0px_0px_1px_rgba(25,28,33,0.08)] mt-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 flex-1 min-w-[500px]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"uppercase font-semibold text-gray-500",children:"Tổng quan"}),(0,a.jsxs)("div",{className:"flex w-full flex-wrap",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-1 sm:w-auto w-72",children:[(0,a.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,a.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Kh\xe1ch h\xe0ng"}),(0,a.jsx)("a",{className:"flex-1 flex justify-start text-blue-500",href:"/customer/info/".concat(null==L?void 0:L.customer),children:null==D?void 0:null===(e=D.find(e=>{var s;return e.info_id===(null!==(s=null==L?void 0:L.customer)&&void 0!==s?s:"")}))||void 0===e?void 0:e.name_company})]}),(0,a.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,a.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Tổng chi ph\xed"}),(0,a.jsxs)("p",{className:"flex-1 flex justify-start",children:[null==L?void 0:null===(s=L.price)||void 0===s?void 0:s.toLocaleString("vi-vn"),"đ"]})]}),(0,a.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,a.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"T\xecnh trạng"}),(0,a.jsx)("p",{className:"flex-1 flex justify-start",children:(null==L?void 0:L.status)==="cancel"?"Đ\xe3 hủy":(null==L?void 0:L.status)==="completed"?"Ho\xe0n th\xe0nh":(null==L?void 0:L.status)==="pause"?"Tạm ngưng":(null==L?void 0:L.status)==="start"?"Đang thực hiện":"Đang chờ"})]}),(0,a.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,a.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Ng\xe0y tạo"}),(0,a.jsx)("p",{className:"flex-1 flex justify-start",children:p()(null==L?void 0:L.created_at).format("DD/MM/YYYY")})]}),(0,a.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,a.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Ng\xe0y bắt đầu"}),(0,a.jsxs)("p",{className:"flex-1 flex justify-start",children:[" ",p()(null==L?void 0:L.start_date).format("DD/MM/YYYY")]})]}),(0,a.jsxs)("div",{className:"border-t-[1px] flex w-full py-2",children:[(0,a.jsx)("p",{className:"flex-1 flex justify-start font-medium",children:"Hạn ho\xe0n th\xe0nh"}),(0,a.jsxs)("p",{className:"flex-1 flex justify-start",children:[" ",p()(null==L?void 0:L.end_date).format("DD/MM/YYYY")]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 justify-center items-center w-80 h-96 sm:h-full",children:[(0,a.jsx)("p",{className:"font-medium",children:"Tiến độ đạt được"}),(0,a.jsx)(h.Z,{type:"circle",percent:P/S.length*100,status:(null==L?void 0:L.status)==="completed"?"success":(null==L?void 0:L.status)==="cancel"?"exception":"normal"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 border-t-[1px] py-2",children:[(0,a.jsx)("p",{className:"uppercase font-semibold text-gray-500",children:"M\xf4 tả"}),(0,a.jsx)("p",{children:null==L?void 0:L.description})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex-col flex gap-8",children:[(0,a.jsxs)("div",{className:"flex gap-4 sm:gap-8 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-1 gap-2 sm:w-auto w-80",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"uppercase font-semibold",children:[S.length-P," / ",S.length," C\xf4ng việc chưa ho\xe0n th\xe0nh"]}),(0,a.jsx)(j.ETl,{})]}),(0,a.jsxs)("p",{className:"font-medium text-gray-500",children:[P/S.length*100,"%"]}),(0,a.jsx)(h.Z,{percent:P/S.length*100,showInfo:!1})]}),(0,a.jsxs)("div",{className:"flex-col sm:flex-1  gap-2 flex sm:w-auto w-80",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"uppercase font-semibold",children:[A(new Date,null!==(l=null==L?void 0:L.end_date)&&void 0!==l?l:new Date)," ","/"," ",A(null!==(t=null==L?void 0:L.start_date)&&void 0!==t?t:new Date,null!==(n=null==L?void 0:L.end_date)&&void 0!==n?n:new Date)," ","Ng\xe0y c\xf2n lại"]}),(0,a.jsx)(g.f$3,{})]}),(0,a.jsxs)("p",{className:"font-medium text-gray-500",children:[A(new Date,null!==(i=null==L?void 0:L.end_date)&&void 0!==i?i:new Date)/(0===A(null!==(d=null==L?void 0:L.start_date)&&void 0!==d?d:new Date,null!==(f=null==L?void 0:L.end_date)&&void 0!==f?f:new Date)?1:A(null!==(N=null==L?void 0:L.start_date)&&void 0!==N?N:new Date,null!==(w=null==L?void 0:L.end_date)&&void 0!==w?w:new Date))*100,"%"]}),(0,a.jsx)(h.Z,{percent:A(new Date,null!==(y=null==L?void 0:L.end_date)&&void 0!==y?y:new Date)/(0===A(null!==(b=null==L?void 0:L.start_date)&&void 0!==b?b:new Date,null!==(_=null==L?void 0:L.end_date)&&void 0!==_?_:new Date)?1:A(null!==(k=null==L?void 0:L.start_date)&&void 0!==k?k:new Date,null!==(Z=null==L?void 0:L.end_date)&&void 0!==Z?Z:new Date))*100,showInfo:!1})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(v.Z,{className:"flex flex-col gap-2 flex-1 p-4",children:[(0,a.jsx)("p",{children:"TỔNG H\xd3A ĐƠN"}),(0,a.jsxs)("p",{className:"font-bold",children:[I.reduce((e,s)=>{var l;return e+(null!==(l=s.price)&&void 0!==l?l:0)},0).toLocaleString("vi-vn"),"đ"]})]}),(0,a.jsxs)(v.Z,{className:"flex flex-col gap-2 flex-1 p-4",color:"green",children:[(0,a.jsx)("p",{children:"Đ\xc3 THANH TO\xc1N"}),(0,a.jsxs)("p",{className:"font-bold",children:[I.reduce((e,s)=>{if("success"===s.status){var l;return e+(null!==(l=s.price)&&void 0!==l?l:0)}return e},0).toLocaleString("vi-vn"),"đ"]})]}),(0,a.jsxs)(v.Z,{className:"flex flex-col gap-2 flex-1 p-4",color:"yellow",children:[(0,a.jsx)("p",{children:"CHỜ THANH TO\xc1N"}),(0,a.jsxs)("p",{className:"font-bold",children:[I.reduce((e,s)=>{var l,a;let t=new Date,n=new Date(null!==(l=s.date_expired)&&void 0!==l?l:"");return"pending"===s.status&&t.getTime()<=n.getTime()?e+(null!==(a=s.price)&&void 0!==a?a:0):e},0).toLocaleString("vi-vn"),"đ"]})]}),(0,a.jsxs)(v.Z,{className:"flex flex-col gap-2 flex-1 p-4",color:"red",children:[(0,a.jsx)("p",{children:"QU\xc1 HẠN"}),(0,a.jsxs)("p",{className:"font-bold",children:[I.reduce((e,s)=>{var l,a;let t=new Date,n=new Date(null!==(l=s.date_expired)&&void 0!==l?l:"");return"pending"===s.status&&t.getTime()>n.getTime()?e+(null!==(a=s.price)&&void 0!==a?a:0):e},0).toLocaleString("vi-vn"),"đ"]})]})]})]})]})}var w=l(14687);function y(){return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[(0,a.jsx)("p",{className:"text-xl",children:"Hoạt động"}),(0,a.jsx)(w.Z,{})]})}var b=l(74659);function _(){return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[(0,a.jsx)("p",{className:"text-xl",children:"C\xf4ng việc"}),(0,a.jsx)(b.Z,{})]})}var k=l(6061);function Z(){return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[(0,a.jsx)("p",{className:"text-xl",children:"H\xf3a đơn"}),(0,a.jsx)(k.Z,{})]})}var C=l(30531);function D(){return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[(0,a.jsx)("p",{className:"text-xl",children:"B\xe1o gi\xe1"}),(0,a.jsx)(C.Z,{})]})}var S=l(6246);function T(){return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[(0,a.jsx)("p",{className:"text-xl",children:"Nhắn tin dự \xe1n"}),(0,a.jsx)(S.default,{})]})}function I(){let e=(0,o.useRouter)(),s=(0,d.GS)({maxWidth:639}),{projectID:l}=(0,o.useParams)(),{datas:t}=(0,c.v9)(e=>e.get_projects),r=[{label:"Th\xf4ng tin dự \xe1n",key:"project",children:(0,a.jsx)(N,{})},{label:"Hoạt động",key:"activity",children:(0,a.jsx)(y,{})},{label:"C\xf4ng việc",key:"work",children:(0,a.jsx)(_,{})},{label:"H\xf3a đơn",key:"invoice",children:(0,a.jsx)(Z,{})},{label:"B\xe1o gi\xe1",key:"price_quote",children:(0,a.jsx)(D,{})},{label:"Nhắn tin",key:"chat",children:(0,a.jsx)(T,{})}];return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{children:(0,a.jsx)(n.Z,{placeholder:"Dự \xe1n",style:{minWidth:120,flex:"1 1 0%"},defaultValue:l,onChange:s=>{e.push("/project/info/".concat(s||t[0].project_id))},showSearch:!0,allowClear:!0,filterOption:(e,s)=>{var l;return(null!==(l=null==s?void 0:s.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},options:t.map(e=>({value:e.project_id,label:e.name}))})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(i.Z,{items:r,tabPosition:"".concat(s?"top":"right")})})]})}var H=l(2950),P=l(47256),z=l(64985),L=l(63445),Y=l(41259),F=l(65624);function A(){let e=(0,c.I0)(),{projectID:s}=(0,o.useParams)(),l=(0,F.Z)(["admin-top","project","project-read"]);return(0,r.useEffect)(()=>{l&&(e((0,z.K)()),e((0,L.b)()),e((0,H.Wq)({})),e((0,Y.C)()),e((0,P.cQ)({project:s})))},[e,l,s]),(0,a.jsx)("div",{className:"p-4",children:l?(0,a.jsx)(I,{}):(0,a.jsx)(t.Z,{})})}},74659:function(e,s,l){"use strict";l.d(s,{Z:function(){return O}});var a=l(57437),t=l(2265),n=l(91626),i=l(66487),r=l(11632),d=l(58970),c=l(91250),o=l(56771),x=l(68575),u=l(15162),m=l(46475),h=l(24307),v=l(80841),f=l(22744),p=l(65624),j=l(99376),g=l(95805),N=l(32489),w=l(96246),y=l(12381),b=l(86595),_=l(94766),k=l(74291),Z=l(23675),C=l(75060);function D(e){let{open:s,onOpenChange:l,list_id:n,userId:i,workId:r,userName:d}=e,[c,o]=(0,t.useState)(0),[x,u]=(0,t.useState)(""),[m,v]=(0,t.useState)(""),[f,p]=(0,t.useState)(!1),j=async()=>{p(!0);try{let e={progress:c,description:x,user_work:n};m&&""!==m?await h.Z.updateReviewUser(m,e):await h.Z.createReviewUser(e),o(0),u(""),l(!1)}catch(e){}finally{p(!1)}},g=async()=>{let e=await h.Z.getReviewUserByWork(i,r);if(200===e.statusCode){var s;o(e.data.progress),u(e.data.description),v(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.review_id)}};return(0,t.useEffect)(()=>{console.log("fetchData:",i,r),i&&r&&g()},[r,i]),(0,a.jsx)(k.Vq,{open:s,onOpenChange:l,children:(0,a.jsxs)(k.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(k.fK,{children:[(0,a.jsxs)(k.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5 text-yellow-500"}),"Đ\xe1nh gi\xe1 c\xf4ng việc"]}),(0,a.jsxs)(k.Be,{children:["Đ\xe1nh gi\xe1 tiến độ v\xe0 chất lượng c\xf4ng việc của ",(0,a.jsx)("strong",{children:d})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)(C._,{htmlFor:"progress",children:["Tiến độ ho\xe0n th\xe0nh: ",c,"%"]}),(0,a.jsx)("input",{id:"progress",type:"range",min:"0",max:"100",step:"5",value:c,onChange:e=>o(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"0%"}),(0,a.jsx)("span",{children:"50%"}),(0,a.jsx)("span",{children:"100%"})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(C._,{htmlFor:"description",children:"Nhận x\xe9t"}),(0,a.jsx)(Z.g,{id:"description",placeholder:"Nhập nhận x\xe9t về c\xf4ng việc của nh\xe2n vi\xean...",value:x,onChange:e=>u(e.target.value),rows:4})]})]}),(0,a.jsxs)(k.cN,{children:[(0,a.jsx)(y.zx,{variant:"outline",onClick:()=>l(!1),disabled:f,children:"Hủy"}),(0,a.jsx)(y.zx,{onClick:j,disabled:f,className:"flex items-center gap-2",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Đang gửi..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Gửi đ\xe1nh gi\xe1"]})})]})]})})}function S(e){let{open:s,onOpenChange:l,workId:n,userId:i,userName:r}=e,[d,c]=(0,t.useState)(""),[o,x]=(0,t.useState)(!1),u=async()=>{if(d.trim()){x(!0);try{await h.Z.createRemind({description:d,work:n,user_remind:i,seen:!1}),c(""),l(!1)}catch(e){}finally{x(!1)}}};return(0,a.jsx)(k.Vq,{open:s,onOpenChange:l,children:(0,a.jsxs)(k.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(k.fK,{children:[(0,a.jsxs)(k.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"w-5 h-5 text-orange-500"}),"Nhắc nhở c\xf4ng việc"]}),(0,a.jsxs)(k.Be,{children:["Gửi nhắc nhở về c\xf4ng việc đến ",(0,a.jsx)("strong",{children:r})]})]}),(0,a.jsx)("div",{className:"grid gap-4 py-4",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(C._,{htmlFor:"remind-description",children:"Nội dung nhắc nhở"}),(0,a.jsx)(Z.g,{id:"remind-description",placeholder:"Nhập nội dung nhắc nhở cho nh\xe2n vi\xean...",value:d,onChange:e=>c(e.target.value),rows:4})]})}),(0,a.jsxs)(k.cN,{children:[(0,a.jsx)(y.zx,{variant:"outline",onClick:()=>l(!1),disabled:o,children:"Hủy"}),(0,a.jsx)(y.zx,{onClick:u,disabled:o,className:"flex items-center gap-2",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Đang gửi..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{className:"w-4 h-4"}),"Gửi nhắc nhở"]})})]})]})})}function T(e){let{workId:s,userId:l,userName:n,listId:i}=e,[r,d]=(0,t.useState)(!1),[c,o]=(0,t.useState)(!1);return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(y.zx,{variant:"outline",size:"sm",onClick:()=>d(!0),className:"flex items-center gap-2 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Đ\xe1nh gi\xe1"]}),(0,a.jsxs)(y.zx,{variant:"outline",size:"sm",onClick:()=>o(!0),className:"flex items-center gap-2 hover:bg-orange-50 hover:text-orange-600 hover:border-orange-200",children:[(0,a.jsx)(_.Z,{className:"w-4 h-4"}),"Nhắc nhở"]}),r&&(0,a.jsx)(D,{open:r,onOpenChange:d,workId:s,userId:l,list_id:i,userName:n}),c&&(0,a.jsx)(S,{open:c,onOpenChange:o,workId:s,userId:l,userName:n})]})}function I(e){var s,l,n;let{isOpen:i,onClose:r,work:d}=e,[c,o]=(0,t.useState)(),x=async()=>{let e=await h.Z.getWorkById(d);200===e.statusCode&&o(e.data)};return((0,t.useEffect)(()=>{d&&x()},[d]),i)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300",onClick:r}),(0,a.jsxs)("div",{className:"fixed right-0 top-0 h-full w-full max-w-2xl bg-background border-l shadow-2xl z-50 transform transition-transform duration-300 ease-in-out ".concat(i?"translate-x-0":"translate-x-full"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(g.Z,{className:"w-6 h-6 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Danh s\xe1ch nh\xe2n vi\xean"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:null==c?void 0:c.name})]})]}),(0,a.jsx)(y.zx,{variant:"ghost",size:"icon",onClick:r,className:"hover:bg-destructive/10 hover:text-destructive",children:(0,a.jsx)(N.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[null==c?void 0:null===(s=c.list_user)||void 0===s?void 0:s.length," nh\xe2n vi\xean được ph\xe2n c\xf4ng"]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[null==c?void 0:null===(l=c.list_user)||void 0===l?void 0:l.map(e=>(0,a.jsx)("div",{className:"p-4 bg-card border rounded-xl hover:shadow-md transition-all duration-200 hover:border-primary/20",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsxs)(w.qE,{className:"w-12 h-12 ring-2 ring-primary/10",children:[(0,a.jsx)(w.F$,{src:(null==e?void 0:e.picture_url)||void 0}),(0,a.jsxs)(w.Q5,{className:"bg-primary/10 text-primary font-medium",children:[null==e?void 0:e.first_name.charAt(0),null==e?void 0:e.last_name.charAt(0)]})]}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-base",children:[null==e?void 0:e.first_name," ",null==e?void 0:e.last_name]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:null==e?void 0:e.email}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["ID: ",null==e?void 0:e.user_id]})]}),(0,a.jsx)(T,{workId:null==c?void 0:c.work_id,userId:null==e?void 0:e.user_id,userName:"".concat(null==e?void 0:e.first_name," ").concat(null==e?void 0:e.last_name),listId:null==e?void 0:e.list_id})]})})]})},null==e?void 0:e.user_id)),(null==c?void 0:null===(n=c.list_user)||void 0===n?void 0:n.length)===0&&(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"w-10 h-10 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Chưa c\xf3 nh\xe2n vi\xean"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Chưa c\xf3 nh\xe2n vi\xean n\xe0o được ph\xe2n c\xf4ng cho c\xf4ng việc n\xe0y"})]})]})]})]})]}):null}function H(){let[e,s]=(0,t.useState)(),[l,N]=(0,t.useState)(25),w=(0,p.Z)(["admin-top","activity","activity-edit","work","work-edit"]),{datas:y}=(0,x.v9)(e=>e.get_works),[b,_]=(0,t.useState)([]),k=[{title:"#",className:"text-xs",dataIndex:"work_id",render:(e,l,t)=>{var i;return(0,a.jsxs)("div",{className:"flex flex-col gap-1 ",children:[(0,a.jsxs)("strong",{children:["#",t+1]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.ZP,{onClick:()=>{s(e)},className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),"Xem nh\xe2n vi\xean (",(null===(i=l.list_user)||void 0===i?void 0:i.length)||0,")"]}),w&&(0,a.jsx)(u.Z,{ID:e})]})]})},sorter:(e,s)=>e.work_id.localeCompare(s.work_id)},{title:"T\xean c\xf4ng việc",dataIndex:"name",className:"text-xs",render:e=>e||"N/A",sorter:(e,s)=>(e.name||"").localeCompare(s.name||"")},{title:"Hoạt động",dataIndex:["activity","name"],className:"text-xs",render:e=>e?"".concat(e):"N/A",sorter:(e,s)=>{var l,a;return((null===(l=e.activity)||void 0===l?void 0:l.name)||"").localeCompare((null===(a=s.activity)||void 0===a?void 0:a.name)||"")}},{title:"Loại c\xf4ng việc",dataIndex:["type","name"],className:"text-xs",render:e=>e||"N/A",sorter:(e,s)=>{var l,a;return((null===(l=e.type)||void 0===l?void 0:l.name)||"").localeCompare((null===(a=s.type)||void 0===a?void 0:a.name)||"")}},{title:"T\xecnh trạng",dataIndex:["status","name"],className:"text-xs",render:e=>e||"N/A",sorter:(e,s)=>{var l,a;return((null===(l=e.status)||void 0===l?void 0:l.name)||"").localeCompare((null===(a=s.status)||void 0===a?void 0:a.name)||"")}},{title:"Khẩn cấp",className:"text-xs",dataIndex:"urgent",render:(e,s)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.Z,{defaultChecked:e,onChange:async e=>{C(s.work_id,e)}})})},{title:"Ng\xe0y bắt đầu",dataIndex:"time_start",className:"text-xs",render:e=>e?new Date(e).toLocaleDateString("vi-VN"):"N/A",sorter:(e,s)=>new Date(e.time_start||0).getTime()-new Date(s.time_start||0).getTime()},{title:"Ng\xe0y kết th\xfac",dataIndex:"time_end",className:"text-xs",render:e=>e?new Date(e).toLocaleDateString("vi-VN"):"N/A",sorter:(e,s)=>new Date(e.time_end||0).getTime()-new Date(s.time_end||0).getTime()}],Z=e=>{_(null==y?void 0:y.filter(s=>{var l,a;return String(s.created_at+" "+s.name+" "+(null===(l=s.activity)||void 0===l?void 0:l.name)+" "+s.time_start+" "+s.time_end+" "+(null==s?void 0:null===(a=s.status)||void 0===a?void 0:a.name)+" "+s.work_id).toLowerCase().includes(e.toLowerCase())}))},C=async(e,s)=>{let l=await D(()=>h.Z.updateWork(e,{urgent:s}));(200===l||201===l)&&S((0,v.LG)())},{postdata:D}=(0,m.Z)(),S=(0,x.I0)(),[T,H]=(0,t.useState)(!1),[P,z]=(0,t.useState)([]),L=async()=>{200===await D(()=>h.Z.deleteWorks(P))&&(S((0,v.LG)()),z([]),H(!1))},Y=(0,j.useSearchParams)();return(0,t.useEffect)(()=>{let e=Y.get("id");y&&e?Z(e):_(y.map((e,s)=>({...e,key:s})))},[y,Y]),(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.Z,{defaultValue:l,style:{width:83},onChange:e=>N(e),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"Tất cả"}]}),(0,a.jsx)(n.ZP,{hidden:!(P.length>0),children:"Xuất ra"}),(0,a.jsx)(n.ZP,{onClick:()=>{H(!0)},danger:!0,hidden:!(P.length>0),className:"text-xl",icon:(0,a.jsx)(f.FH3,{})}),(0,a.jsx)(d.Z,{open:T,title:"X\xf3a dữ liệu",onOk:L,onCancel:()=>{H(!1)},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(o.Z,{onChange:e=>{Z(e.target.value)},placeholder:"T\xecm kiếm",style:{width:200}})})]}),(0,a.jsx)("div",{className:"w-full overflow-auto",children:(0,a.jsx)("div",{className:"min-w-fit",children:(0,a.jsx)(c.Z,{columns:k,rowSelection:{onChange:(e,s)=>{z(s.map(e=>e.work_id))}},dataSource:b,scroll:{x:"max-content"},pagination:{pageSize:l,showTotal:(e,s)=>"".concat(s[0],"-").concat(s[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})}),(0,a.jsx)(I,{isOpen:!!e,onClose:()=>s(void 0),work:e})]})}var P=l(64150),z=l(21544),L=l(83458),Y=l(27648),F=l(61273),A=l(94295);function M(){let{projectID:e}=(0,j.useParams)();return(0,a.jsx)("div",{className:"flex items-start gap-4 w-full flex-col",children:(0,a.jsxs)("div",{className:"flex gap-2 items-center w-full flex-wrap",children:[(0,a.jsx)(P.Z,{}),(0,a.jsx)("div",{className:"sm:block hidden",children:(0,a.jsx)(z.Z,{})}),(0,a.jsx)("div",{className:"sm:block hidden",children:(0,a.jsx)(L.Z,{})}),(0,a.jsx)(Y.default,{href:"/work/scheduler",hidden:!!e,children:(0,a.jsx)(n.ZP,{icon:(0,a.jsx)(F.zwD,{})})}),(0,a.jsx)(Y.default,{href:"/management/all_work",children:(0,a.jsx)(n.ZP,{icon:(0,a.jsx)(A.zom,{})})})]})})}function O(){let e=(0,p.Z)(["admin-top","activity","activity-edit","work","work-edit"]);return(0,a.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[e&&(0,a.jsx)("div",{className:"rounded-md",children:(0,a.jsx)(M,{})}),(0,a.jsx)("div",{className:"rounded-md",children:(0,a.jsx)(H,{})})]})}}},function(e){e.O(0,[5652,1583,3622,6051,7699,5706,5452,1994,6950,7240,522,6990,9212,3113,5319,5651,6006,1047,8143,7526,7464,7821,3464,9481,314,5270,1412,3281,7651,6399,5422,1250,8970,4967,3569,3344,6498,3984,136,6612,480,7580,8026,7648,3609,8230,2384,285,3892,7419,4599,6966,2883,9626,5162,4333,4519,8444,6061,6246,7496,2971,2117,1744],function(){return e(e.s=57782)}),_N_E=e.O()}]);