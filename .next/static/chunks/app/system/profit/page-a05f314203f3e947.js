(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1547],{57390:function(t,e,a){Promise.resolve().then(a.bind(a,43524))},43524:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return k}});var s=a(57437),r=a(78687),n=a(2265),i=a(46475),l=a(14781),c=a(64262),o=a(91626),d=a(58970),u=a(42654),y=a(44967),p=a(90136),h=a(29487),m=a(7140),f=a(32768),x=a(68575);function g(t){let{refBtnProfit:e}=t,[a]=(0,h.Z)(),{postdata:r}=(0,i.Z)(),g=(0,x.I0)(),[v,w]=(0,n.useState)(!1),Z=async t=>{let e=await r(()=>c.Z.createProfit(t));(200===e||201===e)&&(g((0,l.q)()),w(!1))},j=async()=>{a.submit()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.ZP,{hidden:!!e,className:"bg-blue-400 border-0 text-white font-semibold",icon:(0,s.jsx)(f.b0B,{}),onClick:()=>{w(!0)},ref:e,children:"Th\xeam lợi nhuận"}),(0,s.jsxs)(d.Z,{title:"Tạo lợi nhuận",open:v,onCancel:()=>{w(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,s.jsx)(u.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,s.jsx)(m.Z,{tab:"Th\xf4ng tin lợi nhuận",children:(0,s.jsx)(y.Z,{layout:"vertical",form:a,onFinish:Z,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:(0,s.jsx)(y.Z.Item,{name:"type_profit",label:"Số lợi nhuận",style:{minWidth:"100%",flex:"1 1 0%"},children:(0,s.jsx)(p.Z,{})})})},1)}),(0,s.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,s.jsx)(o.ZP,{type:"primary",onClick:j,children:"Tạo"})})]})]})}function v(){return(0,s.jsx)("div",{className:"flex items-start gap-4 w-full flex-col",children:(0,s.jsx)("div",{className:"flex gap-2 items-centerw-full ",children:(0,s.jsx)(g,{})})})}var w=a(11632),Z=a(91250),j=a(56771);function S(t){let{ID:e}=t,[a]=(0,h.Z)(),{postdata:r}=(0,i.Z)(),f=(0,x.I0)(),[g,v]=(0,n.useState)(!1),w=async()=>{let t=await c.Z.getProfit(e);200===t.statusCode&&a.setFieldsValue(t.data)},Z=async t=>{let a=await r(()=>c.Z.updateProfit(e,t));(200===a||201===a)&&(f((0,l.q)()),v(!1))},j=async()=>{a.submit()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.ZP,{className:"  text-xs text-yellow-500 font-semibold",type:"text",onClick:()=>{v(!0),w()},children:"Chỉnh sửa"}),(0,s.jsxs)(d.Z,{title:"Cập nhật lợi nhuận",open:g,onCancel:()=>{v(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,s.jsx)(u.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,s.jsx)(m.Z,{tab:"Th\xf4ng tin lợi nhuận",children:(0,s.jsx)(y.Z,{layout:"vertical",form:a,onFinish:Z,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:(0,s.jsx)(y.Z,{layout:"vertical",form:a,onFinish:Z,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:(0,s.jsx)(y.Z.Item,{name:"type_profit",label:"Số lợi nhuận",style:{minWidth:"100%",flex:"1 1 0%"},children:(0,s.jsx)(p.Z,{})})})})},1)}),(0,s.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,s.jsx)(o.ZP,{type:"primary",onClick:j,children:"Cập nhật"})})]})]})}var _=a(65624);function C(){let[t,e]=(0,n.useState)(25),a=(0,_.Z)(["admin-top","system","system-edit"]),{datas:r}=(0,x.v9)(t=>t.get_profits),[i,l]=(0,n.useState)([]),c=[{title:"#",className:"text-xs",dataIndex:"profit_id",render:(t,e,r)=>(0,s.jsxs)("div",{className:"flex flex-col gap-1 ",children:[(0,s.jsxs)("strong",{children:["#",r+1,"."]}),(0,s.jsx)("div",{className:"flex gap-2",children:a&&(0,s.jsx)(S,{ID:t})})]}),sorter:(t,e)=>t.profit_id.localeCompare(e.profit_id)},{title:"Lợi nhuận",dataIndex:"type_profit",className:"text-xs",render:t=>"".concat(t,"%")||0,sorter:(t,e)=>t.type_profit-e.type_profit}];(0,n.useEffect)(()=>{l(r.map((t,e)=>({...t,key:e})))},[r]);let o=t=>{l(null==r?void 0:r.filter(e=>String(e.type_profit+" "+e.profit_id).toLowerCase().includes(t.toLowerCase())))};return(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)(w.Z,{defaultValue:t,style:{width:83},onChange:t=>e(t),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"Tất cả"}]})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(j.Z,{onChange:t=>{o(t.target.value)},placeholder:"T\xecm kiếm",style:{width:200}})})]}),(0,s.jsx)("div",{className:"w-full overflow-auto",children:(0,s.jsx)("div",{className:"min-w-fit",children:(0,s.jsx)(Z.Z,{columns:c,dataSource:i,scroll:{x:"max-content"},pagination:{pageSize:t,showTotal:(t,e)=>"".concat(e[0],"-").concat(e[1]," of ").concat(t," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}function b(){let t=(0,_.Z)(["admin-top","system","system-edit"]);return(0,s.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[t&&(0,s.jsx)("div",{className:"rounded-md",children:(0,s.jsx)(v,{})}),(0,s.jsx)("div",{className:"rounded-md",children:(0,s.jsx)(C,{})})]})}function k(){let t=(0,x.I0)(),e=(0,_.Z)(["admin-top","system","system-read"]);return(0,n.useEffect)(()=>{e&&t((0,l.q)())},[t,e]),(0,s.jsx)("div",{className:"p-4",children:e?(0,s.jsx)(b,{}):(0,s.jsx)(r.Z,{})})}},78687:function(t,e,a){"use strict";a.d(e,{Z:function(){return i}});var s=a(57437),r=a(71047),n=a(91626);function i(){return(0,s.jsx)(r.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:(0,s.jsx)(n.ZP,{type:"primary",children:"Quay lại"})})}a(2265)},46475:function(t,e,a){"use strict";var s=a(2265),r=a(7261);e.Z=()=>{let[t,e]=(0,s.useState)(null),[a,n]=(0,s.useState)(null);return{postdata:async t=>{let a=r.Am.loading("Processing...");try{let s=await t();if(s)return e(s),n(s.statusCode),200===s.statusCode||201===s.statusCode?r.Am.update(a,{render:s.message,type:"success",isLoading:!1,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):r.Am.update(a,{render:s.message,type:"error",isLoading:!1,position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),s.statusCode;return r.Am.update(a,{render:"No response received.",type:"error",isLoading:!1,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),null}catch(t){r.Am.update(a,{render:"An unexpected error occurred",type:"error",isLoading:!1,autoClose:3e3})}},statusCode:a,response:t}}},14781:function(t,e,a){"use strict";a.d(e,{q:function(){return n}});var s=a(64262),r=a(20301);let n=(0,r.hg)("system/fetchSystemProfits",async(t,e)=>{try{return await s.Z.getProfits()}catch(t){return e.rejectWithValue("Failed to fetch product Vats")}}),i=(0,r.oM)({name:"profit_system",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:t=>{t.addCase(n.pending,t=>{t.loading=!0,t.error=null}).addCase(n.fulfilled,(t,e)=>{200===e.payload.statusCode&&(t.loading=!1,t.datas=e.payload.data)}).addCase(n.rejected,(t,e)=>{t.loading=!1,t.error=e.payload})}}).reducer;e.Z=i},28223:function(t,e,a){"use strict";a.d(e,{Y:function(){return n}});var s=a(83464);let r=s.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"application/json"},withCredentials:!0}),n=s.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});e.Z=r},64262:function(t,e,a){"use strict";var s=a(90382),r=a(28223);e.Z={getProvinces:async()=>{try{return(await r.Z.get("/system/provinces")).data}catch(t){throw(0,s.S)(t),t}},getVats:async()=>{try{return(await r.Z.get("/system/vats")).data}catch(t){throw(0,s.S)(t),t}},getVat:async t=>{try{return(await r.Z.get("/system/vat/".concat(t))).data}catch(t){throw(0,s.S)(t),t}},createVat:async t=>{try{return(await r.Z.post("/system/create-vat",{type_vat:t.type_vat})).data}catch(t){throw(0,s.S)(t),t}},updateVat:async(t,e)=>{try{return(await r.Z.put("/system/update-vat/".concat(t),e)).data}catch(t){throw(0,s.S)(t),t}},getProfits:async()=>{try{return(await r.Z.get("/system/profits")).data}catch(t){throw(0,s.S)(t),t}},getProfit:async t=>{try{return(await r.Z.get("/system/profit/".concat(t))).data}catch(t){throw(0,s.S)(t),t}},createProfit:async t=>{try{return(await r.Z.post("/system/create-profit",t)).data}catch(t){throw(0,s.S)(t),t}},updateProfit:async(t,e)=>{try{return(await r.Z.put("/system/profit/".concat(t),e)).data}catch(t){throw(0,s.S)(t),t}},getTargets:async()=>{try{return(await r.Z.get("/system/targets_revenue")).data}catch(t){throw(0,s.S)(t),t}},getTarget:async t=>{try{return(await r.Z.get("/system/target_revenue/".concat(t))).data}catch(t){throw(0,s.S)(t),t}},getTargetYear:async()=>{try{return(await r.Z.get("/system/target_revenue_year")).data}catch(t){throw(0,s.S)(t),t}},createTarget:async t=>{try{return(await r.Z.post("/system/target_revenue",t)).data}catch(t){throw(0,s.S)(t),t}},updateTarget:async(t,e)=>{try{return(await r.Z.put("/system/target_revenue/".concat(t),e)).data}catch(t){throw(0,s.S)(t),t}},getLinksSystem:async()=>{try{return(await r.Z.get("/system/links_system")).data}catch(t){throw(0,s.S)(t),t}},getLinkSystem:async t=>{try{return(await r.Z.get("/system/link_system/".concat(t))).data}catch(t){throw(0,s.S)(t),t}},createLinkSystem:async t=>{try{return(await r.Z.post("/system/link_system",t)).data}catch(t){throw(0,s.S)(t),t}},updateLinkSystem:async(t,e)=>{try{return(await r.Z.put("/system/link_system/".concat(t),e)).data}catch(t){throw(0,s.S)(t),t}}}},65624:function(t,e,a){"use strict";a.d(e,{Z:function(){return n}});var s=a(2265),r=a(68575);function n(t){let[e,a]=(0,s.useState)(!1),{datas:n}=(0,r.v9)(t=>t.get_access_roles);return(0,s.useEffect)(()=>{n&&(null==n?void 0:n.length)>0&&a(n.some(e=>t.includes(e.role_type.name_tag)))},[n,t]),e}},90382:function(t,e,a){"use strict";a.d(e,{S:function(){return r}});var s=a(7261);let r=t=>{var e,a,r;let n=(null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"An unexpected error occurred",i=null===(r=t.response)||void 0===r?void 0:r.status;s.Am.dismiss(),403===i?s.Am.error("Bạn kh\xf4ng c\xf3 quyền"):s.Am.error(n)}}},function(t){t.O(0,[5706,5319,5651,6006,1047,8143,7526,7464,7821,3464,9481,314,9970,5270,1412,3281,7651,6399,5422,1250,8970,4967,3344,136,2971,2117,1744],function(){return t(t.s=57390)}),_N_E=t.O()}]);