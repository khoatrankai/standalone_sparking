(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9695],{48339:function(e,t,a){Promise.resolve().then(a.bind(a,25645))},25645:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var r=a(57437),s=a(78687),n=a(2265),l=a(46475),i=a(16953),c=a(64262),o=a(91626),d=a(58970),u=a(42654),m=a(44967),y=a(90136),h=a(56612),p=a(29487),g=a(7140),x=a(32768),f=a(68575);function v(e){let{refBtnTargetRevenue:t}=e,[a]=(0,p.Z)(),{postdata:s}=(0,l.Z)(),v=(0,f.I0)(),[w,Z]=(0,n.useState)(!1),j=async e=>{let t=await s(()=>{var t;return c.Z.createTarget({...e,year:new Date(null!==(t=e.year)&&void 0!==t?t:"").getFullYear()})});(200===t||201===t)&&(v((0,i.f)()),Z(!1))},C=async()=>{a.submit()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.ZP,{hidden:!!t,className:"bg-blue-400 border-0 text-white font-semibold",icon:(0,r.jsx)(x.b0B,{}),onClick:()=>{Z(!0)},ref:t,children:"Th\xeam mục ti\xeau"}),(0,r.jsxs)(d.Z,{title:"Tạo mục ti\xeau",open:w,onCancel:()=>{Z(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,r.jsx)(u.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,r.jsx)(g.Z,{tab:"Th\xf4ng tin mục ti\xeau",children:(0,r.jsxs)(m.Z,{layout:"vertical",form:a,onFinish:j,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[(0,r.jsx)(m.Z.Item,{name:"revenue",label:"Doanh thu mong muốn",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,r.jsx)(y.Z,{placeholder:"Gi\xe1",className:"w-full",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>null==e?void 0:e.replace(/\$\s?|(,*)/g,"")})}),(0,r.jsx)(m.Z.Item,{name:"year",label:"Năm",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,r.jsx)(h.default,{placeholder:"Chọn năm",picker:"year"})})]})},1)}),(0,r.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,r.jsx)(o.ZP,{type:"primary",onClick:C,children:"Tạo"})})]})]})}function w(){return(0,r.jsx)("div",{className:"flex items-start gap-4 w-full flex-col",children:(0,r.jsx)("div",{className:"flex gap-2 items-centerw-full ",children:(0,r.jsx)(v,{})})})}var Z=a(11632),j=a(91250),C=a(56771),b=a(71096),S=a.n(b);function N(e){let{ID:t}=e,[a]=(0,p.Z)(),{postdata:s}=(0,l.Z)(),x=(0,f.I0)(),[v,w]=(0,n.useState)(!1),Z=async()=>{let e=await c.Z.getTarget(t);200===e.statusCode&&a.setFieldsValue({...e.data,year:new Date(e.data.year,0,1)})},j=async e=>{let a=await s(()=>{var a;return c.Z.updateTarget(t,{...e,year:new Date(null!==(a=e.year)&&void 0!==a?a:"").getFullYear()})});(200===a||201===a)&&(x((0,i.f)()),w(!1))},C=async()=>{a.submit()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.ZP,{className:"  text-xs text-yellow-500 font-semibold",type:"text",onClick:()=>{w(!0),Z()},children:"Chỉnh sửa"}),(0,r.jsxs)(d.Z,{title:"Cập nhật mục ti\xeau",open:v,onCancel:()=>{w(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,r.jsx)(u.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,r.jsx)(g.Z,{tab:"Th\xf4ng tin mục ti\xeau",children:(0,r.jsxs)(m.Z,{layout:"vertical",form:a,onFinish:j,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[(0,r.jsx)(m.Z.Item,{name:"revenue",label:"Doanh thu mong muốn",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,r.jsx)(y.Z,{placeholder:"Gi\xe1",className:"w-full",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>null==e?void 0:e.replace(/\$\s?|(,*)/g,"")})}),(0,r.jsx)(m.Z.Item,{name:"year",label:"Năm",style:{minWidth:"320px",flex:"1 1 0%"},initialValue:"",className:" mb-0",getValueFromEvent:e=>null==e?void 0:e.format("YYYY-MM-DD"),getValueProps:e=>({value:e?S()(e):""}),children:(0,r.jsx)(h.default,{placeholder:"Chọn năm",picker:"year"})})]})},1)}),(0,r.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,r.jsx)(o.ZP,{type:"primary",onClick:C,children:"Cập nhật"})})]})]})}var _=a(65624);function k(){let[e,t]=(0,n.useState)(25),a=(0,_.Z)(["admin-top","system","system-edit"]),{datas:s}=(0,f.v9)(e=>e.get_target_revenue),[l,i]=(0,n.useState)([]),c=[{title:"#",className:"text-xs",dataIndex:"target_id",render:(e,t,s)=>(0,r.jsxs)("div",{className:"flex flex-col gap-1 ",children:[(0,r.jsxs)("strong",{children:["#",s+1,"."]}),(0,r.jsx)("div",{className:"flex gap-2",children:a&&(0,r.jsx)(N,{ID:e})})]}),sorter:(e,t)=>{var a,r;return(null!==(a=e.target_id)&&void 0!==a?a:"").localeCompare(null!==(r=t.target_id)&&void 0!==r?r:"")}},{title:"Doanh thu mong muốn",dataIndex:"revenue",className:"text-xs",render:e=>"".concat(e)||"N/A",sorter:(e,t)=>{var a,r;return(null!==(a=e.revenue)&&void 0!==a?a:0)-(null!==(r=t.revenue)&&void 0!==r?r:0)}},{title:"Năm",dataIndex:"year",className:"text-xs",render:e=>"".concat(e)||"N/A",sorter:(e,t)=>{var a,r;return(null!==(a=e.year)&&void 0!==a?a:0)-(null!==(r=t.year)&&void 0!==r?r:0)}}];(0,n.useEffect)(()=>{i(s.map((e,t)=>({...e,key:t})))},[s]);let o=e=>{i(null==s?void 0:s.filter(t=>String(t.target_id+" "+t.year+" "+t.revenue).toLowerCase().includes(e.toLowerCase())))};return(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,r.jsx)("div",{className:"flex items-center gap-1",children:(0,r.jsx)(Z.Z,{defaultValue:e,style:{width:83},onChange:e=>t(e),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"Tất cả"}]})}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(C.Z,{onChange:e=>{o(e.target.value)},placeholder:"T\xecm kiếm",style:{width:200}})})]}),(0,r.jsx)("div",{className:"w-full overflow-auto",children:(0,r.jsx)("div",{className:"min-w-fit",children:(0,r.jsx)(j.Z,{columns:c,dataSource:l,scroll:{x:"max-content"},pagination:{pageSize:e,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}function T(){let e=(0,_.Z)(["admin-top","system","system-edit"]);return(0,r.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[e&&(0,r.jsx)("div",{className:"rounded-md",children:(0,r.jsx)(w,{})}),(0,r.jsx)("div",{className:"rounded-md",children:(0,r.jsx)(k,{})})]})}function P(){let e=(0,f.I0)(),t=(0,_.Z)(["admin-top","system","system-read"]);return(0,n.useEffect)(()=>{t&&e((0,i.f)())},[e,t]),(0,r.jsx)("div",{className:"p-4",children:t?(0,r.jsx)(T,{}):(0,r.jsx)(s.Z,{})})}},78687:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(57437),s=a(71047),n=a(91626);function l(){return(0,r.jsx)(s.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:(0,r.jsx)(n.ZP,{type:"primary",children:"Quay lại"})})}a(2265)},46475:function(e,t,a){"use strict";var r=a(2265),s=a(7261);t.Z=()=>{let[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(null);return{postdata:async e=>{let a=s.Am.loading("Processing...");try{let r=await e();if(r)return t(r),n(r.statusCode),200===r.statusCode||201===r.statusCode?s.Am.update(a,{render:r.message,type:"success",isLoading:!1,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.Am.update(a,{render:r.message,type:"error",isLoading:!1,position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),r.statusCode;return s.Am.update(a,{render:"No response received.",type:"error",isLoading:!1,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),null}catch(e){s.Am.update(a,{render:"An unexpected error occurred",type:"error",isLoading:!1,autoClose:3e3})}},statusCode:a,response:e}}},16953:function(e,t,a){"use strict";a.d(t,{f:function(){return n}});var r=a(64262),s=a(20301);let n=(0,s.hg)("system/fetchTargetRevenue",async(e,t)=>{try{return await r.Z.getTargets()}catch(e){return t.rejectWithValue("Failed to fetch product Vats")}}),l=(0,s.oM)({name:"target_revenue",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{200===t.payload.statusCode&&(e.loading=!1,e.datas=t.payload.data)}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}).reducer;t.Z=l},28223:function(e,t,a){"use strict";a.d(t,{Y:function(){return n}});var r=a(83464);let s=r.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"application/json"},withCredentials:!0}),n=r.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});t.Z=s},64262:function(e,t,a){"use strict";var r=a(90382),s=a(28223);t.Z={getProvinces:async()=>{try{return(await s.Z.get("/system/provinces")).data}catch(e){throw(0,r.S)(e),e}},getVats:async()=>{try{return(await s.Z.get("/system/vats")).data}catch(e){throw(0,r.S)(e),e}},getVat:async e=>{try{return(await s.Z.get("/system/vat/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},createVat:async e=>{try{return(await s.Z.post("/system/create-vat",{type_vat:e.type_vat})).data}catch(e){throw(0,r.S)(e),e}},updateVat:async(e,t)=>{try{return(await s.Z.put("/system/update-vat/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},getProfits:async()=>{try{return(await s.Z.get("/system/profits")).data}catch(e){throw(0,r.S)(e),e}},getProfit:async e=>{try{return(await s.Z.get("/system/profit/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},createProfit:async e=>{try{return(await s.Z.post("/system/create-profit",e)).data}catch(e){throw(0,r.S)(e),e}},updateProfit:async(e,t)=>{try{return(await s.Z.put("/system/profit/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},getTargets:async()=>{try{return(await s.Z.get("/system/targets_revenue")).data}catch(e){throw(0,r.S)(e),e}},getTarget:async e=>{try{return(await s.Z.get("/system/target_revenue/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},getTargetYear:async()=>{try{return(await s.Z.get("/system/target_revenue_year")).data}catch(e){throw(0,r.S)(e),e}},createTarget:async e=>{try{return(await s.Z.post("/system/target_revenue",e)).data}catch(e){throw(0,r.S)(e),e}},updateTarget:async(e,t)=>{try{return(await s.Z.put("/system/target_revenue/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}},getLinksSystem:async()=>{try{return(await s.Z.get("/system/links_system")).data}catch(e){throw(0,r.S)(e),e}},getLinkSystem:async e=>{try{return(await s.Z.get("/system/link_system/".concat(e))).data}catch(e){throw(0,r.S)(e),e}},createLinkSystem:async e=>{try{return(await s.Z.post("/system/link_system",e)).data}catch(e){throw(0,r.S)(e),e}},updateLinkSystem:async(e,t)=>{try{return(await s.Z.put("/system/link_system/".concat(e),t)).data}catch(e){throw(0,r.S)(e),e}}}},65624:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(2265),s=a(68575);function n(e){let[t,a]=(0,r.useState)(!1),{datas:n}=(0,s.v9)(e=>e.get_access_roles);return(0,r.useEffect)(()=>{n&&(null==n?void 0:n.length)>0&&a(n.some(t=>e.includes(t.role_type.name_tag)))},[n,e]),t}},90382:function(e,t,a){"use strict";a.d(t,{S:function(){return s}});var r=a(7261);let s=e=>{var t,a,s;let n=(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"An unexpected error occurred",l=null===(s=e.response)||void 0===s?void 0:s.status;r.Am.dismiss(),403===l?r.Am.error("Bạn kh\xf4ng c\xf3 quyền"):r.Am.error(n)}}},function(e){e.O(0,[5706,5319,5651,6006,1047,8143,7526,7464,7821,3464,9481,314,9970,5270,1412,3281,7651,6399,5422,1250,8970,4967,3344,6498,136,6612,2971,2117,1744],function(){return e(e.s=48339)}),_N_E=e.O()}]);