(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3797],{3974:function(e,l,a){Promise.resolve().then(a.bind(a,17186))},17186:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return A}});var t=a(57437),n=a(78687),s=a(2265),r=a(46475),i=a(58143),d=a(79587),u=a(96473),o=a(91626),c=a(58970),h=a(42654),m=a(44967),p=a(16836),x=a(11632),f=a(23496),g=a(20347),j=a(29487),v=a(45747),y=a(7140),b=a(32768),Z=a(68575),_=a(20481),k=a(16114),w=a(17110);function C(){let e=(0,Z.I0)(),l=(0,s.useRef)(),{datas:a}=(0,Z.v9)(e=>e.get_group_user),[n]=(0,j.Z)(),{postdata:C}=(0,r.Z)(),[N,S]=(0,s.useState)(!1),[I,L]=(0,s.useState)(),T=async l=>{let a=(0,d.Z)({...l,picture_url:[null==I?void 0:I.originFileObj]}),t=await C(()=>i.Z.createUser(a));(200===t||201===t)&&(S(!1),e((0,w.l)({})),n.resetFields())},W=async()=>{n.submit()},F=(0,t.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,t.jsx)(u.Z,{}),(0,t.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.ZP,{className:"bg-blue-400 border-0 text-white font-semibold",icon:(0,t.jsx)(b.b0B,{}),onClick:()=>{S(!0)},children:"Th\xeam nh\xe2n vi\xean"}),(0,t.jsxs)(c.Z,{title:"Tạo nh\xe2n vi\xean",open:N,onCancel:()=>{S(!1)},footer:null,width:"100%",style:{maxWidth:"800px"},children:[(0,t.jsx)(h.Z,{defaultActiveKey:"1",style:{width:"100%"},type:"line",children:(0,t.jsx)(y.Z,{tab:"Th\xf4ng tin nh\xe2n vi\xean",children:(0,t.jsxs)(m.Z,{layout:"vertical",form:n,onFinish:T,style:{display:"flex",flexWrap:"wrap",columnGap:"12px"},children:[(0,t.jsx)(m.Z.Item,{name:"first_name",label:"Họ",rules:[{required:!0,message:"Vui l\xf2ng nhập họ!"},{min:1,max:20,message:"Họ phải từ 1 đến 20 k\xfd tự!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(p.default,{placeholder:"Nhập họ"})}),(0,t.jsx)(m.Z.Item,{name:"last_name",label:"T\xean",rules:[{required:!0,message:"Vui l\xf2ng nhập t\xean!"},{min:1,max:20,message:"T\xean phải từ 1 đến 20 k\xfd tự!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(p.default,{placeholder:"Nhập t\xean"})}),(0,t.jsx)(m.Z.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email",message:"Vui l\xf2ng nhập email hợp lệ!"},{max:50,message:"Email kh\xf4ng được vượt qu\xe1 50 k\xfd tự!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(p.default,{placeholder:"Nhập email"})}),(0,t.jsx)(m.Z.Item,{name:"password",label:"Mật khẩu",rules:[{required:!0,message:"Vui l\xf2ng nhập mật khẩu!"},{min:1,max:50,message:"Mật khẩu phải từ 1 đến 50 k\xfd tự!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(p.default.Password,{placeholder:"Nhập mật khẩu"})}),(0,t.jsx)(m.Z.Item,{name:"group_user",label:"Ph\xf2ng ban",rules:[{required:!0,message:"Vui l\xf2ng chọn ph\xf2ng ban!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(x.Z,{placeholder:"Chọn ph\xf2ng ban",showSearch:!0,filterOption:(e,l)=>{var a;return(Array.isArray(null==l?void 0:l.children)?l.children.join(""):null!==(a=null==l?void 0:l.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},dropdownRender:e=>(0,t.jsxs)(t.Fragment,{children:[e,(0,t.jsx)(f.Z,{style:{margin:"8px 0"}}),(0,t.jsx)(o.ZP,{type:"link",onClick:()=>{var e;null===(e=l.current)||void 0===e||e.click()},children:"+ Th\xeam t\xf9y chọn mới"})]}),children:null==a?void 0:a.map(e=>(0,t.jsx)(v.W,{value:e.group_id,children:e.name_group},e.group_id))})}),(0,t.jsx)(m.Z.Item,{name:"phone_number",label:"Số điện thoại",rules:[{type:"string",required:!1}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(p.default,{placeholder:"Nhập số điện thoại"})}),(0,t.jsx)(m.Z.Item,{name:"link_facebook",label:"Facebook",rules:[{type:"url",message:"URL Facebook kh\xf4ng hợp lệ!",required:!1}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(p.default,{placeholder:"Nhập URL Facebook",defaultValue:""})}),(0,t.jsx)(m.Z.Item,{name:"link_zalo",label:"Zalo",rules:[{type:"url",message:"URL Zalo kh\xf4ng hợp lệ!",required:!1}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(p.default,{placeholder:"Nhập URL Zalo",defaultValue:""})}),(0,t.jsx)(m.Z.Item,{name:"link_in",label:"LinkedIn",rules:[{type:"url",message:"URL LinkedIn kh\xf4ng hợp lệ!",required:!1}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(p.default,{placeholder:"Nhập URL LinkedIn",defaultValue:""})}),(0,t.jsx)(m.Z.Item,{name:"link_skype",label:"Skype",rules:[{type:"url",required:!1,message:"URL Skype kh\xf4ng hợp lệ!"}],style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(p.default,{placeholder:"Nhập URL Skype",defaultValue:""})}),(0,t.jsx)(m.Z.Item,{name:"picture_url",label:"Ảnh đại diện",className:"!m-0",style:{minWidth:"320px",flex:"1 1 0%"},children:(0,t.jsx)(g.default,{maxCount:1,action:"",listType:"picture-card",onPreview:l=>{e((0,k.BZ)(l.url))},onChange:e=>{let{file:l}=e;L(l)},children:F})})]})},1)}),(0,t.jsx)("div",{className:"flex justify-end w-full mt-4",children:(0,t.jsx)(o.ZP,{type:"primary",onClick:W,children:"Tạo"})})]}),(0,t.jsx)(_.Z,{refBtnGroup:l})]})}function N(){return(0,t.jsx)("div",{className:"flex items-start gap-4 w-full flex-col",children:(0,t.jsxs)("div",{className:"flex gap-1 items-center  pb-4  w-full flex-wrap",children:[(0,t.jsx)(C,{}),(0,t.jsx)(_.Z,{})]})})}var S=a(87863),I=a(66487),L=a(91250),T=a(56771),W=a(97660),F=a(22744),R=a(65624),U=a(99376);function P(){let[e,l]=(0,s.useState)(25),[a,n]=(0,s.useState)(""),u=(0,R.Z)(["admin-top","user","user-edit"]),[h,m]=(0,s.useState)([]),{datas:p}=(0,Z.v9)(e=>e.get_group_user),{datas:f}=(0,Z.v9)(e=>e.get_filter_user),[g,j]=(0,s.useState)([]),v=async(e,l)=>{let t=(0,d.Z)({status:l?"active":"hide"}),n=await _(()=>i.Z.updateUser(e,t));(200===n||201===n)&&k((0,w.l)({group:""===a?void 0:a}))},y=[{title:"#",className:"text-xs",dataIndex:"user_id",render:(e,l,a)=>(0,t.jsxs)("div",{className:"flex flex-col gap-1 ",children:[(0,t.jsxs)("strong",{className:"flex gap-2 items-center",children:[(0,t.jsx)("span",{children:(0,t.jsx)(S.C,{alt:l.last_name,src:l.picture_url})}),"#",a+1,"."]}),(0,t.jsx)("div",{className:"flex gap-2",children:u&&(0,t.jsx)(W.Z,{ID:e})})]}),sorter:(e,l)=>e.user_id.localeCompare(l.user_id)},{title:"Họ v\xe0 t\xean",className:"text-xs",dataIndex:"",render:(e,l)=>(0,t.jsxs)(t.Fragment,{children:[l.first_name," ",l.last_name]}),sorter:(e,l)=>(e.first_name+e.last_name).localeCompare(l.first_name+l.last_name)},{title:"Email",className:"text-xs",dataIndex:"email",render:e=>(0,t.jsx)(t.Fragment,{children:e}),sorter:(e,l)=>e.email.localeCompare(l.email)},{title:"Số điện thoại",className:"text-xs",dataIndex:"phone_number",render:e=>(0,t.jsx)(t.Fragment,{children:e}),sorter:(e,l)=>e.phone_number.localeCompare(l.phone_number)},{title:"Trạng th\xe1i",className:"text-xs",dataIndex:"status",render:(e,l)=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(I.Z,{defaultChecked:"active"===e,onChange:async e=>{v(l.user_id,e)}})}),sorter:(e,l)=>e.status.localeCompare(l.status)}];(0,s.useEffect)(()=>{if(p){var e;m([...null!==(e=p.map(e=>{var l;return{value:e.group_id,label:null!==(l=e.name_group)&&void 0!==l?l:""}}))&&void 0!==e?e:[],{label:"Tất cả",value:"all"}])}},[p]),(0,s.useEffect)(()=>{""!==a&&k((0,w.l)({group:"all"===a?void 0:a}))},[a]);let b=e=>{j(null==f?void 0:f.filter(l=>String(l.first_name+" "+l.last_name+" "+l.email+" "+l.phone_number+l.status+" "+l.user_id).toLowerCase().includes(e.toLowerCase())))},{postdata:_}=(0,r.Z)(),k=(0,Z.I0)(),[C,N]=(0,s.useState)(!1),[P,q]=(0,s.useState)([]),V=async()=>{200===await _(()=>i.Z.deleteUser(P))&&(k((0,w.l)({group:""===a?void 0:a})),q([]),N(!1))},E=(0,U.useSearchParams)();return(0,s.useEffect)(()=>{let e=E.get("id");f&&e?b(e):j(f.map((e,l)=>({...e,key:l})))},[f,E]),(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Z,{defaultValue:e,style:{width:83},onChange:e=>l(e),options:[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100},{value:500,label:500},{value:1e3,label:1e3},{value:1e8,label:"Tất cả"}]}),(0,t.jsx)(o.ZP,{hidden:!(P.length>0),children:"Xuất ra"}),(0,t.jsx)(o.ZP,{onClick:()=>{N(!0)},danger:!0,hidden:!(P.length>0),className:"text-xl",icon:(0,t.jsx)(F.FH3,{})}),(0,t.jsx)(c.Z,{open:C,title:"X\xf3a dữ liệu",onOk:V,onCancel:()=>{N(!1)},children:"Bạn c\xf3 chắc chắn muốn x\xf3a kh\xf4ng ?"})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(x.Z,{placeholder:"Ph\xf2ng ban",style:{minWidth:120,flex:"1 1 0%"},onChange:e=>{n(e)},showSearch:!0,allowClear:!0,filterOption:(e,l)=>{var a;return(Array.isArray(null==l?void 0:l.label)?l.label.join(""):null!==(a=null==l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},options:h}),(0,t.jsx)(T.Z,{onChange:e=>{b(e.target.value)},placeholder:"T\xecm kiếm",style:{width:200}})]})]}),(0,t.jsx)("div",{className:"w-full overflow-auto",children:(0,t.jsx)("div",{className:"min-w-fit",children:(0,t.jsx)(L.Z,{columns:y,rowSelection:{onChange:(e,l)=>{q(l.map(e=>e.user_id))}},dataSource:g,scroll:{x:"max-content"},pagination:{pageSize:e,showTotal:(e,l)=>"".concat(l[0],"-").concat(l[1]," of ").concat(e," items")},showSorterTooltip:{target:"sorter-icon"}})})})]})}function q(){let e=(0,R.Z)(["admin-top","user","user-edit"]);return(0,t.jsxs)("div",{className:"flex flex-col gap-4 rounded-md p-4 shadow-[0_8px_30px_rgb(0,0,0,0.12)] bg-white",children:[e&&(0,t.jsx)("div",{className:"rounded-md",children:(0,t.jsx)(N,{})}),(0,t.jsx)("div",{className:"rounded-md",children:(0,t.jsx)(P,{})})]})}var V=a(70133),E=a(11715);function A(){let e=(0,Z.I0)(),l=(0,R.Z)(["admin-top","user","user-read"]);return(0,s.useEffect)(()=>{l&&(e((0,w.l)({})),e((0,E.$)()),e((0,V.B)()))},[e,l]),(0,t.jsx)("div",{className:"p-4",children:l?(0,t.jsx)(q,{}):(0,t.jsx)(n.Z,{})})}},78687:function(e,l,a){"use strict";a.d(l,{Z:function(){return r}});var t=a(57437),n=a(71047),s=a(91626);function r(){return(0,t.jsx)(n.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:(0,t.jsx)(s.ZP,{type:"primary",children:"Quay lại"})})}a(2265)},11715:function(e,l,a){"use strict";a.d(l,{$:function(){return s}});var t=a(58143),n=a(20301);let s=(0,n.hg)("user/fetchCategoryRole",async(e,l)=>{try{return await t.Z.getCategoryRoleFull()}catch(e){return l.rejectWithValue("Failed to fetch user info")}}),r=(0,n.oM)({name:"category_role",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,l)=>{200===l.payload.statusCode&&(e.loading=!1,e.datas=l.payload.data)}).addCase(s.rejected,(e,l)=>{e.loading=!1,e.error=l.payload})}}).reducer;l.Z=r},28223:function(e,l,a){"use strict";a.d(l,{Y:function(){return s}});var t=a(83464);let n=t.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"application/json"},withCredentials:!0}),s=t.Z.create({baseURL:"https://api.sparking.cloud",timeout:2e4,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});l.Z=n},90382:function(e,l,a){"use strict";a.d(l,{S:function(){return n}});var t=a(7261);let n=e=>{var l,a,n;let s=(null===(a=e.response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.message)||"An unexpected error occurred",r=null===(n=e.response)||void 0===n?void 0:n.status;t.Am.dismiss(),403===r?t.Am.error("Bạn kh\xf4ng c\xf3 quyền"):t.Am.error(s)}}},function(e){e.O(0,[6051,7699,5706,5452,1994,9956,1779,5319,5651,6006,1047,8143,7526,7464,7821,3464,9481,314,9970,5270,1412,3281,7651,6399,5422,1250,8970,4967,3569,3344,3984,57,7660,2971,2117,1744],function(){return e(e.s=3974)}),_N_E=e.O()}]);