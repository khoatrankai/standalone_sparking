(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1739],{71833:function(t,e,n){Promise.resolve().then(n.bind(n,89479))},48467:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function i(t,e){if(t.length!==e.length)return!1;for(var n,i,o=0;o<t.length;o++)if(!((n=t[o])===(i=e[o])||r(n)&&r(i)))return!1;return!0}function o(t,e){void 0===e&&(e=i);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var o=t.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}},3071:function(t,e,n){"use strict";n.d(e,{Dz:function(){return i},Oq:function(){return f},cv:function(){return d},dO:function(){return a},iz:function(){return p},jn:function(){return o},oc:function(){return c}});var r=n(69398),i=function(t){var e=t.top,n=t.right,r=t.bottom,i=t.left;return{top:e,right:n,bottom:r,left:i,width:n-i,height:r-e,x:i,y:e,center:{x:(n+i)/2,y:(r+e)/2}}},o=function(t,e){return{top:t.top-e.top,left:t.left-e.left,bottom:t.bottom+e.bottom,right:t.right+e.right}},s=function(t,e){return{top:t.top+e.top,left:t.left+e.left,bottom:t.bottom-e.bottom,right:t.right-e.right}},l={top:0,right:0,bottom:0,left:0},a=function(t){var e=t.borderBox,n=t.margin,r=void 0===n?l:n,a=t.border,u=void 0===a?l:a,d=t.padding,c=void 0===d?l:d,f=i(o(e,r)),p=i(s(e,u)),x=i(s(p,c));return{marginBox:f,borderBox:i(e),paddingBox:p,contentBox:x,margin:r,border:u,padding:c}},u=function(t){var e=t.slice(0,-2);if("px"!==t.slice(-2))return 0;var n=Number(e);return isNaN(n)&&(0,r.Z)(!1),n},d=function(t,e){var n=t.borderBox,r=t.border,i=t.margin,o=t.padding;return a({borderBox:{top:n.top+e.y,left:n.left+e.x,bottom:n.bottom+e.y,right:n.right+e.x},border:r,margin:i,padding:o})},c=function(t,e){return void 0===e&&(e={x:window.pageXOffset,y:window.pageYOffset}),d(t,e)},f=function(t,e){return a({borderBox:t,margin:{top:u(e.marginTop),right:u(e.marginRight),bottom:u(e.marginBottom),left:u(e.marginLeft)},padding:{top:u(e.paddingTop),right:u(e.paddingRight),bottom:u(e.paddingBottom),left:u(e.paddingLeft)},border:{top:u(e.borderTopWidth),right:u(e.borderRightWidth),bottom:u(e.borderBottomWidth),left:u(e.borderLeftWidth)}})},p=function(t){return f(t.getBoundingClientRect(),window.getComputedStyle(t))}},64119:function(t,e){"use strict";e.Z=function(t){var e=[],n=null,r=function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];e=i,n||(n=requestAnimationFrame(function(){n=null,t.apply(void 0,e)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r}},60343:function(t,e,n){"use strict";n.d(e,{I4:function(){return s},Ye:function(){return o}});var r=n(2265);function i(t,e){var n=(0,r.useState)(function(){return{inputs:e,result:t()}})[0],i=(0,r.useRef)(!0),o=(0,r.useRef)(n),s=i.current||e&&o.current.inputs&&function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(e,o.current.inputs)?o.current:{inputs:e,result:t()};return(0,r.useEffect)(function(){i.current=!1,o.current=s},[s]),s.result}var o=i,s=function(t,e){return i(function(){return t},e)}},89479:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return R}});var r=n(57437),i=n(78687),o=n(2265),s=n(82762),l=n(45008),a=n(73609),u=n(66789),d=n(14301),c=n(84154),f=n(32768),p=n(15162),x=n(99376);function h(){let t=(0,l._)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  gap: 2px;\n  min-height: 80px;\n  border-radius: 5px;\n  overflow: hidden;\n  max-width: 311px;\n  background: white;\n  margin-top: 15px;\n\n  .secondary-details {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    font-size: 12px;\n    font-weight: 400px;\n    color: #7d7d7d;\n  }\n  /* .priority{ */\n  /* margin-right: 12px; */\n  /* align-self: center;\n    svg{\n      width: 12px !important;\n      height: 12px !important;\n      margin-right: 12px; */\n  /* margin-top: 2px; */\n  /* } */\n  /* } */\n"]);return h=function(){return t},t}let m=a.Z.div(h());var g=t=>{let{item:e,index:n}=t,{id:i}=(0,x.useParams)(),l=(0,o.useRef)();return(0,r.jsx)(s._l,{draggableId:e.work_id,index:n,children:t=>{var n,o,s;return(0,r.jsxs)("div",{onClick:()=>{},ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:[(0,r.jsxs)(m,{className:"shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),0px_1px_0px_0px_rgba(25,28,33,0.02),0px_0px_0px_1px_rgba(25,28,33,0.08)]",onClick:()=>{var t;null===(t=l.current)||void 0===t||t.click()},children:[e.picture_urls&&(null===(n=e.picture_urls)||void 0===n?void 0:n.length)>0&&(0,r.jsx)("div",{className:"w-full h-40 overflow-hidden",onClick:t=>{t.stopPropagation()},children:(0,r.jsx)("div",{className:"h-full",children:(0,r.jsx)(u.Z,{alt:"",width:270,height:160,className:"object-cover",src:e.picture_urls[e.picture_urls.length-1].url})})}),(0,r.jsxs)("div",{className:"p-3 w-full flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm font-semibold",children:e.name})}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"secondary-details",children:(0,r.jsx)("p",{children:(0,r.jsx)("span",{children:new Date(e.created_at).toLocaleDateString("en-us",{month:"short",day:"2-digit"})})})})})]}),(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(d.Z,{content:e.description,children:(0,r.jsx)(f.lIk,{})}),(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)(c.G1z,{}),(0,r.jsx)("p",{className:"text-xs font-light",children:null!==(s=null===(o=e.picture_urls)||void 0===o?void 0:o.length)&&void 0!==s?s:0})]})]}),(0,r.jsx)("p",{className:"text-xs text-black/40 font-bold"})]})]})]}),(0,r.jsx)(p.Z,{ID:null==e?void 0:e.work_id,idType:i,refBtn:l,type:"schedule"})]})}},e.work_id)},v=n(68575),b=n(16534),j=n(46475),y=n(43882),w=n(24307),_=n(64150),N=()=>{let[t,e]=(0,o.useState)([]),{id:n}=(0,x.useParams)(),{postdata:i}=(0,j.Z)(),l=(0,v.I0)();(0,o.useEffect)(()=>{n&&l((0,y.C)(n.toString()))},[n]);let{datas:a}=(0,v.v9)(t=>t.get_type_id_works);(0,o.useEffect)(()=>{var t;e(null!==(t=null==a?void 0:a.status)&&void 0!==t?t:[])},[a]);let u=async t=>{let e=t.map(t=>t.work.map((e,n)=>({activity_id:e.work_id,status:t.status_work_id,position:n+1}))).flat();200===await i(()=>w.Z.updateStatusListActivity(e))&&l((0,y.C)(n.toString()))},d=(t,e,n)=>{if(!t.destination)return;let{source:r,destination:i}=t;if(r.droppableId!==i.droppableId){let t=e[Number(r.droppableId)],o=e[Number(i.droppableId)],s=[...t.work],l=[...o.work],[a]=s.splice(r.index,1);l.splice(i.index,0,a),n(t=>t.map((t,e)=>e===Number(r.droppableId)?{...t,activity:s}:e===Number(i.droppableId)?{...t,activity:l}:t)),u(e.map((t,e)=>e===Number(r.droppableId)?{...t,activity:s}:e===Number(i.droppableId)?{...t,activity:l}:t))}else{let t=[...e[Number(r.droppableId)].work],[o]=t.splice(r.index,1);t.splice(i.index,0,o),n(e=>e.map((e,n)=>n===Number(r.droppableId)?{...e,activity:t}:e)),u(e.map((e,n)=>n===Number(r.droppableId)?{...e,activity:t}:e))}};return(0,r.jsx)(s.Z5,{onDragEnd:n=>{d(n,t,e)},children:(0,r.jsx)("div",{className:"flex sm:justify-normal justify-center",children:(0,r.jsx)("div",{className:"flex w-full min-h-[60vh] flex-wrap gap-4 sm:justify-normal justify-center",children:Object.entries(t).map(t=>{let[e,i]=t;return(0,r.jsx)(s.bK,{droppableId:e,children:t=>(0,r.jsxs)("div",{className:"bg-gray-100",style:{minHeight:"100px",display:"flex",maxHeight:"fit-content",flexDirection:"column",minWidth:"300px",borderRadius:"15px",padding:"15px 15px"},ref:t.innerRef,...t.droppableProps,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{style:{fontWeight:"bold",color:"#1BA29B",fontSize:16,marginBottom:"1.5px"},children:i.name}),(0,r.jsx)("div",{children:(0,r.jsx)(b.P66,{})})]}),(0,r.jsx)("div",{className:"max-h-[70vh] overflow-auto min-h-8",children:i.work.map((t,e)=>(0,r.jsx)(g,{item:t,index:e},e))}),(0,r.jsx)("div",{children:(0,r.jsx)(_.Z,{idStatus:i.status_work_id,idType:n,type:"schedule"})})]})},e)})})})})};function k(){return(0,r.jsx)("div",{children:(0,r.jsx)(N,{})})}var I=n(96248),Z=n(41259),B=n(65624);function R(){let t=(0,v.I0)(),e=(0,B.Z)(["admin-top","activity","activity-read","work","work-read"]);return(0,o.useEffect)(()=>{e&&(t((0,I.D)()),t((0,Z.C)()))},[t,e]),(0,r.jsx)(r.Fragment,{children:e?(0,r.jsx)("div",{className:"sm:p-8 p-2 bg-[#001529] h-full",children:(0,r.jsx)(k,{})}):(0,r.jsx)(i.Z,{})})}},78687:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(57437),i=n(71047),o=n(91626);function s(){return(0,r.jsx)(i.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:(0,r.jsx)(o.ZP,{type:"primary",children:"Quay láº¡i"})})}n(2265)},65624:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(2265),i=n(68575);function o(t){let[e,n]=(0,r.useState)(!1),{datas:o}=(0,i.v9)(t=>t.get_access_roles);return(0,r.useEffect)(()=>{o&&(null==o?void 0:o.length)>0&&n(o.some(e=>t.includes(e.role_type.name_tag)))},[o,t]),e}},45008:function(t,e,n){"use strict";function r(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}n.d(e,{_:function(){return r}})},69398:function(t,e,n){"use strict";function r(t,e){if(!t)throw Error("Invariant failed")}n.d(e,{Z:function(){return r}})}},function(t){t.O(0,[5652,6051,7699,5706,5452,1994,6950,522,3217,3338,5319,5651,6006,1047,8143,7526,7464,7821,3464,9481,314,9970,5270,1412,3281,7651,6399,5422,1250,8970,4967,3569,3344,6498,3984,136,6612,480,7580,8026,3609,8230,4599,6966,2883,9626,5162,4519,2971,2117,1744],function(){return t(t.s=71833)}),_N_E=t.O()}]);