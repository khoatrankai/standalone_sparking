(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7076],{84234:function(e,t,a){Promise.resolve().then(a.bind(a,86435))},86435:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var l=a(57437),r=a(78687),d=a(45664),n=a(80841),s=a(14301),i=a(3810),o=a(91626),c=a(33866),u=a(27589),h=a(2265),x=a(94295),f=a(22744),g=a(68575);let v=e=>{let{name_tag:t}=e,a=d.g[t];return a?a.color:"default"};function p(){let e=(0,g.I0)();(0,h.useEffect)(()=>{e((0,n.Dx)(new Date().getFullYear()))},[e]);let{datas:t}=(0,g.v9)(e=>e.get_works),a=e=>t.filter(t=>{let a=new Date(t.created_at);return a.getDate()===e.date()&&a.getMonth()===e.month()+1&&a.getFullYear()===e.year()}),r=e=>t.filter(t=>{let a=new Date(t.created_at);return a.getMonth()===e.month()+1&&a.getFullYear()===e.year()}),d=e=>{let t=a(e);return(0,l.jsx)("ul",{className:"flex flex-col gap-2 px-2",children:t.map(e=>{var t,a,r,d,n,c,u,h;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("li",{className:"p-2 rounded-lg  bg-red-100/30",children:(0,l.jsxs)(s.Z,{title:"Chi tiết",content:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col w-80 gap-2",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("p",{className:"font-semibold capitalize text-xl text-[#00A9AE]",children:e.name}),(0,l.jsx)("div",{children:(0,l.jsx)(i.Z,{className:"text-xs",color:null!==(u=v({name_tag:null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.name_tag}))&&void 0!==u?u:"default",children:null==e?void 0:null===(a=e.status)||void 0===a?void 0:a.name})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-black/80 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(x.UYI,{className:"text-[#00A9AE]"}),(0,l.jsx)("p",{className:"font-medium capitalize   ",children:null==e?void 0:null===(r=e.type)||void 0===r?void 0:r.name})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(f.o2E,{className:"text-[#00A9AE]"}),(0,l.jsx)("p",{className:"font-medium capitalize ",children:new Date(e.created_at).toLocaleDateString("vi-VN")})]})]}),(0,l.jsx)("p",{className:"text-sm text-black/60",children:e.description}),(0,l.jsx)(o.ZP,{type:"default",className:"bg-[#ED8C22] ",children:"Xem chi tiết"})]})}),className:"w-full h-full flex gap-2",children:[(0,l.jsx)("div",{className:"bg-red-400 w-2 rounded-full"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"font-semibold capitalize",children:e.name}),(0,l.jsx)("p",{className:"font-light lowercase text-slate-500 text-sm",children:null==e?void 0:null===(d=e.type)||void 0===d?void 0:d.name})]}),(0,l.jsx)("div",{className:"flex-1 flex justify-end",children:(0,l.jsx)("div",{children:(0,l.jsx)(i.Z,{className:"text-xs",color:null!==(h=v({name_tag:null==e?void 0:null===(n=e.status)||void 0===n?void 0:n.name_tag}))&&void 0!==h?h:"default",children:null==e?void 0:null===(c=e.status)||void 0===c?void 0:c.name})})})]})},e.work_id)})})})},p=e=>{let t=r(e),a=t.filter(e=>{var t,a;return(null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.name_tag)==="in_progress"||(null==e?void 0:null===(a=e.status)||void 0===a?void 0:a.name_tag)==="on_hold"}),d=t.filter(e=>{var t,a;return(null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.name_tag)==="awaiting_review"||(null==e?void 0:null===(a=e.status)||void 0===a?void 0:a.name_tag)==="requires_revision"}),n=t.filter(e=>{var t,a;return(null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.name_tag)==="completed"||(null==e?void 0:null===(a=e.status)||void 0===a?void 0:a.name_tag)==="delivered"}),s=t.filter(e=>{var t,a;return(null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.name_tag)==="canceled"||(null==e?void 0:null===(a=e.status)||void 0===a?void 0:a.name_tag)==="not_feasible"});return(0,l.jsxs)("div",{className:"p-2 rounded-lg flex flex-col gap-1",children:[t.length>0&&(0,l.jsx)(c.Z,{status:"default",text:"".concat(t.length," hoạt động mới")}),a.length>0&&(0,l.jsx)(c.Z,{status:"processing",text:"".concat(a.length," hoạt động đang thực hiện")}),d.length>0&&(0,l.jsx)(c.Z,{status:"warning",text:"".concat(d.length," hoạt động kiểm tra")}),n.length>0&&(0,l.jsx)(c.Z,{status:"success",text:"".concat(n.length," hoạt động ho\xe0n tất")}),s.length>0&&(0,l.jsx)(c.Z,{status:"error",text:"".concat(s.length," hoạt động hủy bỏ")})]})};return(0,l.jsx)("div",{children:t&&(0,l.jsx)(u.Z,{cellRender:(e,t)=>"date"===t.type?d(e):"month"===t.type?p(e):t.originNode})})}var m=a(96248),y=a(65624),j=a(27648),k=a(45202);function w(){var e;let{datas:t}=(0,g.v9)(e=>e.get_type_work),a=(0,y.Z)(["admin-top","activity","activity-read","work","work-read"]),d=(0,g.I0)();return(0,h.useEffect)(()=>{a&&d((0,m.D)())},[d,a]),(0,l.jsx)(l.Fragment,{children:a?(0,l.jsxs)("div",{className:"p-8 h-full",children:[(0,l.jsx)("div",{className:"flex gap-1",children:(0,l.jsx)(j.default,{href:"scheduler/".concat(null==t?void 0:null===(e=t[0])||void 0===e?void 0:e.type_work_id),children:(0,l.jsx)(o.ZP,{icon:(0,l.jsx)(k.DDi,{})})})}),(0,l.jsx)(p,{})]}):(0,l.jsx)(r.Z,{})})}},96248:function(e,t,a){"use strict";a.d(t,{D:function(){return d}});var l=a(20301),r=a(24307);let d=(0,l.hg)("typeWork/fetchTypeWork",async(e,t)=>{try{return await r.Z.getAllTypeWorks()}catch(e){return t.rejectWithValue("Failed to fetch type Work")}}),n=(0,l.hg)("typeWork/createTypeWork",async(e,t)=>{try{return await r.Z.createTypeWork(e)}catch(e){return t.rejectWithValue("Failed to create type Work")}}),s=(0,l.hg)("typeWork/updateTypeWork",async(e,t)=>{let{type_id:a,data:l}=e;try{return await r.Z.updateTypeWork(a,l)}catch(e){return t.rejectWithValue("Failed to update type Work")}}),i=(0,l.oM)({name:"typeWork",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(n.fulfilled,(e,t)=>{e.datas.push(t.payload.data)}).addCase(s.fulfilled,(e,t)=>{let a=e.datas.findIndex(e=>e.type_work_id===t.payload.data.type_work_id);-1!==a&&(e.datas[a]=t.payload.data)})}}).reducer;t.ZP=i},80841:function(e,t,a){"use strict";a.d(t,{Dx:function(){return n},LG:function(){return d}});var l=a(20301),r=a(24307);let d=(0,l.hg)("work/fetchWorks",async(e,t)=>{try{return await r.Z.getAllWorks(e)}catch(e){return t.rejectWithValue("Failed to fetch works")}}),n=(0,l.hg)("work/fetchYearWorks",async(e,t)=>{try{return await r.Z.getAllYearWorks(e)}catch(e){return t.rejectWithValue("Failed to fetch works")}}),s=(0,l.hg)("work/createWork",async(e,t)=>{try{return await r.Z.createWork(e)}catch(e){return t.rejectWithValue("Failed to create work")}}),i=(0,l.hg)("work/updateWork",async(e,t)=>{let{work_id:a,data:l}=e;try{return await r.Z.updateWork(a,l)}catch(e){return t.rejectWithValue("Failed to update work")}}),o=(0,l.oM)({name:"work",initialState:{datas:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.loading=!1,e.datas=t.payload.data}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(s.fulfilled,(e,t)=>{e.datas.push(t.payload.data)}).addCase(i.fulfilled,(e,t)=>{let a=e.datas.findIndex(e=>e.work_id===t.payload.data.work_id);-1!==a&&(e.datas[a]=t.payload.data)})}}).reducer;t.ZP=o}},function(e){e.O(0,[6051,5452,9212,5319,5651,6006,1047,8143,7526,7464,7821,3464,9481,9970,3281,6498,7648,2337,3197,2971,2117,1744],function(){return e(e.s=84234)}),_N_E=e.O()}]);